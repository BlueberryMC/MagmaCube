From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: acrylic-style <ilyy@outlook.jp>
Date: Sun, 10 Jan 2021 20:40:08 +0900
Subject: [PATCH] decompile fix


diff --git a/src/main/java/com/mojang/blaze3d/font/TrueTypeGlyphProvider.java b/src/main/java/com/mojang/blaze3d/font/TrueTypeGlyphProvider.java
index e314932b409bc2cb1deb2f4d25c202150001813f..0b56d6f3f8c60d5e39e64750ba4019e6af88fb54 100644
--- a/src/main/java/com/mojang/blaze3d/font/TrueTypeGlyphProvider.java
+++ b/src/main/java/com/mojang/blaze3d/font/TrueTypeGlyphProvider.java
@@ -78,9 +78,9 @@ public class TrueTypeGlyphProvider implements GlyphProvider {
             int i2 = STBTruetype.stbtt_FindGlyphIndex(this.font, i);
             if (i2 != 0) {
                STBTruetype.stbtt_GetGlyphBitmapBoxSubpixel(this.font, i2, this.pointScale, this.pointScale, this.shiftX, this.shiftY, intBuffer, intBuffer2, intBuffer3, intBuffer4);
-               int i3 = intBuffer3.get(0) - intBuffer.get(0);
+               int i3x = intBuffer3.get(0) - intBuffer.get(0); // MagmaCube - decompile error
                int i4 = intBuffer4.get(0) - intBuffer2.get(0);
-               if (i3 != 0 && i4 != 0) {
+               if (i3x != 0 && i4 != 0) { // MagmaCube - decompile error
                   IntBuffer intBuffer5 = memoryStack.mallocInt(1);
                   IntBuffer intBuffer6 = memoryStack.mallocInt(1);
                   STBTruetype.stbtt_GetGlyphHMetrics(this.font, i2, intBuffer5, intBuffer6);
diff --git a/src/main/java/com/mojang/blaze3d/platform/GlDebug.java b/src/main/java/com/mojang/blaze3d/platform/GlDebug.java
index 90c5771f7d4c2fad46600c6486674fcfc3565ed0..753777a779e6567253d343d8ed7daef68aa4cf49 100644
--- a/src/main/java/com/mojang/blaze3d/platform/GlDebug.java
+++ b/src/main/java/com/mojang/blaze3d/platform/GlDebug.java
@@ -11,9 +11,11 @@ import java.util.List;
 import java.util.Map;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
+import org.lwjgl.opengl.ARBDebugOutput;
 import org.lwjgl.opengl.GL;
 import org.lwjgl.opengl.GL11;
 import org.lwjgl.opengl.GLCapabilities;
+import org.lwjgl.opengl.GLDebugMessageARBCallback;
 import org.lwjgl.opengl.GLDebugMessageCallback;
 import org.lwjgl.opengl.KHRDebug;
 
@@ -96,9 +98,36 @@ public class GlDebug {
       BY_ID.merge(i, s, (sx, s2) -> sx + "/" + s2);
    }
 
-   public static void enableDebugCallback(int i, boolean flag) {
-      // $FF: Couldn't be decompiled
+   // MagmaCube start - decompile error
+   public static void enableDebugCallback(int debugVerbosity, boolean synchronous) {
+      RenderSystem.assertThread(RenderSystem::isInInitPhase);
+      if (debugVerbosity > 0) {
+         GLCapabilities glcapabilities = GL.getCapabilities();
+         if (glcapabilities.GL_KHR_debug) {
+            GL11.glEnable(37600);
+            if (synchronous) {
+               GL11.glEnable(33346);
+            }
+            for(int i = 0; i < DEBUG_LEVELS.size(); ++i) {
+               boolean flag = i < debugVerbosity;
+               KHRDebug.glDebugMessageControl(4352, 4352, DEBUG_LEVELS.get(i), (int[])null, flag);
+            }
+            KHRDebug.glDebugMessageCallback(GLX.make(GLDebugMessageCallback.create(GlDebug::printDebugLog), DebugMemoryUntracker::untrack), 0L);
+         } else if (glcapabilities.GL_ARB_debug_output) {
+            if (synchronous) {
+               GL11.glEnable(33346);
+            }
+
+            for(int j = 0; j < DEBUG_LEVELS_ARB.size(); ++j) {
+               boolean flag1 = j < debugVerbosity;
+               ARBDebugOutput.glDebugMessageControlARB(4352, 4352, DEBUG_LEVELS_ARB.get(j), (int[])null, flag1);
+            }
+
+            ARBDebugOutput.glDebugMessageCallbackARB(GLX.make(GLDebugMessageARBCallback.create(GlDebug::printDebugLog), DebugMemoryUntracker::untrack), 0L);
+         }
+      }
    }
+   // MagmaCube end - decompile error
 
    static {
       setup(256, "GL11.GL_ACCUM");
diff --git a/src/main/java/com/mojang/blaze3d/platform/GlStateManager.java b/src/main/java/com/mojang/blaze3d/platform/GlStateManager.java
index b682ce37b14673bfd9a26646824bebbeb6512346..6b3bf0e1a457bdb023dd6b537cbdb63e78a1bf47 100644
--- a/src/main/java/com/mojang/blaze3d/platform/GlStateManager.java
+++ b/src/main/java/com/mojang/blaze3d/platform/GlStateManager.java
@@ -892,8 +892,10 @@ public class GlStateManager {
 
    public static void _activeTexture(int i) {
       RenderSystem.assertThread(RenderSystem::isOnRenderThread);
-      if (activeTexture != i - '闢�') {
-         activeTexture = i - '闢�';
+      // MagmaCube start - decompile error
+      if (activeTexture != i - '\u84c0') {
+         activeTexture = i - '\u84c0';
+         // MagmaCube end - decompile error
          glActiveTexture(i);
       }
 
diff --git a/src/main/java/com/mojang/blaze3d/platform/InputConstants.java b/src/main/java/com/mojang/blaze3d/platform/InputConstants.java
index 7c92266ef5a234d1bb4dc77e9cfefabe14c039ac..bdc40f92d0d04dcd61bd48e3c70e2b3e2355cd2f 100644
--- a/src/main/java/com/mojang/blaze3d/platform/InputConstants.java
+++ b/src/main/java/com/mojang/blaze3d/platform/InputConstants.java
@@ -72,7 +72,7 @@ public class InputConstants {
 
    public static boolean isRawMouseInputSupported() {
       try {
-         return glfwRawMouseMotionSupported != null && glfwRawMouseMotionSupported.invokeExact();
+         return glfwRawMouseMotionSupported != null && (boolean) glfwRawMouseMotionSupported.invokeExact(); // MagmaCube - decompile error
       } catch (Throwable var1) {
          throw new RuntimeException(var1);
       }
@@ -94,7 +94,7 @@ public class InputConstants {
       try {
          methodHandle = lookup.findStatic(GLFW.class, "glfwRawMouseMotionSupported", methodType);
          MethodHandle methodHandle2 = lookup.findStaticGetter(GLFW.class, "GLFW_RAW_MOUSE_MOTION", Integer.TYPE);
-         i = methodHandle2.invokeExact();
+         i = (int) methodHandle2.invokeExact(); // MagmaCube - decompile error
       } catch (NoSuchFieldException | NoSuchMethodException var5) {
       } catch (Throwable var6) {
          throw new RuntimeException(var6);
@@ -166,10 +166,16 @@ public class InputConstants {
 
    public static enum Type {
       KEYSYM("key.keyboard", (integer, s) -> {
-         // $FF: Couldn't be decompiled
+         // MagmaCube start - decompile error
+         String s1 = GLFW.glfwGetKeyName(integer, -1);
+         return (s1 != null ? new net.minecraft.network.chat.TextComponent(s1) : new TranslatableComponent(s));
+         // MagmaCube end - decompile error
       }),
       SCANCODE("scancode", (integer, s) -> {
-         // $FF: Couldn't be decompiled
+         // MagmaCube start - decompile error
+         String s1 = GLFW.glfwGetKeyName(-1, integer);
+         return (s1 != null ? new net.minecraft.network.chat.TextComponent(s1) : new TranslatableComponent(s));
+         // MagmaCube end - decompile error
       }),
       MOUSE("key.mouse", (integer, s) -> Language.getInstance().has(s) ? new TranslatableComponent(s) : new TranslatableComponent("key.mouse", integer + 1));
 
diff --git a/src/main/java/com/mojang/blaze3d/shaders/BlendMode.java b/src/main/java/com/mojang/blaze3d/shaders/BlendMode.java
index 47ede6ddd3ab577430ee98f4976b7f2cd9fce6ed..ef3fb05e427549ccdcb48445b23026215947b227 100644
--- a/src/main/java/com/mojang/blaze3d/shaders/BlendMode.java
+++ b/src/main/java/com/mojang/blaze3d/shaders/BlendMode.java
@@ -109,7 +109,7 @@ public class BlendMode {
       } else if ("min".equals(s2)) {
          return 32775;
       } else {
-         return "max".equals(s2) ? '閠�' : '閠�';
+         return "max".equals(s2) ? '\u8008' : '\u8006'; // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/com/mojang/blaze3d/vertex/DefaultVertexFormat.java b/src/main/java/com/mojang/blaze3d/vertex/DefaultVertexFormat.java
index fd0292d7631b8444cca738242ffae9da5c2f3faf..7bb0dc4033979bbebb5f9c9531d959ac8743759d 100644
--- a/src/main/java/com/mojang/blaze3d/vertex/DefaultVertexFormat.java
+++ b/src/main/java/com/mojang/blaze3d/vertex/DefaultVertexFormat.java
@@ -10,20 +10,22 @@ public class DefaultVertexFormat {
    public static final VertexFormatElement ELEMENT_UV2 = new VertexFormatElement(2, VertexFormatElement.Type.SHORT, VertexFormatElement.Usage.UV, 2);
    public static final VertexFormatElement ELEMENT_NORMAL = new VertexFormatElement(0, VertexFormatElement.Type.BYTE, VertexFormatElement.Usage.NORMAL, 3);
    public static final VertexFormatElement ELEMENT_PADDING = new VertexFormatElement(0, VertexFormatElement.Type.BYTE, VertexFormatElement.Usage.PADDING, 1);
-   public static final VertexFormat BLOCK = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).add(ELEMENT_UV2).add(ELEMENT_NORMAL).add(ELEMENT_PADDING).build());
-   public static final VertexFormat NEW_ENTITY = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).add(ELEMENT_UV1).add(ELEMENT_UV2).add(ELEMENT_NORMAL).add(ELEMENT_PADDING).build());
+   // MagmaCube start - decompile error
+   public static final VertexFormat BLOCK = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).add(ELEMENT_UV2).add(ELEMENT_NORMAL).add(ELEMENT_PADDING).build());
+   public static final VertexFormat NEW_ENTITY = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).add(ELEMENT_UV1).add(ELEMENT_UV2).add(ELEMENT_NORMAL).add(ELEMENT_PADDING).build());
    @Deprecated
-   public static final VertexFormat PARTICLE = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_COLOR).add(ELEMENT_UV2).build());
-   public static final VertexFormat POSITION = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).build());
-   public static final VertexFormat POSITION_COLOR = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).build());
-   public static final VertexFormat POSITION_COLOR_LIGHTMAP = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV2).build());
-   public static final VertexFormat POSITION_TEX = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).build());
-   public static final VertexFormat POSITION_COLOR_TEX = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).build());
+   public static final VertexFormat PARTICLE = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_COLOR).add(ELEMENT_UV2).build());
+   public static final VertexFormat POSITION = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).build());
+   public static final VertexFormat POSITION_COLOR = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).build());
+   public static final VertexFormat POSITION_COLOR_LIGHTMAP = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV2).build());
+   public static final VertexFormat POSITION_TEX = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).build());
+   public static final VertexFormat POSITION_COLOR_TEX = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).build());
    @Deprecated
-   public static final VertexFormat POSITION_TEX_COLOR = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_COLOR).build());
-   public static final VertexFormat POSITION_COLOR_TEX_LIGHTMAP = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).add(ELEMENT_UV2).build());
+   public static final VertexFormat POSITION_TEX_COLOR = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_COLOR).build());
+   public static final VertexFormat POSITION_COLOR_TEX_LIGHTMAP = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_COLOR).add(ELEMENT_UV0).add(ELEMENT_UV2).build());
    @Deprecated
-   public static final VertexFormat POSITION_TEX_LIGHTMAP_COLOR = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_UV2).add(ELEMENT_COLOR).build());
+   public static final VertexFormat POSITION_TEX_LIGHTMAP_COLOR = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_UV2).add(ELEMENT_COLOR).build());
    @Deprecated
-   public static final VertexFormat POSITION_TEX_COLOR_NORMAL = new VertexFormat(ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_COLOR).add(ELEMENT_NORMAL).add(ELEMENT_PADDING).build());
+   public static final VertexFormat POSITION_TEX_COLOR_NORMAL = new VertexFormat((ImmutableList)ImmutableList.builder().add(ELEMENT_POSITION).add(ELEMENT_UV0).add(ELEMENT_COLOR).add(ELEMENT_NORMAL).add(ELEMENT_PADDING).build());
+   // MagmaCube end - decompile error
 }
\ No newline at end of file
diff --git a/src/main/java/com/mojang/blaze3d/vertex/VertexFormatElement.java b/src/main/java/com/mojang/blaze3d/vertex/VertexFormatElement.java
index f2b288c356f05249f449c11207d5aef0c9dc69a7..53aa202668dcae5181e3dea79182f78240ccbb49 100644
--- a/src/main/java/com/mojang/blaze3d/vertex/VertexFormatElement.java
+++ b/src/main/java/com/mojang/blaze3d/vertex/VertexFormatElement.java
@@ -134,12 +134,12 @@ public class VertexFormatElement {
          GlStateManager._clearCurrentColor();
       }),
       UV("UV", (i, i2, i3, l, i4) -> {
-         GlStateManager._glClientActiveTexture('闢�' + i4);
+         GlStateManager._glClientActiveTexture('\u84c0' + i4); // MagmaCube - decompile error
          GlStateManager._texCoordPointer(i, i2, i3, l);
          GlStateManager._enableClientState(32888);
          GlStateManager._glClientActiveTexture(33984);
       }, (i) -> {
-         GlStateManager._glClientActiveTexture('闢�' + i);
+         GlStateManager._glClientActiveTexture('\u84c0' + i); // MagmaCube - decompile error
          GlStateManager._disableClientState(32888);
          GlStateManager._glClientActiveTexture(33984);
       }),
diff --git a/src/main/java/com/mojang/realmsclient/gui/screens/RealmsBrokenWorldScreen.java b/src/main/java/com/mojang/realmsclient/gui/screens/RealmsBrokenWorldScreen.java
index 56ed5d9a927b281fbedcae6d2dd0341852b1103b..12196306f7596f8c97711e0dce95bb98f057110c 100644
--- a/src/main/java/com/mojang/realmsclient/gui/screens/RealmsBrokenWorldScreen.java
+++ b/src/main/java/com/mojang/realmsclient/gui/screens/RealmsBrokenWorldScreen.java
@@ -69,7 +69,7 @@ public class RealmsBrokenWorldScreen extends RealmsScreen {
          boolean flag = i != this.serverData.activeSlot || this.serverData.worldType == RealmsServer.WorldType.MINIGAME;
          Button button;
          if (flag) {
-            button = new Button(this.getFramePositionX(i), row(8), 80, 20, new TranslatableComponent("mco.brokenworld.play"), (button) -> {
+            button = new Button(this.getFramePositionX(i), row(8), 80, 20, new TranslatableComponent("mco.brokenworld.play"), (buttonx) -> { // MagmaCube - decompile error
                if (((RealmsWorldOptions)this.serverData.slots.get(i)).empty) {
                   RealmsResetWorldScreen realmsResetWorldScreen = new RealmsResetWorldScreen(this, this.serverData, new TranslatableComponent("mco.configure.world.switch.slot"), new TranslatableComponent("mco.configure.world.switch.slot.subtitle"), 10526880, CommonComponents.GUI_CANCEL, this::doSwitchOrReset, () -> {
                      this.minecraft.setScreen(this);
@@ -84,11 +84,13 @@ public class RealmsBrokenWorldScreen extends RealmsScreen {
 
             });
          } else {
-            button = new Button(this.getFramePositionX(i), row(8), 80, 20, new TranslatableComponent("mco.brokenworld.download"), (button) -> {
+            button = new Button(this.getFramePositionX(i), row(8), 80, 20, new TranslatableComponent("mco.brokenworld.download"), (buttonx) -> { // MagmaCube - decompile error
                Component component = new TranslatableComponent("mco.configure.world.restore.download.question.line1");
                Component component2 = new TranslatableComponent("mco.configure.world.restore.download.question.line2");
-               this.minecraft.setScreen(new RealmsLongConfirmationScreen((flag) -> {
-                  if (flag) {
+               // MagmaCube start - decompile error
+               this.minecraft.setScreen(new RealmsLongConfirmationScreen((flagx) -> {
+                  if (flagx) {
+                     // MagmaCube end - decompile error
                      this.downloadWorld(i);
                   } else {
                      this.minecraft.setScreen(this);
@@ -104,7 +106,7 @@ public class RealmsBrokenWorldScreen extends RealmsScreen {
          }
 
          this.addButton(button);
-         this.addButton(new Button(this.getFramePositionX(i), row(10), 80, 20, new TranslatableComponent("mco.brokenworld.reset"), (button) -> {
+         this.addButton(new Button(this.getFramePositionX(i), row(10), 80, 20, new TranslatableComponent("mco.brokenworld.reset"), (buttonx) -> { // MagmaCube - decompile error
             RealmsResetWorldScreen realmsResetWorldScreen = new RealmsResetWorldScreen(this, this.serverData, this::doSwitchOrReset, () -> {
                this.minecraft.setScreen(this);
                this.doSwitchOrReset();
diff --git a/src/main/java/com/mojang/realmsclient/gui/screens/RealmsSelectWorldTemplateScreen.java b/src/main/java/com/mojang/realmsclient/gui/screens/RealmsSelectWorldTemplateScreen.java
index a21d09cec968649392df8a327475020b7a495442..61ccc3e98a45e7daf42d09ca09a5cd55412d9d3b 100644
--- a/src/main/java/com/mojang/realmsclient/gui/screens/RealmsSelectWorldTemplateScreen.java
+++ b/src/main/java/com/mojang/realmsclient/gui/screens/RealmsSelectWorldTemplateScreen.java
@@ -199,40 +199,42 @@ public class RealmsSelectWorldTemplateScreen extends RealmsScreen {
    private void fetchTemplatesAsync(final WorldTemplatePaginatedList worldTemplatePaginatedList) {
       (new Thread("realms-template-fetcher") {
          public void run() {
-            WorldTemplatePaginatedList worldTemplatePaginatedList = worldTemplatePaginatedList;
-
-            Either<WorldTemplatePaginatedList, String> either;
-            for(RealmsClient realmsClient = RealmsClient.create(); worldTemplatePaginatedList != null; worldTemplatePaginatedList = (WorldTemplatePaginatedList)RealmsSelectWorldTemplateScreen.this.minecraft.submit(() -> {
-               if (either.right().isPresent()) {
-                  RealmsSelectWorldTemplateScreen.LOGGER.error("Couldn't fetch templates: {}", either.right().get());
-                  if (RealmsSelectWorldTemplateScreen.this.worldTemplateObjectSelectionList.isEmpty()) {
-                     RealmsSelectWorldTemplateScreen.this.noTemplatesMessage = TextRenderingUtils.decompose(I18n.get("mco.template.select.failure"));
-                  }
-
-                  return null;
-               } else {
-                  WorldTemplatePaginatedList worldTemplatePaginatedList = (WorldTemplatePaginatedList)either.left().get();
-
-                  for(WorldTemplate worldTemplate : worldTemplatePaginatedList.templates) {
-                     RealmsSelectWorldTemplateScreen.this.worldTemplateObjectSelectionList.addEntry(worldTemplate);
-                  }
-
-                  if (worldTemplatePaginatedList.templates.isEmpty()) {
+            // MagmaCube start - decompile error
+            WorldTemplatePaginatedList worldtemplatepaginatedlist = worldTemplatePaginatedList;
+
+            RealmsClient realmsclient = RealmsClient.create();
+            while (worldtemplatepaginatedlist != null) {
+               Either<WorldTemplatePaginatedList, String> either = RealmsSelectWorldTemplateScreen.this.fetchTemplates(worldtemplatepaginatedlist, realmsclient);
+               worldtemplatepaginatedlist = RealmsSelectWorldTemplateScreen.this.minecraft.submit(() -> {
+                  if (either.right().isPresent()) {
+                     RealmsSelectWorldTemplateScreen.LOGGER.error("Couldn't fetch templates: {}", either.right().get());
                      if (RealmsSelectWorldTemplateScreen.this.worldTemplateObjectSelectionList.isEmpty()) {
-                        String s = I18n.get("mco.template.select.none", "%link");
-                        TextRenderingUtils.LineSegment lineSegment = TextRenderingUtils.LineSegment.link(I18n.get("mco.template.select.none.linkTitle"), "https://aka.ms/MinecraftRealmsContentCreator");
-                        RealmsSelectWorldTemplateScreen.this.noTemplatesMessage = TextRenderingUtils.decompose(s, lineSegment);
+                        RealmsSelectWorldTemplateScreen.this.noTemplatesMessage = TextRenderingUtils.decompose(I18n.get("mco.template.select.failure"));
                      }
 
                      return null;
                   } else {
-                     return worldTemplatePaginatedList;
+                     WorldTemplatePaginatedList worldtemplatepaginatedlist1 = either.left().get();
+
+                     for(WorldTemplate worldtemplate : worldtemplatepaginatedlist1.templates) {
+                        RealmsSelectWorldTemplateScreen.this.worldTemplateObjectSelectionList.addEntry(worldtemplate);
+                     }
+
+                     if (worldtemplatepaginatedlist1.templates.isEmpty()) {
+                        if (RealmsSelectWorldTemplateScreen.this.worldTemplateObjectSelectionList.isEmpty()) {
+                           String s = I18n.get("mco.template.select.none", "%link");
+                           TextRenderingUtils.LineSegment textrenderingutils$linesegment = TextRenderingUtils.LineSegment.link(I18n.get("mco.template.select.none.linkTitle"), "https://aka.ms/MinecraftRealmsContentCreator");
+                           RealmsSelectWorldTemplateScreen.this.noTemplatesMessage = TextRenderingUtils.decompose(s, textrenderingutils$linesegment);
+                        }
+
+                        return null;
+                     } else {
+                        return worldtemplatepaginatedlist1;
+                     }
                   }
-               }
-            }).join()) {
-               either = RealmsSelectWorldTemplateScreen.this.fetchTemplates(worldTemplatePaginatedList, realmsClient);
+               }).join();
+               // MagmaCube end - decompile error
             }
-
          }
       }).start();
    }
diff --git a/src/main/java/net/minecraft/ChatFormatting.java b/src/main/java/net/minecraft/ChatFormatting.java
index 5cb353e7473ecadd9528b05d87d6817fdfaa289c..5d288fbe435dcb9b49f071270a491164d6d22de4 100644
--- a/src/main/java/net/minecraft/ChatFormatting.java
+++ b/src/main/java/net/minecraft/ChatFormatting.java
@@ -35,7 +35,7 @@ public enum ChatFormatting {
    RESET("RESET", 'r', -1, (Integer)null);
 
    private static final Map<String, ChatFormatting> FORMATTING_BY_NAME = (Map)Arrays.stream(values()).collect(Collectors.toMap((chatFormatting) -> cleanName(chatFormatting.name), (chatFormatting) -> chatFormatting));
-   private static final Pattern STRIP_FORMATTING_PATTERN = Pattern.compile("(?i)ﾂｧ[0-9A-FK-OR]");
+   private static final Pattern STRIP_FORMATTING_PATTERN = Pattern.compile("(?i)\u00a7[0-9A-FK-OR]");
    private final String name;
    private final char code;
    private final boolean isFormat;
@@ -62,7 +62,7 @@ public enum ChatFormatting {
       this.isFormat = flag;
       this.id = i;
       this.color = integer;
-      this.toString = "ﾂｧ" + c;
+      this.toString = "\u00a7" + c;
    }
 
    public int getId() {
diff --git a/src/main/java/net/minecraft/Util.java b/src/main/java/net/minecraft/Util.java
index 21e729e2f1d89a5e8aa8ce82d3adb7519d8f806d..21a7a6e5d0279928c01364efee8b520a67f8498b 100644
--- a/src/main/java/net/minecraft/Util.java
+++ b/src/main/java/net/minecraft/Util.java
@@ -21,6 +21,7 @@ import java.nio.file.LinkOption;
 import java.nio.file.Path;
 import java.security.AccessController;
 import java.security.PrivilegedActionException;
+import java.security.PrivilegedExceptionAction;
 import java.time.Instant;
 import java.util.Arrays;
 import java.util.Iterator;
@@ -278,7 +279,7 @@ public class Util {
    }
 
    public static <K> Strategy<K> identityStrategy() {
-      return Util.IdentityStrategy.INSTANCE;
+      return (Strategy<K>) IdentityStrategy.INSTANCE; // MagmaCube - decompile error
    }
 
    public static <V> CompletableFuture<List<V>> sequence(List<? extends CompletableFuture<? extends V>> list) {
@@ -545,7 +546,7 @@ public class Util {
 
       public void openUrl(URL uRL) {
          try {
-            Process process = (Process)AccessController.doPrivileged(() -> Runtime.getRuntime().exec(this.getOpenUrlArguments(uRL)));
+            Process process = (Process)AccessController.doPrivileged((PrivilegedExceptionAction<Process>) () -> Runtime.getRuntime().exec(this.getOpenUrlArguments(uRL))); // MagmaCube - decompile error
 
             for(String s : IOUtils.readLines(process.getErrorStream())) {
                Util.LOGGER.error(s);
diff --git a/src/main/java/net/minecraft/advancements/critereon/PlayerPredicate.java b/src/main/java/net/minecraft/advancements/critereon/PlayerPredicate.java
index 89308d5e4a3290d5a676fef32181c34aeede05cf..09eb687442dc21eebfe6fc7ddb39e6f95efa50f0 100644
--- a/src/main/java/net/minecraft/advancements/critereon/PlayerPredicate.java
+++ b/src/main/java/net/minecraft/advancements/critereon/PlayerPredicate.java
@@ -184,11 +184,13 @@ public class PlayerPredicate {
          if (!this.stats.isEmpty()) {
             JsonArray jsonArray = new JsonArray();
             this.stats.forEach((stat, ints) -> {
-               JsonObject jsonObject = new JsonObject();
-               jsonObject.addProperty("type", Registry.STAT_TYPE.getKey(stat.getType()).toString());
-               jsonObject.addProperty("stat", getStatValueId(stat).toString());
-               jsonObject.add("value", ints.serializeToJson());
-               jsonArray.add(jsonObject);
+               // MagmaCube start - decompile error
+               JsonObject jsonObjectx = new JsonObject();
+               jsonObjectx.addProperty("type", Registry.STAT_TYPE.getKey(stat.getType()).toString());
+               jsonObjectx.addProperty("stat", getStatValueId(stat).toString());
+               jsonObjectx.add("value", ints.serializeToJson());
+               jsonArray.add(jsonObjectx);
+               // MagmaCube end - decompile error
             });
             jsonObject.add("stats", jsonArray);
          }
diff --git a/src/main/java/net/minecraft/client/ClientRecipeBook.java b/src/main/java/net/minecraft/client/ClientRecipeBook.java
index f01121dfbbf5e601c898e00cbafcd92e82548b47..0570b4e9695eb86e068f5f7aee4309a66e28aa66 100644
--- a/src/main/java/net/minecraft/client/ClientRecipeBook.java
+++ b/src/main/java/net/minecraft/client/ClientRecipeBook.java
@@ -35,7 +35,7 @@ public class ClientRecipeBook extends RecipeBook {
          List var10000 = (List)map2.put(recipeBookCategories, list.stream().map(RecipeCollection::new).peek(builder::add).collect(ImmutableList.toImmutableList()));
       });
       RecipeBookCategories.AGGREGATE_CATEGORIES.forEach((recipeBookCategories, list) -> {
-         List var10000 = (List)map2.put(recipeBookCategories, list.stream().flatMap((recipeBookCategoriesx) -> ((List)map2.getOrDefault(recipeBookCategoriesx, ImmutableList.of())).stream()).collect(ImmutableList.toImmutableList()));
+         List var10000 = (List)map2.put(recipeBookCategories, list.stream().flatMap((recipeBookCategoriesx) -> (map2.getOrDefault(recipeBookCategoriesx, ImmutableList.of())).stream()).collect(ImmutableList.toImmutableList())); // MagmaCube - decompile error
       });
       this.collectionsByTab = ImmutableMap.copyOf(map2);
       this.allCollections = builder.build();
diff --git a/src/main/java/net/minecraft/client/Minecraft.java b/src/main/java/net/minecraft/client/Minecraft.java
index 291e38e9ef88ca6dbf24b610e39be4840f130aa9..4ced50fdc9cec839caa9b044fedfabbc714ac6d2 100644
--- a/src/main/java/net/minecraft/client/Minecraft.java
+++ b/src/main/java/net/minecraft/client/Minecraft.java
@@ -2043,9 +2043,11 @@ public class Minecraft extends ReentrantBlockableEventLoop<Runnable> implements
       crashReportCategory.setDetail("GL Caps", RenderSystem::getCapsString);
       crashReportCategory.setDetail("Using VBOs", (CrashReportDetail<String>)(() -> "Yes"));
       crashReportCategory.setDetail("Is Modded", (CrashReportDetail<String>)(() -> {
-         String s = ClientBrandRetriever.getClientModName();
-         if (!"vanilla".equals(s)) {
-            return "Definitely; Client brand changed to '" + s + "'";
+         // MagmaCube start - decompile error
+         String clientModName = ClientBrandRetriever.getClientModName();
+         if (!"vanilla".equals(clientModName)) {
+            return "Definitely; Client brand changed to '" + clientModName + "'";
+            // MagmaCube end - decompile error
          } else {
             return Minecraft.class.getSigners() == null ? "Very likely; Jar signature invalidated" : "Probably not. Jar signature remains and client brand is untouched.";
          }
@@ -2063,13 +2065,15 @@ public class Minecraft extends ReentrantBlockableEventLoop<Runnable> implements
          crashReportCategory.setDetail("Resource Packs", (CrashReportDetail<String>)(() -> {
             StringBuilder stringBuilder = new StringBuilder();
 
-            for(String s : options.resourcePacks) {
+            for(String res : options.resourcePacks) { // MagmaCube - decompile error
                if (stringBuilder.length() > 0) {
                   stringBuilder.append(", ");
                }
 
-               stringBuilder.append(s);
-               if (options.incompatibleResourcePacks.contains(s)) {
+               // MagmaCube start - decompile error
+               stringBuilder.append(res);
+               if (options.incompatibleResourcePacks.contains(res)) {
+                  // MagmaCube end - decompile error
                   stringBuilder.append(" (incompatible)");
                }
             }
@@ -2447,4 +2451,4 @@ public class Minecraft extends ReentrantBlockableEventLoop<Runnable> implements
          this.serverResources.close();
       }
    }
-}
\ No newline at end of file
+}
diff --git a/src/main/java/net/minecraft/client/Options.java b/src/main/java/net/minecraft/client/Options.java
index 4616a582e683a2ecec65fe63ad572e0be44228c9..98a84e7331ee650bf139fe3ba099e793f2ad73c3 100644
--- a/src/main/java/net/minecraft/client/Options.java
+++ b/src/main/java/net/minecraft/client/Options.java
@@ -201,7 +201,7 @@ public class Options {
                try {
                   Iterator<String> iterator = OPTION_SPLITTER.split(sx).iterator();
                   compoundTag.putString((String)iterator.next(), (String)iterator.next());
-               } catch (Exception var3) {
+               } catch (Exception sx2) { // MagmaCube - decompile error
                   LOGGER.warn("Skipping bad option: {}", sx);
                }
 
diff --git a/src/main/java/net/minecraft/client/gui/Gui.java b/src/main/java/net/minecraft/client/gui/Gui.java
index d870537466d42307860d1674929f0a5ec85d59a5..574b1975fe06ab6252a8d4b1a25ddfdbd75577e1 100644
--- a/src/main/java/net/minecraft/client/gui/Gui.java
+++ b/src/main/java/net/minecraft/client/gui/Gui.java
@@ -1116,7 +1116,7 @@ public class Gui extends GuiComponent {
    public void handleChat(ChatType chatType, Component component, UUID uuid) {
       if (!this.minecraft.isBlocked(uuid)) {
          if (!this.minecraft.options.hideMatchedNames || !this.minecraft.isBlocked(this.guessChatUUID(component))) {
-            for(ChatListener chatListener : (List)this.chatListeners.get(chatType)) {
+            for(ChatListener chatListener : this.chatListeners.get(chatType)) { // MagmaCube - decompile error
                chatListener.handle(chatType, component, uuid);
             }
 
diff --git a/src/main/java/net/minecraft/client/gui/font/FontManager.java b/src/main/java/net/minecraft/client/gui/font/FontManager.java
index 7fcb31508807ae75af558a70e682e0d4dd9b621a..f0e8076e323e441d937ab3b19df3cc84e08f8dcd 100644
--- a/src/main/java/net/minecraft/client/gui/font/FontManager.java
+++ b/src/main/java/net/minecraft/client/gui/font/FontManager.java
@@ -18,6 +18,7 @@ import java.io.Reader;
 import java.nio.charset.StandardCharsets;
 import java.util.List;
 import java.util.Map;
+import java.util.function.IntConsumer; // MagmaCube
 import net.minecraft.Util;
 import net.minecraft.client.gui.Font;
 import net.minecraft.client.gui.font.providers.GlyphProviderBuilderType;
@@ -138,7 +139,7 @@ public class FontManager implements AutoCloseable {
                intSet.addAll(glyphProvider2.getSupportedGlyphs());
             }
 
-            intSet.forEach((ix) -> {
+            intSet.forEach((IntConsumer) (ix) -> { // MagmaCube - decompile error
                if (ix != 32) {
                   for(GlyphProvider glyphProvider : Lists.reverse(list)) {
                      if (glyphProvider.getGlyph(ix) != null) {
diff --git a/src/main/java/net/minecraft/client/gui/font/FontSet.java b/src/main/java/net/minecraft/client/gui/font/FontSet.java
index 8183d90d5733a150fe216e246ad97f6d08221c69..538de0a9e06413228f4c8b6a71452a52d1f42661 100644
--- a/src/main/java/net/minecraft/client/gui/font/FontSet.java
+++ b/src/main/java/net/minecraft/client/gui/font/FontSet.java
@@ -14,6 +14,7 @@ import it.unimi.dsi.fastutil.ints.IntSet;
 import java.util.List;
 import java.util.Random;
 import java.util.Set;
+import java.util.function.IntConsumer; // MagmaCube
 import net.minecraft.client.gui.font.glyphs.BakedGlyph;
 import net.minecraft.client.gui.font.glyphs.EmptyGlyph;
 import net.minecraft.client.gui.font.glyphs.MissingGlyph;
@@ -56,7 +57,7 @@ public class FontSet implements AutoCloseable {
       }
 
       Set<GlyphProvider> set = Sets.newHashSet();
-      intSet.forEach((i) -> {
+      intSet.forEach((IntConsumer) (i) -> { // MagmaCube - decompile error
          for(GlyphProvider glyphProvider : list) {
             GlyphInfo glyphInfo = (GlyphInfo)(i == 32 ? SPACE_INFO : glyphProvider.getGlyph(i));
             if (glyphInfo != null) {
diff --git a/src/main/java/net/minecraft/client/gui/screens/achievement/StatsScreen.java b/src/main/java/net/minecraft/client/gui/screens/achievement/StatsScreen.java
index 4ccd810d8d7b78b7e2bd9887d7a1ef0cc89e0788..0adf9347c69bfe4445c196810b97b7e17fd3ac88 100644
--- a/src/main/java/net/minecraft/client/gui/screens/achievement/StatsScreen.java
+++ b/src/main/java/net/minecraft/client/gui/screens/achievement/StatsScreen.java
@@ -371,11 +371,11 @@ public class StatsScreen extends Screen implements StatsUpdateListener {
                i = 0;
                i2 = 0;
             } else if (ItemStatisticsList.this.blockColumns.contains(ItemStatisticsList.this.sortColumn)) {
-               StatType<Block> statType = ItemStatisticsList.this.sortColumn;
+               StatType<Block> statType = (StatType<Block>) ItemStatisticsList.this.sortColumn; // MagmaCube - decompile error
                i = item instanceof BlockItem ? StatsScreen.this.stats.getValue(statType, ((BlockItem)item).getBlock()) : -1;
                i2 = item2 instanceof BlockItem ? StatsScreen.this.stats.getValue(statType, ((BlockItem)item2).getBlock()) : -1;
             } else {
-               StatType<Item> statType2 = ItemStatisticsList.this.sortColumn;
+               StatType<Item> statType2 = (StatType<Item>) ItemStatisticsList.this.sortColumn; // MagmaCube - decompile error
                i = StatsScreen.this.stats.getValue(statType2, item);
                i2 = StatsScreen.this.stats.getValue(statType2, item2);
             }
diff --git a/src/main/java/net/minecraft/client/gui/screens/inventory/JigsawBlockEditScreen.java b/src/main/java/net/minecraft/client/gui/screens/inventory/JigsawBlockEditScreen.java
index e413b4c87c8e63d8335178e6c6d5aa638c8b7227..095d9bdb53c30428171e121b048412b3b8f6ddfb 100644
--- a/src/main/java/net/minecraft/client/gui/screens/inventory/JigsawBlockEditScreen.java
+++ b/src/main/java/net/minecraft/client/gui/screens/inventory/JigsawBlockEditScreen.java
@@ -93,8 +93,10 @@ public class JigsawBlockEditScreen extends Screen {
       int i = this.font.width(JOINT_LABEL) + 10;
       this.jointButton = this.addButton(new Button(this.width / 2 - 152 + i, 150, 300 - i, 20, this.getJointText(), (button) -> {
          JigsawBlockEntity.JointType[] jointTypes = JigsawBlockEntity.JointType.values();
-         int i = (this.joint.ordinal() + 1) % jointTypes.length;
-         this.joint = jointTypes[i];
+         // MagmaCube start - decompile error
+         int il = (this.joint.ordinal() + 1) % jointTypes.length;
+         this.joint = jointTypes[il];
+         // MagmaCube end - decompile error
          button.setMessage(this.getJointText());
       }));
       boolean flag = JigsawBlock.getFrontFacing(this.jigsawEntity.getBlockState()).getAxis().isVertical();
diff --git a/src/main/java/net/minecraft/client/gui/screens/worldselection/CreateWorldScreen.java b/src/main/java/net/minecraft/client/gui/screens/worldselection/CreateWorldScreen.java
index fe112767172b105fbf5cfc888e5bbd174609d5d8..3d9c90d41767f863188563d9391061c851c5888c 100644
--- a/src/main/java/net/minecraft/client/gui/screens/worldselection/CreateWorldScreen.java
+++ b/src/main/java/net/minecraft/client/gui/screens/worldselection/CreateWorldScreen.java
@@ -444,8 +444,10 @@ public class CreateWorldScreen extends Screen {
                stream.sorted(Comparator.reverseOrder()).forEach((path) -> {
                   try {
                      Files.delete(path);
-                  } catch (IOException var2) {
-                     LOGGER.warn("Failed to remove temporary file {}", path, var2);
+                     // MagmaCube start - decompile error
+                  } catch (IOException ex) {
+                     LOGGER.warn("Failed to remove temporary file {}", path, ex);
+                     // MagmaCube end - decompile error
                   }
 
                });
diff --git a/src/main/java/net/minecraft/client/gui/screens/worldselection/EditGameRulesScreen.java b/src/main/java/net/minecraft/client/gui/screens/worldselection/EditGameRulesScreen.java
index d1cd51e827a71bc49c1c3c9de32d07146c37c0d6..8154fbdaeafe165a995ca27d065d5f5cad9b1088 100644
--- a/src/main/java/net/minecraft/client/gui/screens/worldselection/EditGameRulesScreen.java
+++ b/src/main/java/net/minecraft/client/gui/screens/worldselection/EditGameRulesScreen.java
@@ -223,7 +223,7 @@ public class EditGameRulesScreen extends Screen {
                List<FormattedCharSequence> list;
                String s3;
                if (I18n.exists(s2)) {
-                  Builder<FormattedCharSequence> builder = ImmutableList.builder().add(component2.getVisualOrderText());
+                  Builder<FormattedCharSequence> builder = (Builder) ImmutableList.builder().add(component2.getVisualOrderText()); // MagmaCube - decompile error
                   Component component4 = new TranslatableComponent(s2);
                   EditGameRulesScreen.this.font.split(component4, 150).forEach(builder::add);
                   list = builder.add(component3.getVisualOrderText()).build();
@@ -238,7 +238,7 @@ public class EditGameRulesScreen extends Screen {
          });
          map.entrySet().stream().sorted(java.util.Map.Entry.comparingByKey()).forEach((entry) -> {
             this.addEntry(EditGameRulesScreen.this.new CategoryRuleEntry((new TranslatableComponent(((GameRules.Category)entry.getKey()).getDescriptionId())).withStyle(new ChatFormatting[]{ChatFormatting.BOLD, ChatFormatting.YELLOW})));
-            ((Map)entry.getValue()).entrySet().stream().sorted(java.util.Map.Entry.comparingByKey(Comparator.comparing(GameRules.Key::getId))).forEach((entryx) -> this.addEntry((AbstractSelectionList.Entry)entryx.getValue()));
+            (entry.getValue()).entrySet().stream().sorted(java.util.Map.Entry.comparingByKey(Comparator.comparing(GameRules.Key::getId))).forEach((entryx) -> this.addEntry(entryx.getValue())); // MagmaCube - decompile error
          });
       }
 
diff --git a/src/main/java/net/minecraft/client/gui/screens/worldselection/WorldGenSettingsComponent.java b/src/main/java/net/minecraft/client/gui/screens/worldselection/WorldGenSettingsComponent.java
index 420642fdf08a6e277303901072c903d0bb51422a..dee8dee1ac31844e6d8ea4a7c97c6632391249c7 100644
--- a/src/main/java/net/minecraft/client/gui/screens/worldselection/WorldGenSettingsComponent.java
+++ b/src/main/java/net/minecraft/client/gui/screens/worldselection/WorldGenSettingsComponent.java
@@ -103,12 +103,14 @@ public class WorldGenSettingsComponent implements TickableWidget, Widget {
       this.typeButton = createWorldScreen.addButton(new Button(i2, 100, 150, 20, new TranslatableComponent("selectWorld.mapType"), (button) -> {
          while(true) {
             if (this.preset.isPresent()) {
-               int i = WorldPreset.PRESETS.indexOf(this.preset.get()) + 1;
-               if (i >= WorldPreset.PRESETS.size()) {
-                  i = 0;
+               // MagmaCube start - decompile error
+               int il = WorldPreset.PRESETS.indexOf(this.preset.get()) + 1;
+               if (il >= WorldPreset.PRESETS.size()) {
+                  il = 0;
+                  // MagmaCube end - decompile error
                }
 
-               WorldPreset worldPreset = (WorldPreset)WorldPreset.PRESETS.get(i);
+               WorldPreset worldPreset = (WorldPreset)WorldPreset.PRESETS.get(il); // MagmaCube - decompile error
                this.preset = Optional.of(worldPreset);
                this.settings = worldPreset.create(this.registryHolder, this.settings.seed(), this.settings.generateFeatures(), this.settings.generateBonusChest());
                if (this.settings.isDebug() && !Screen.hasShiftDown()) {
diff --git a/src/main/java/net/minecraft/client/main/Main.java b/src/main/java/net/minecraft/client/main/Main.java
index 4956fea4717b3bd88fa4fddb5bd232b7e301860e..70cdc7f9d116e43ad9b0769291401e6ed09314c7 100644
--- a/src/main/java/net/minecraft/client/main/Main.java
+++ b/src/main/java/net/minecraft/client/main/Main.java
@@ -1,29 +1,198 @@
 package net.minecraft.client.main;
 
 import java.io.File;
+import java.net.Authenticator;
 import java.net.InetSocketAddress;
+import java.net.PasswordAuthentication;
 import java.net.Proxy;
 import java.net.Proxy.Type;
 import java.util.List;
 import java.util.OptionalInt;
 import javax.annotation.Nullable;
+
+import com.google.gson.Gson;
+import com.google.gson.GsonBuilder;
+import com.mojang.authlib.properties.PropertyMap;
+import com.mojang.blaze3d.platform.DisplayData;
+import com.mojang.blaze3d.platform.Window;
+import com.mojang.blaze3d.systems.RenderSystem;
 import joptsimple.ArgumentAcceptingOptionSpec;
 import joptsimple.OptionParser;
 import joptsimple.OptionSet;
 import joptsimple.OptionSpec;
+import net.minecraft.CrashReport;
+import net.minecraft.ResourceLocationException;
 import net.minecraft.Util;
+import net.minecraft.client.Minecraft;
+import net.minecraft.client.User;
+import net.minecraft.server.Bootstrap;
+import net.minecraft.util.GsonHelper;
+import net.minecraft.world.entity.player.Player;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
 public class Main {
    private static final Logger LOGGER = LogManager.getLogger();
 
-   public static void main(String[] strings) {
-      // $FF: Couldn't be decompiled
+   // MagmaCube start - decompile error
+   public static void main(String[] args) {
+      if (net.minecraft.SharedConstants.IS_RUNNING_IN_IDE) org.lwjgl.glfw.GLFW.glfwInit(); // MagmaCube - lwjgl debug agent causes glGetError to crash when we didn't call glfwInit
+      OptionParser optionparser = new OptionParser();
+      optionparser.allowsUnrecognizedOptions();
+      optionparser.accepts("demo");
+      optionparser.accepts("disableMultiplayer");
+      optionparser.accepts("disableChat");
+      optionparser.accepts("fullscreen");
+      optionparser.accepts("checkGlErrors");
+      OptionSpec<String> optionspec = optionparser.accepts("server").withRequiredArg();
+      OptionSpec<Integer> optionspec1 = optionparser.accepts("port").withRequiredArg().ofType(Integer.class).defaultsTo(25565);
+      OptionSpec<File> optionspec2 = optionparser.accepts("gameDir").withRequiredArg().ofType(File.class).defaultsTo(new File("."));
+      OptionSpec<File> optionspec3 = optionparser.accepts("assetsDir").withRequiredArg().ofType(File.class);
+      OptionSpec<File> optionspec4 = optionparser.accepts("resourcePackDir").withRequiredArg().ofType(File.class);
+      OptionSpec<File> optionspec5 = optionparser.accepts("dataPackDir").withRequiredArg().ofType(File.class);
+      OptionSpec<String> optionspec6 = optionparser.accepts("proxyHost").withRequiredArg();
+      OptionSpec<Integer> optionspec7 = optionparser.accepts("proxyPort").withRequiredArg().defaultsTo("8080").ofType(Integer.class);
+      OptionSpec<String> optionspec8 = optionparser.accepts("proxyUser").withRequiredArg();
+      OptionSpec<String> optionspec9 = optionparser.accepts("proxyPass").withRequiredArg();
+      OptionSpec<String> optionspec10 = optionparser.accepts("username").withRequiredArg().defaultsTo("Player" + Util.getMillis() % 1000L);
+      OptionSpec<String> optionspec11 = optionparser.accepts("uuid").withRequiredArg();
+      OptionSpec<String> optionspec12 = optionparser.accepts("accessToken").withRequiredArg().required();
+      OptionSpec<String> optionspec13 = optionparser.accepts("version").withRequiredArg().required();
+      OptionSpec<Integer> optionspec14 = optionparser.accepts("width").withRequiredArg().ofType(Integer.class).defaultsTo(854);
+      OptionSpec<Integer> optionspec15 = optionparser.accepts("height").withRequiredArg().ofType(Integer.class).defaultsTo(480);
+      OptionSpec<Integer> optionspec16 = optionparser.accepts("fullscreenWidth").withRequiredArg().ofType(Integer.class);
+      OptionSpec<Integer> optionspec17 = optionparser.accepts("fullscreenHeight").withRequiredArg().ofType(Integer.class);
+      OptionSpec<String> optionspec18 = optionparser.accepts("userProperties").withRequiredArg().defaultsTo("{}");
+      OptionSpec<String> optionspec19 = optionparser.accepts("profileProperties").withRequiredArg().defaultsTo("{}");
+      OptionSpec<String> optionspec20 = optionparser.accepts("assetIndex").withRequiredArg();
+      OptionSpec<String> optionspec21 = optionparser.accepts("userType").withRequiredArg().defaultsTo("legacy");
+      OptionSpec<String> optionspec22 = optionparser.accepts("versionType").withRequiredArg().defaultsTo("release");
+      OptionSpec<String> optionspec23 = optionparser.nonOptions();
+      OptionSet optionset = optionparser.parse(args);
+      List<String> list = optionset.valuesOf(optionspec23);
+      if (!list.isEmpty()) {
+         System.out.println("Completely ignored arguments: " + list);
+      }
+
+      String s = parseArgument(optionset, optionspec6);
+      Proxy proxy = Proxy.NO_PROXY;
+      if (s != null) {
+         try {
+            proxy = new Proxy(Type.SOCKS, new InetSocketAddress(s, parseArgument(optionset, optionspec7)));
+         } catch (Exception exception) {
+         }
+      }
+
+      final String s1 = parseArgument(optionset, optionspec8);
+      final String s2 = parseArgument(optionset, optionspec9);
+      if (!proxy.equals(Proxy.NO_PROXY) && stringHasValue(s1) && stringHasValue(s2)) {
+         Authenticator.setDefault(new Authenticator() {
+            protected PasswordAuthentication getPasswordAuthentication() {
+               return new PasswordAuthentication(s1, s2.toCharArray());
+            }
+         });
+      }
+
+      int i = parseArgument(optionset, optionspec14);
+      int j = parseArgument(optionset, optionspec15);
+      OptionalInt optionalint = ofNullable(parseArgument(optionset, optionspec16));
+      OptionalInt optionalint1 = ofNullable(parseArgument(optionset, optionspec17));
+      boolean flag = optionset.has("fullscreen");
+      boolean flag1 = optionset.has("demo");
+      boolean flag2 = optionset.has("disableMultiplayer");
+      boolean flag3 = optionset.has("disableChat");
+      String s3 = parseArgument(optionset, optionspec13);
+      Gson gson = (new GsonBuilder()).registerTypeAdapter(PropertyMap.class, new PropertyMap.Serializer()).create();
+      PropertyMap propertymap = GsonHelper.fromJson(gson, parseArgument(optionset, optionspec18), PropertyMap.class);
+      PropertyMap propertymap1 = GsonHelper.fromJson(gson, parseArgument(optionset, optionspec19), PropertyMap.class);
+      String s4 = parseArgument(optionset, optionspec22);
+      File file1 = parseArgument(optionset, optionspec2);
+      File file2 = optionset.has(optionspec3) ? parseArgument(optionset, optionspec3) : new File(file1, "assets/");
+      File file3 = optionset.has(optionspec4) ? parseArgument(optionset, optionspec4) : new File(file1, "resourcepacks/");
+      String s5 = optionset.has(optionspec11) ? optionspec11.value(optionset) : Player.createPlayerUUID(optionspec10.value(optionset)).toString();
+      String s6 = optionset.has(optionspec20) ? optionspec20.value(optionset) : null;
+      String s7 = parseArgument(optionset, optionspec);
+      Integer integer = parseArgument(optionset, optionspec1);
+      CrashReport.preload();
+      Bootstrap.bootStrap();
+      Bootstrap.validate();
+      Util.startTimerHackThread();
+      User session = new User(optionspec10.value(optionset), s5, optionspec12.value(optionset), optionspec21.value(optionset));
+      GameConfig gameconfiguration = new GameConfig(new GameConfig.UserData(session, propertymap, propertymap1, proxy), new DisplayData(i, j, optionalint, optionalint1, flag), new GameConfig.FolderData(file1, file3, file2, s6), new GameConfig.GameData(flag1, s3, s4, flag2, flag3), new GameConfig.ServerData(s7, integer));
+      Thread thread = new Thread("Client Shutdown Thread") {
+         public void run() {
+            Minecraft minecraft1 = Minecraft.getInstance();
+            if (minecraft1 != null) {
+               net.minecraft.client.server.IntegratedServer integratedserver = minecraft1.getSingleplayerServer();
+               if (integratedserver != null) {
+                  integratedserver.halt(true);
+               }
+            }
+         }
+      };
+      thread.setUncaughtExceptionHandler(new net.minecraft.DefaultUncaughtExceptionHandler(LOGGER));
+      Runtime.getRuntime().addShutdownHook(thread);
+      final Minecraft minecraft;
+      try {
+         Thread.currentThread().setName("Render thread");
+         RenderSystem.initRenderThread();
+         RenderSystem.beginInitialization();
+         minecraft = new Minecraft(gameconfiguration);
+         RenderSystem.finishInitialization();
+      } catch (Window.WindowInitFailed windowInitFailed) {
+         LOGGER.warn("Failed to create window: ", windowInitFailed);
+         return;
+      } catch (Throwable throwable1) {
+         net.minecraft.CrashReport crashreport = net.minecraft.CrashReport.forThrowable(throwable1, "Initializing game");
+         crashreport.addCategory("Initialization");
+         Minecraft.fillReport(null, gameconfiguration.game.launchVersion, null, crashreport);
+         Minecraft.crash(crashreport);
+         return;
+      }
+
+      Thread thread1;
+      if (minecraft.renderOnThread()) {
+         thread1 = new Thread("Game thread") {
+            public void run() {
+               try {
+                  RenderSystem.initGameThread(true);
+                  minecraft.run();
+               } catch (Throwable throwable2) {
+                  Main.LOGGER.error("Exception in client thread", throwable2);
+               }
+
+            }
+         };
+         thread1.start();
+
+         while(minecraft.isRunning()) {
+         }
+      } else {
+         thread1 = null;
+
+         try {
+            RenderSystem.initGameThread(false);
+            minecraft.run();
+         } catch (Throwable throwable) {
+            LOGGER.error("Unhandled game exception", throwable);
+         }
+      }
+
+      try {
+         minecraft.stop();
+         if (thread1 != null) {
+            thread1.join();
+         }
+      } catch (InterruptedException interruptedexception) {
+         LOGGER.error("Exception during client thread shutdown", (Throwable)interruptedexception);
+      } finally {
+         minecraft.destroy();
+      }
    }
+   // MagmaCube end - decompile error
 
    private static OptionalInt ofNullable(@Nullable Integer integer) {
-      // $FF: Couldn't be decompiled
+      return integer != null ? OptionalInt.of(integer) : OptionalInt.empty(); // MagmaCube - decompile error
    }
 
    @Nullable
diff --git a/src/main/java/net/minecraft/client/multiplayer/ClientPacketListener.java b/src/main/java/net/minecraft/client/multiplayer/ClientPacketListener.java
index db8abcd271eaaf6c717cfdbe3459db9b517a3635..913a0304dbc6c48e07328728268985ca2c9070c2 100644
--- a/src/main/java/net/minecraft/client/multiplayer/ClientPacketListener.java
+++ b/src/main/java/net/minecraft/client/multiplayer/ClientPacketListener.java
@@ -1559,23 +1559,27 @@ public class ClientPacketListener implements ClientGamePacketListener {
             } else {
                this.minecraft.execute(() -> this.minecraft.setScreen(new ConfirmScreen((flag) -> {
                      this.minecraft = Minecraft.getInstance();
-                     ServerData serverData = this.minecraft.getCurrentServer();
+                     ServerData serverDatax = this.minecraft.getCurrentServer(); // MagmaCube - decompile error
                      if (flag) {
-                        if (serverData != null) {
-                           serverData.setResourcePackStatus(ServerData.ServerPackStatus.ENABLED);
+                        // MagmaCube start - decompile error
+                        if (serverDatax != null) {
+                           serverDatax.setResourcePackStatus(ServerData.ServerPackStatus.ENABLED);
+                           // MagmaCube end - decompile error
                         }
 
                         this.send(ServerboundResourcePackPacket.Action.ACCEPTED);
                         this.downloadCallback(this.minecraft.getClientPackSource().downloadAndSelectResourcePack(s, s2));
                      } else {
-                        if (serverData != null) {
-                           serverData.setResourcePackStatus(ServerData.ServerPackStatus.DISABLED);
+                        // MagmaCube start - decompile error
+                        if (serverDatax != null) {
+                           serverDatax.setResourcePackStatus(ServerData.ServerPackStatus.DISABLED);
+                           // MagmaCube end - decompile error
                         }
 
                         this.send(ServerboundResourcePackPacket.Action.DECLINED);
                      }
 
-                     ServerList.saveSingleServer(serverData);
+                     ServerList.saveSingleServer(serverDatax); // MagmaCube - decompile error
                      this.minecraft.setScreen((Screen)null);
                   }, new TranslatableComponent("multiplayer.texturePrompt.line1"), new TranslatableComponent("multiplayer.texturePrompt.line2"))));
             }
diff --git a/src/main/java/net/minecraft/client/multiplayer/ServerStatusPinger.java b/src/main/java/net/minecraft/client/multiplayer/ServerStatusPinger.java
index 21eb0d00c773306d6f5cfc7aeadd50e755e9d44a..be7aeb31fa0ea4fb4d0020107cfb306279fe6579 100644
--- a/src/main/java/net/minecraft/client/multiplayer/ServerStatusPinger.java
+++ b/src/main/java/net/minecraft/client/multiplayer/ServerStatusPinger.java
@@ -197,7 +197,7 @@ public class ServerStatusPinger {
                   if (s == 255) {
                      String s2 = new String(byteBuf.readBytes(byteBuf.readShort() * 2).array(), StandardCharsets.UTF_16BE);
                      String[] strings = (String[])Iterables.toArray(ServerStatusPinger.SPLITTER.split(s2), String.class);
-                     if ("ﾂｧ1".equals(strings[0])) {
+                     if ("\u00a71".equals(strings[0])) {
                         int i = Mth.getInt(strings[1], 0);
                         String s3 = strings[2];
                         String s4 = strings[3];
diff --git a/src/main/java/net/minecraft/client/renderer/EffectInstance.java b/src/main/java/net/minecraft/client/renderer/EffectInstance.java
index 9df21b0a3024898a64c359c2ce52ed3c1007f315..842da4d2b78cc2cc58a84ad6f68bba1f9eaa9d05 100644
--- a/src/main/java/net/minecraft/client/renderer/EffectInstance.java
+++ b/src/main/java/net/minecraft/client/renderer/EffectInstance.java
@@ -237,7 +237,7 @@ public class EffectInstance implements Effect, AutoCloseable {
 
       for(int i = 0; i < this.samplerLocations.size(); ++i) {
          if (this.samplerMap.get(this.samplerNames.get(i)) != null) {
-            GlStateManager._activeTexture('闢�' + i);
+            GlStateManager._activeTexture('\u84c0' + i); // MagmaCube - decompile error
             GlStateManager._disableTexture();
             GlStateManager._bindTexture(0);
          }
@@ -259,7 +259,7 @@ public class EffectInstance implements Effect, AutoCloseable {
          String s = (String)this.samplerNames.get(i);
          IntSupplier intSupplier = (IntSupplier)this.samplerMap.get(s);
          if (intSupplier != null) {
-            RenderSystem.activeTexture('闢�' + i);
+            RenderSystem.activeTexture('\u84c0' + i); // MagmaCube - decompile error
             RenderSystem.enableTexture();
             int i2 = intSupplier.getAsInt();
             if (i2 != -1) {
diff --git a/src/main/java/net/minecraft/client/renderer/block/model/multipart/KeyValueCondition.java b/src/main/java/net/minecraft/client/renderer/block/model/multipart/KeyValueCondition.java
index cddd8ab3b2c8291a305670e7e23a8a72682ee1f0..01235bacd5601e9dbac3c3bba0f2abe9de1916aa 100644
--- a/src/main/java/net/minecraft/client/renderer/block/model/multipart/KeyValueCondition.java
+++ b/src/main/java/net/minecraft/client/renderer/block/model/multipart/KeyValueCondition.java
@@ -41,7 +41,7 @@ public class KeyValueCondition implements Condition {
                predicate = this.getBlockStatePredicate(stateDefinition, property, s);
             } else {
                List<Predicate<BlockState>> list2 = (List)list.stream().map((sx) -> this.getBlockStatePredicate(stateDefinition, property, sx)).collect(Collectors.toList());
-               predicate = (blockState) -> list2.stream().anyMatch((predicate) -> predicate.test(blockState));
+               predicate = (blockState) -> list2.stream().anyMatch((predicatex) -> predicatex.test(blockState)); // MagmaCube - decompile error
             }
 
             return flag ? predicate.negate() : predicate;
diff --git a/src/main/java/net/minecraft/client/renderer/debug/ChunkDebugRenderer.java b/src/main/java/net/minecraft/client/renderer/debug/ChunkDebugRenderer.java
index 10f883e1858ce972663eed3c35b178064946776e..d99bc905ad31809fd64046d9d71d76445665e7ac 100644
--- a/src/main/java/net/minecraft/client/renderer/debug/ChunkDebugRenderer.java
+++ b/src/main/java/net/minecraft/client/renderer/debug/ChunkDebugRenderer.java
@@ -111,17 +111,17 @@ public class ChunkDebugRenderer implements DebugRenderer.SimpleDebugRenderer {
             if (serverLevel == null) {
                return ImmutableMap.of();
             } else {
-               Builder<ChunkPos, String> builder = ImmutableMap.builder();
+               Builder<ChunkPos, String> builders = ImmutableMap.builder(); // MagmaCube - decompile error
                ServerChunkCache serverChunkCache = serverLevel.getChunkSource();
 
                for(int i3 = i - 12; i3 <= i + 12; ++i3) {
                   for(int i4 = i2 - 12; i4 <= i2 + 12; ++i4) {
                      ChunkPos chunkPos = new ChunkPos(i3, i4);
-                     builder.put(chunkPos, "Server: " + serverChunkCache.getChunkDebugData(chunkPos));
+                     builders.put(chunkPos, "Server: " + serverChunkCache.getChunkDebugData(chunkPos)); // MagmaCube - decompile error
                   }
                }
 
-               return builder.build();
+               return builders.build(); // MagmaCube - decompile error
             }
          });
       }
diff --git a/src/main/java/net/minecraft/client/renderer/debug/CollisionBoxRenderer.java b/src/main/java/net/minecraft/client/renderer/debug/CollisionBoxRenderer.java
index ce30fe6568d3c5a1e9a388b24ce1fecd22e8178c..f61a483f5fbd5e9046bddffe571b854d4ec757d9 100644
--- a/src/main/java/net/minecraft/client/renderer/debug/CollisionBoxRenderer.java
+++ b/src/main/java/net/minecraft/client/renderer/debug/CollisionBoxRenderer.java
@@ -27,7 +27,7 @@ public class CollisionBoxRenderer implements DebugRenderer.SimpleDebugRenderer {
       if (d4 - this.lastUpdateTime > 1.0E8D) {
          this.lastUpdateTime = d4;
          Entity entity = this.minecraft.gameRenderer.getMainCamera().getEntity();
-         this.shapes = (List)entity.level.getCollisions(entity, entity.getBoundingBox().inflate(6.0D), (entity) -> true).collect(Collectors.toList());
+         this.shapes = (List)entity.level.getCollisions(entity, entity.getBoundingBox().inflate(6.0D), (entityx) -> true).collect(Collectors.toList()); // MagmaCube - decompile error
       }
 
       VertexConsumer vertexConsumer = multiBufferSource.getBuffer(RenderType.lines());
diff --git a/src/main/java/net/minecraft/client/renderer/debug/GoalSelectorDebugRenderer.java b/src/main/java/net/minecraft/client/renderer/debug/GoalSelectorDebugRenderer.java
index 5d23227a62ed902006e173671407b52a1010386d..54853a8b9903870eac74f432924a9f11b797ab2f 100644
--- a/src/main/java/net/minecraft/client/renderer/debug/GoalSelectorDebugRenderer.java
+++ b/src/main/java/net/minecraft/client/renderer/debug/GoalSelectorDebugRenderer.java
@@ -37,11 +37,13 @@ public class GoalSelectorDebugRenderer implements DebugRenderer.SimpleDebugRende
          for(int i = 0; i < list.size(); ++i) {
             GoalSelectorDebugRenderer.DebugGoal debugGoal = (GoalSelectorDebugRenderer.DebugGoal)list.get(i);
             if (blockPos.closerThan(debugGoal.pos, 160.0D)) {
-               double d = (double)debugGoal.pos.getX() + 0.5D;
-               double d2 = (double)debugGoal.pos.getY() + 2.0D + (double)i * 0.25D;
-               double d3 = (double)debugGoal.pos.getZ() + 0.5D;
+               // MagmaCube start - decompile error
+               double dx = (double)debugGoal.pos.getX() + 0.5D;
+               double d2x = (double)debugGoal.pos.getY() + 2.0D + (double)i * 0.25D;
+               double d3x = (double)debugGoal.pos.getZ() + 0.5D;
+               // MagmaCube end - decompile error
                int i2 = debugGoal.isRunning ? -16711936 : -3355444;
-               DebugRenderer.renderFloatingText(debugGoal.name, d, d2, d3, i2);
+               DebugRenderer.renderFloatingText(debugGoal.name, dx, d2x, d3x, i2); // MagmaCube - decompile error
             }
          }
 
diff --git a/src/main/java/net/minecraft/client/renderer/debug/StructureRenderer.java b/src/main/java/net/minecraft/client/renderer/debug/StructureRenderer.java
index 4d2c78539046ad4fe67a7bf04aa7afb1759f5bb3..c8ca61312283dd715f74ce1d09f55d12ef1fd7d6 100644
--- a/src/main/java/net/minecraft/client/renderer/debug/StructureRenderer.java
+++ b/src/main/java/net/minecraft/client/renderer/debug/StructureRenderer.java
@@ -33,7 +33,7 @@ public class StructureRenderer implements DebugRenderer.SimpleDebugRenderer {
       BlockPos blockPos = new BlockPos(camera.getPosition().x, 0.0D, camera.getPosition().z);
       VertexConsumer vertexConsumer = multiBufferSource.getBuffer(RenderType.lines());
       if (this.postMainBoxes.containsKey(dimensionType)) {
-         for(BoundingBox boundingBox : ((Map)this.postMainBoxes.get(dimensionType)).values()) {
+         for(BoundingBox boundingBox : (this.postMainBoxes.get(dimensionType)).values()) { // MagmaCube - decompile error
             if (blockPos.closerThan(boundingBox.getCenter(), 500.0D)) {
                LevelRenderer.renderLineBox(poseStack, vertexConsumer, (double)boundingBox.x0 - d, (double)boundingBox.y0 - d2, (double)boundingBox.z0 - d3, (double)(boundingBox.x1 + 1) - d, (double)(boundingBox.y1 + 1) - d2, (double)(boundingBox.z1 + 1) - d3, 1.0F, 1.0F, 1.0F, 1.0F, 1.0F, 1.0F, 1.0F);
             }
@@ -41,7 +41,7 @@ public class StructureRenderer implements DebugRenderer.SimpleDebugRenderer {
       }
 
       if (this.postPiecesBoxes.containsKey(dimensionType)) {
-         for(Entry<String, BoundingBox> entry : ((Map)this.postPiecesBoxes.get(dimensionType)).entrySet()) {
+         for(Entry<String, BoundingBox> entry : (this.postPiecesBoxes.get(dimensionType)).entrySet()) { // MagmaCube - decompile error
             String s = (String)entry.getKey();
             BoundingBox boundingBox2 = (BoundingBox)entry.getValue();
             Boolean flag = (Boolean)((Map)this.startPiecesMap.get(dimensionType)).get(s);
diff --git a/src/main/java/net/minecraft/client/renderer/entity/EntityRenderDispatcher.java b/src/main/java/net/minecraft/client/renderer/entity/EntityRenderDispatcher.java
index 5da2e804f657da16c43b49763febaf22cb788257..c204848d6c00ed5390f4cab548a38037df2aaf1d 100644
--- a/src/main/java/net/minecraft/client/renderer/entity/EntityRenderDispatcher.java
+++ b/src/main/java/net/minecraft/client/renderer/entity/EntityRenderDispatcher.java
@@ -199,7 +199,7 @@ public class EntityRenderDispatcher {
       if (entity instanceof AbstractClientPlayer) {
          String s = ((AbstractClientPlayer)entity).getModelName();
          PlayerRenderer playerRenderer = (PlayerRenderer)this.playerRenderers.get(s);
-         return playerRenderer != null ? playerRenderer : this.defaultPlayerRenderer;
+         return (EntityRenderer<? super T>) (playerRenderer != null ? playerRenderer : this.defaultPlayerRenderer); // MagmaCube - decompile error
       } else {
          return (EntityRenderer)this.renderers.get(entity.getType());
       }
diff --git a/src/main/java/net/minecraft/client/renderer/texture/HttpTexture.java b/src/main/java/net/minecraft/client/renderer/texture/HttpTexture.java
index 4ffd253e605bbe6d29efa88c3ddc70ccd35f6e58..a44f2a9509f7a37106d4ae2ed06e2854de2883c0 100644
--- a/src/main/java/net/minecraft/client/renderer/texture/HttpTexture.java
+++ b/src/main/java/net/minecraft/client/renderer/texture/HttpTexture.java
@@ -105,10 +105,12 @@ public class HttpTexture extends SimpleTexture {
                      }
 
                      Minecraft.getInstance().execute(() -> {
-                        NativeImage nativeImage = this.load(inputStream);
-                        if (nativeImage != null) {
-                           this.loadCallback(nativeImage);
+                        // MagmaCube start - decompile error
+                        NativeImage nativeImage1 = this.load(inputStream);
+                        if (nativeImage1 != null) {
+                           this.loadCallback(nativeImage1);
                         }
+                        // MagmaCube end - decompile error
 
                      });
                      return;
diff --git a/src/main/java/net/minecraft/client/renderer/texture/Stitcher.java b/src/main/java/net/minecraft/client/renderer/texture/Stitcher.java
index cda4b1b757ac07e5dae9f9e279f15d3f9e708583..fee241c7a36ccc56e5fd1123ef228e4e02cc82f8 100644
--- a/src/main/java/net/minecraft/client/renderer/texture/Stitcher.java
+++ b/src/main/java/net/minecraft/client/renderer/texture/Stitcher.java
@@ -11,7 +11,8 @@ import java.util.function.Consumer;
 import net.minecraft.util.Mth;
 
 public class Stitcher {
-   private static final Comparator<Stitcher.Holder> HOLDER_COMPARATOR = Comparator.comparing((holder) -> -holder.height).thenComparing((holder) -> -holder.width).thenComparing((holder) -> holder.spriteInfo.name());
+   // MagmaCube - decompile error
+   private static final Comparator<Stitcher.Holder> HOLDER_COMPARATOR = Comparator.<Holder, Integer>comparing((holder) -> -holder.height).thenComparing((holder) -> -holder.width).thenComparing((holder) -> holder.spriteInfo.name());
    private final int mipLevel;
    private final Set<Stitcher.Holder> texturesToBeStitched = Sets.newHashSetWithExpectedSize(256);
    private final List<Stitcher.Region> storage = Lists.newArrayListWithCapacity(256);
diff --git a/src/main/java/net/minecraft/client/resources/model/ModelBakery.java b/src/main/java/net/minecraft/client/resources/model/ModelBakery.java
index 1ef9c320c153b985c40b7af7b6b96ce0e692bfe3..17a00a5b3e2d4b02eaef216fd14b8a7f8fd0d9ec 100644
--- a/src/main/java/net/minecraft/client/resources/model/ModelBakery.java
+++ b/src/main/java/net/minecraft/client/resources/model/ModelBakery.java
@@ -174,7 +174,7 @@ public class ModelBakery {
 
       for(Entry<ResourceLocation, List<Material>> entry : map.entrySet()) {
          TextureAtlas textureAtlas = new TextureAtlas((ResourceLocation)entry.getKey());
-         TextureAtlas.Preparations preparations = textureAtlas.prepareToStitch(this.resourceManager, ((List)entry.getValue()).stream().map(Material::texture), profilerFiller, i);
+         TextureAtlas.Preparations preparations = textureAtlas.prepareToStitch(this.resourceManager, (entry.getValue()).stream().map(Material::texture), profilerFiller, i); // MagmaCube - decompile error
          this.atlasPreparations.put(entry.getKey(), Pair.of(textureAtlas, preparations));
       }
 
@@ -368,10 +368,10 @@ public class ModelBakery {
                   blockModelDefinition.getVariants().forEach((s, multiVariant) -> {
                      try {
                         immutableList.stream().filter(predicate(stateDefinition, s)).forEach((blockState) -> {
-                           Pair<UnbakedModel, Supplier<ModelBakery.ModelGroupKey>> pair2 = (Pair)map4.put(blockState, Pair.of(multiVariant, (Supplier)() -> ModelBakery.ModelGroupKey.create(blockState, multiVariant, list)));
-                           if (pair2 != null && pair2.getFirst() != multiPart) {
+                           Pair<UnbakedModel, Supplier<ModelBakery.ModelGroupKey>> pair21 = map4.put(blockState, Pair.of(multiVariant, () -> ModelBakery.ModelGroupKey.create(blockState, multiVariant, list))); // MagmaCube - decompile error
+                           if (pair21 != null && pair21.getFirst() != multiPart) { // MagmaCube - decompile error
                               map4.put(blockState, pair);
-                              throw new RuntimeException("Overlapping definition with: " + (String)((Entry)blockModelDefinition.getVariants().entrySet().stream().filter((entry) -> entry.getValue() == pair2.getFirst()).findFirst().get()).getKey());
+                              throw new RuntimeException("Overlapping definition with: " + (String)((Entry)blockModelDefinition.getVariants().entrySet().stream().filter((entry) -> entry.getValue() == pair21.getFirst()).findFirst().get()).getKey()); // MagmaCube - decompile error
                            }
                         });
                      } catch (Exception var12) {
@@ -387,7 +387,7 @@ public class ModelBakery {
             } catch (Exception var27) {
                throw new ModelBakery.BlockStateDefinitionException(String.format("Exception loading blockstate definition: '%s': %s", resourceLocation4, var27));
             } finally {
-               HashMap map6 = Maps.newHashMap();
+               HashMap<ModelGroupKey, Set<BlockState>> map6 = Maps.newHashMap(); // MagmaCube - type
                map.forEach((modelResourceLocationx, blockState) -> {
                   Pair<UnbakedModel, Supplier<ModelBakery.ModelGroupKey>> pair2 = (Pair)map2.get(blockState);
                   if (pair2 == null) {
@@ -398,8 +398,10 @@ public class ModelBakery {
                   this.cacheAndQueueDependencies(modelResourceLocationx, (UnbakedModel)pair2.getFirst());
 
                   try {
-                     ModelBakery.ModelGroupKey modelGroupKey = (ModelBakery.ModelGroupKey)((Supplier)pair2.getSecond()).get();
-                     ((Set)map6.computeIfAbsent(modelGroupKey, (modelGroupKey) -> Sets.newIdentityHashSet())).add(blockState);
+                     // MagmaCube start - decompile error
+                     ModelBakery.ModelGroupKey modelGroupKeyy = (ModelBakery.ModelGroupKey)(pair2.getSecond()).get();
+                     ((Set)map6.computeIfAbsent(modelGroupKeyy, (modelGroupKey1) -> Sets.newIdentityHashSet())).add(blockState);
+                     // MagmaCube end - decompile error
                   } catch (Exception var9) {
                      LOGGER.warn("Exception evaluating model definition: '{}'", modelResourceLocationx, var9);
                   }
diff --git a/src/main/java/net/minecraft/client/searchtree/ReloadableIdSearchTree.java b/src/main/java/net/minecraft/client/searchtree/ReloadableIdSearchTree.java
index ec6368c99be9c1ad21c358d6312357c7139892ae..e2054749f26b3ff02623b2e28d57b20c3167f17e 100644
--- a/src/main/java/net/minecraft/client/searchtree/ReloadableIdSearchTree.java
+++ b/src/main/java/net/minecraft/client/searchtree/ReloadableIdSearchTree.java
@@ -49,7 +49,7 @@ public class ReloadableIdSearchTree<T> implements MutableSearchTree<T> {
    }
 
    protected void index(T object) {
-      ((Stream)this.idGetter.apply(object)).forEach((resourceLocation) -> {
+      (this.idGetter.apply(object)).forEach((resourceLocation) -> { // MagmaCube - decompile error
          this.namespaceTree.add(object, resourceLocation.getNamespace().toLowerCase(Locale.ROOT));
          this.pathTree.add(object, resourceLocation.getPath().toLowerCase(Locale.ROOT));
       });
@@ -67,7 +67,7 @@ public class ReloadableIdSearchTree<T> implements MutableSearchTree<T> {
          List<T> list = this.namespaceTree.search(s.substring(0, i).trim());
          String s2 = s.substring(i + 1).trim();
          List<T> list2 = this.pathTree.search(s2);
-         return Lists.newArrayList(new ReloadableIdSearchTree.IntersectionIterator(list.iterator(), list2.iterator(), this::comparePosition));
+         return Lists.newArrayList(new ReloadableIdSearchTree.IntersectionIterator<>(list.iterator(), list2.iterator(), this::comparePosition)); // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/client/searchtree/ReloadableSearchTree.java b/src/main/java/net/minecraft/client/searchtree/ReloadableSearchTree.java
index 0d1356736e15f2c7699f3b677a09c3f3e85feab6..808477bff4d19524a3c7277fe1a4d0b483d1ab9c 100644
--- a/src/main/java/net/minecraft/client/searchtree/ReloadableSearchTree.java
+++ b/src/main/java/net/minecraft/client/searchtree/ReloadableSearchTree.java
@@ -29,7 +29,7 @@ public class ReloadableSearchTree<T> extends ReloadableIdSearchTree<T> {
 
    protected void index(T object) {
       super.index(object);
-      ((Stream)this.filler.apply(object)).forEach((s) -> this.tree.add(object, s.toLowerCase(Locale.ROOT)));
+      (this.filler.apply(object)).forEach((s) -> this.tree.add(object, s.toLowerCase(Locale.ROOT))); // MagmaCube - decompile error
    }
 
    public List<T> search(String s) {
@@ -41,7 +41,7 @@ public class ReloadableSearchTree<T> extends ReloadableIdSearchTree<T> {
          String s2 = s.substring(i + 1).trim();
          List<T> list2 = this.pathTree.search(s2);
          List<T> list3 = this.tree.search(s2);
-         return Lists.newArrayList(new ReloadableIdSearchTree.IntersectionIterator(list.iterator(), new ReloadableSearchTree.MergingUniqueIterator<T>(list2.iterator(), list3.iterator(), this::comparePosition), this::comparePosition));
+         return Lists.newArrayList(new ReloadableIdSearchTree.IntersectionIterator<>(list.iterator(), new ReloadableSearchTree.MergingUniqueIterator<T>(list2.iterator(), list3.iterator(), this::comparePosition), this::comparePosition)); // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/client/sounds/SoundEngine.java b/src/main/java/net/minecraft/client/sounds/SoundEngine.java
index 2cd0cdd1969b24e96ede84f536821b4a03fae39f..d1fe9e2086235487202fb8598137de17d1f3b05b 100644
--- a/src/main/java/net/minecraft/client/sounds/SoundEngine.java
+++ b/src/main/java/net/minecraft/client/sounds/SoundEngine.java
@@ -102,12 +102,12 @@ public class SoundEngine {
             this.listener.setGain(f);
          } else {
             this.instanceToChannel.forEach((soundInstance, channelHandle) -> {
-               float f = this.calculateVolume(soundInstance);
+               float f1 = this.calculateVolume(soundInstance); // MagmaCube - decompile error
                channelHandle.execute((channel) -> {
-                  if (f <= 0.0F) {
+                  if (f1 <= 0.0F) { // MagmaCube - decompile error
                      channel.stop();
                   } else {
-                     channel.setVolume(f);
+                     channel.setVolume(f1); // MagmaCube - decompile error
                   }
 
                });
diff --git a/src/main/java/net/minecraft/commands/Commands.java b/src/main/java/net/minecraft/commands/Commands.java
index 74da28fafeaad46fbb06b81f02a5369908746e92..e3abd92466e682b3393e100426fe47746edb1925 100644
--- a/src/main/java/net/minecraft/commands/Commands.java
+++ b/src/main/java/net/minecraft/commands/Commands.java
@@ -260,7 +260,7 @@ public class Commands {
    private void fillUsableCommands(CommandNode<CommandSourceStack> commandNode, CommandNode<SharedSuggestionProvider> commandNode2, CommandSourceStack commandSourceStack, Map<CommandNode<CommandSourceStack>, CommandNode<SharedSuggestionProvider>> map) {
       for(CommandNode<CommandSourceStack> commandNode3 : commandNode.getChildren()) {
          if (commandNode3.canUse(commandSourceStack)) {
-            ArgumentBuilder<SharedSuggestionProvider, ?> argumentBuilder = commandNode3.createBuilder();
+            ArgumentBuilder<SharedSuggestionProvider, ?> argumentBuilder = (ArgumentBuilder) commandNode3.createBuilder(); // MagmaCube - type
             argumentBuilder.requires((sharedSuggestionProvider) -> true);
             if (argumentBuilder.getCommand() != null) {
                argumentBuilder.executes((commandContext) -> 0);
@@ -277,7 +277,7 @@ public class Commands {
                argumentBuilder.redirect((CommandNode)map.get(argumentBuilder.getRedirect()));
             }
 
-            CommandNode<SharedSuggestionProvider> commandNode4 = argumentBuilder.build();
+            CommandNode<SharedSuggestionProvider> commandNode4 = (CommandNode) argumentBuilder.build(); // MagmaCube - decompile error
             map.put(commandNode3, commandNode4);
             commandNode2.addChild(commandNode4);
             if (!commandNode3.getChildren().isEmpty()) {
diff --git a/src/main/java/net/minecraft/commands/arguments/ObjectiveArgument.java b/src/main/java/net/minecraft/commands/arguments/ObjectiveArgument.java
index f3f244455c8488c53a754d73fa9aa635a9ec1881..d073663555ecd18c391dd36b77d54130559bc7cf 100644
--- a/src/main/java/net/minecraft/commands/arguments/ObjectiveArgument.java
+++ b/src/main/java/net/minecraft/commands/arguments/ObjectiveArgument.java
@@ -60,7 +60,7 @@ public class ObjectiveArgument implements ArgumentType<String> {
          return SharedSuggestionProvider.suggest(((CommandSourceStack)commandContext.getSource()).getServer().getScoreboard().getObjectiveNames(), suggestionsBuilder);
       } else if (commandContext.getSource() instanceof SharedSuggestionProvider) {
          SharedSuggestionProvider sharedSuggestionProvider = (SharedSuggestionProvider)commandContext.getSource();
-         return sharedSuggestionProvider.customSuggestion(commandContext, suggestionsBuilder);
+         return sharedSuggestionProvider.customSuggestion((CommandContext<SharedSuggestionProvider>) commandContext, suggestionsBuilder); // MagmaCube - decompile error
       } else {
          return Suggestions.empty();
       }
diff --git a/src/main/java/net/minecraft/commands/arguments/OperationArgument.java b/src/main/java/net/minecraft/commands/arguments/OperationArgument.java
index 02ea3f96b4a06d50705076b8d22196c61eb58e99..3a3022c24a448f13f5271ae42a124080773e138d 100644
--- a/src/main/java/net/minecraft/commands/arguments/OperationArgument.java
+++ b/src/main/java/net/minecraft/commands/arguments/OperationArgument.java
@@ -52,7 +52,7 @@ public class OperationArgument implements ArgumentType<OperationArgument.Operati
    }
 
    private static OperationArgument.Operation getOperation(String s) throws CommandSyntaxException {
-      return (OperationArgument.Operation)(s.equals("><") ? (score, score2) -> {
+      return (s.equals("><") ? (score, score2) -> { // MagmaCube - decompile error
          int i = score.getScore();
          score.setScore(score2.getScore());
          score2.setScore(i);
diff --git a/src/main/java/net/minecraft/commands/arguments/blocks/BlockStateParser.java b/src/main/java/net/minecraft/commands/arguments/blocks/BlockStateParser.java
index 4ad7683ebf83109c00e8ad07da5d2743ef94600d..03ad4feb060761e420f932b2baeff6fd1e034e28 100644
--- a/src/main/java/net/minecraft/commands/arguments/blocks/BlockStateParser.java
+++ b/src/main/java/net/minecraft/commands/arguments/blocks/BlockStateParser.java
@@ -196,7 +196,16 @@ public class BlockStateParser {
    }
 
    private static <T extends Comparable<T>> SuggestionsBuilder addSuggestions(SuggestionsBuilder suggestionsBuilder, Property<T> property) {
-      // $FF: Couldn't be decompiled
+      // MagmaCube start - decompile error
+      for (T t : property.getPossibleValues()) {
+         if (t instanceof Integer) {
+            suggestionsBuilder.suggest((Integer) t);
+         } else {
+            suggestionsBuilder.suggest(property.getName(t));
+         }
+      }
+      return suggestionsBuilder;
+      // MagmaCube end - decompile error
    }
 
    private CompletableFuture<Suggestions> suggestVaguePropertyValue(SuggestionsBuilder suggestionsBuilder, TagCollection<Block> tagCollection, String s) {
@@ -430,7 +439,7 @@ public class BlockStateParser {
    private <T extends Comparable<T>> void setValue(Property<T> property, String s, int i) throws CommandSyntaxException {
       Optional<T> optional = property.getValue(s);
       if (optional.isPresent()) {
-         this.state = this.state.setValue(property, (Comparable)optional.get());
+         this.state = this.state.setValue(property, optional.get()); // MagmaCube - decompile error
          this.properties.put(property, optional.get());
       } else {
          this.reader.setCursor(i);
diff --git a/src/main/java/net/minecraft/commands/arguments/selector/options/EntitySelectorOptions.java b/src/main/java/net/minecraft/commands/arguments/selector/options/EntitySelectorOptions.java
index 2025376e74205345a248cbc86a605895455c2139..659d47c3d92936533a8221e04d41d01a0c61daa4 100644
--- a/src/main/java/net/minecraft/commands/arguments/selector/options/EntitySelectorOptions.java
+++ b/src/main/java/net/minecraft/commands/arguments/selector/options/EntitySelectorOptions.java
@@ -387,7 +387,7 @@ public class EntitySelectorOptions {
                      stringReader.expect('=');
                      stringReader.skipWhitespace();
                      boolean flag = stringReader.readBoolean();
-                     map2.put(s, (Predicate)(criterionProgress) -> criterionProgress.isDone() == flag);
+                     map2.put(s, (criterionProgress) -> criterionProgress.isDone() == flag); // MagmaCube - decompile error
                      stringReader.skipWhitespace();
                      if (stringReader.canRead() && stringReader.peek() == ',') {
                         stringReader.skip();
@@ -397,7 +397,7 @@ public class EntitySelectorOptions {
                   stringReader.skipWhitespace();
                   stringReader.expect('}');
                   stringReader.skipWhitespace();
-                  map.put(resourceLocation, (Predicate)(advancementProgress) -> {
+                  map.put(resourceLocation, (advancementProgress) -> { // MagmaCube - decompile error
                      for(Entry<String, Predicate<CriterionProgress>> entry : map2.entrySet()) {
                         CriterionProgress criterionProgress = advancementProgress.getCriterion((String)entry.getKey());
                         if (criterionProgress == null || !((Predicate)entry.getValue()).test(criterionProgress)) {
@@ -409,7 +409,7 @@ public class EntitySelectorOptions {
                   });
                } else {
                   boolean flag2 = stringReader.readBoolean();
-                  map.put(resourceLocation, (Predicate)(advancementProgress) -> advancementProgress.isDone() == flag2);
+                  map.put(resourceLocation, (advancementProgress) -> advancementProgress.isDone() == flag2); // MagmaCube - decompile error
                }
 
                stringReader.skipWhitespace();
diff --git a/src/main/java/net/minecraft/commands/synchronization/ArgumentTypes.java b/src/main/java/net/minecraft/commands/synchronization/ArgumentTypes.java
index 1d8440602290e505de6c50249e8d87ec95ee39ad..c7b4579671b220aacd6d642295c5f79fb7123f44 100644
--- a/src/main/java/net/minecraft/commands/synchronization/ArgumentTypes.java
+++ b/src/main/java/net/minecraft/commands/synchronization/ArgumentTypes.java
@@ -136,7 +136,7 @@ public class ArgumentTypes {
    }
 
    public static <T extends ArgumentType<?>> void serialize(FriendlyByteBuf friendlyByteBuf, T argumentType) {
-      ArgumentTypes.Entry<T> entry = get(argumentType);
+      ArgumentTypes.Entry<T> entry = (Entry<T>) get(argumentType); // MagmaCube - decompile error
       if (entry == null) {
          LOGGER.error("Could not serialize {} ({}) - will not be sent to client!", argumentType, argumentType.getClass());
          friendlyByteBuf.writeResourceLocation(new ResourceLocation(""));
@@ -159,7 +159,7 @@ public class ArgumentTypes {
    }
 
    private static <T extends ArgumentType<?>> void serializeToJson(JsonObject jsonObject, T argumentType) {
-      ArgumentTypes.Entry<T> entry = get(argumentType);
+      ArgumentTypes.Entry<T> entry = (Entry<T>) get(argumentType); // MagmaCube - decompile error
       if (entry == null) {
          LOGGER.error("Could not serialize argument {} ({})!", argumentType, argumentType.getClass());
          jsonObject.addProperty("type", "unknown");
diff --git a/src/main/java/net/minecraft/commands/synchronization/SuggestionProviders.java b/src/main/java/net/minecraft/commands/synchronization/SuggestionProviders.java
index b9e663b20095957e5a39568882183d5920807f6f..4c8bcb25d3f400dc2ed6a91f35b62ba0faba41e0 100644
--- a/src/main/java/net/minecraft/commands/synchronization/SuggestionProviders.java
+++ b/src/main/java/net/minecraft/commands/synchronization/SuggestionProviders.java
@@ -30,7 +30,7 @@ public class SuggestionProviders {
          throw new IllegalArgumentException("A command suggestion provider is already registered with the name " + resourceLocation);
       } else {
          PROVIDERS_BY_NAME.put(resourceLocation, suggestionProvider);
-         return new SuggestionProviders.Wrapper(resourceLocation, suggestionProvider);
+         return (SuggestionProvider<S>) new Wrapper(resourceLocation, suggestionProvider); // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/core/BlockPos.java b/src/main/java/net/minecraft/core/BlockPos.java
index fd24017206b31a1a26b1a9b02edf470bff97c497..4ee2f6ec182fd735411beb3d56243c544ddce10f 100644
--- a/src/main/java/net/minecraft/core/BlockPos.java
+++ b/src/main/java/net/minecraft/core/BlockPos.java
@@ -259,13 +259,15 @@ public class BlockPos extends Vec3i {
                         this.y = -this.maxY;
                      }
 
-                     int i = this.x;
-                     int i2 = this.y;
-                     int i3 = this.currentDepth - Math.abs(i) - Math.abs(i2);
-                     if (i3 <= i3) {
-                        this.zMirror = i3 != 0;
-                        blockPos = this.cursor.set(i5 + i, i6 + i2, i7 + i3);
+                     // MagmaCube start - decompile error
+                     int ix = this.x;
+                     int i2x = this.y;
+                     int i3x = this.currentDepth - Math.abs(ix) - Math.abs(i2x);
+                     if (i3x <= i3) {
+                        this.zMirror = i3x != 0;
+                        blockPos = this.cursor.set(i5 + ix, i6 + i2x, i7 + i3x);
                      }
+                     // MagmaCube end - decompile error
                   }
 
                   return blockPos;
@@ -315,12 +317,14 @@ public class BlockPos extends Vec3i {
                if (this.index == i10) {
                   return (BlockPos)this.endOfData();
                } else {
-                  int i = this.index % i7;
-                  int i2 = this.index / i7;
-                  int i3 = i2 % i8;
-                  int i4 = i2 / i8;
+                  // MagmaCube start - decompile error
+                  int iIn = this.index % i7;
+                  int i2In = this.index / i7;
+                  int i3In = i2In % i8;
+                  int i4In = i2In / i8;
                   ++this.index;
-                  return this.cursor.set(i + i, i2 + i3, i3 + i4);
+                  return this.cursor.set(i + iIn, i2 + i3In, i3 + i4In);
+                  // MagmaCube end - decompile error
                }
             }
          };
diff --git a/src/main/java/net/minecraft/core/NonNullList.java b/src/main/java/net/minecraft/core/NonNullList.java
index 2fbf20ca2c568a0f1c49d9cd44e94b900a1fbf7f..10b0c4c0e5723db4191c4bb4451432f130de758a 100644
--- a/src/main/java/net/minecraft/core/NonNullList.java
+++ b/src/main/java/net/minecraft/core/NonNullList.java
@@ -20,7 +20,7 @@ public class NonNullList<E> extends AbstractList<E> {
       Validate.notNull(object);
       Object[] objects = new Object[i];
       Arrays.fill(objects, object);
-      return new NonNullList<>(Arrays.asList(objects), object);
+      return new NonNullList(Arrays.asList(objects), object); // MagmaCube - decompile error
    }
 
    @SafeVarargs
diff --git a/src/main/java/net/minecraft/core/Registry.java b/src/main/java/net/minecraft/core/Registry.java
index 042a88234d6581f4bd643f42476c46773a791b93..2bdc8d7a6fcbb524fd99d107adf53ff093ad4ea6 100644
--- a/src/main/java/net/minecraft/core/Registry.java
+++ b/src/main/java/net/minecraft/core/Registry.java
@@ -244,8 +244,8 @@ public abstract class Registry<T> implements Codec<T>, Keyable, IdMap<T> {
    private static <T, R extends WritableRegistry<T>> R internalRegister(ResourceKey<? extends Registry<T>> resourceKey, R writableRegistry, Supplier<T> supplier, Lifecycle lifecycle) {
       ResourceLocation resourceLocation = resourceKey.location();
       LOADERS.put(resourceLocation, supplier);
-      WritableRegistry<R> writableRegistry2 = WRITABLE_REGISTRY;
-      return writableRegistry2.register(resourceKey, writableRegistry, lifecycle);
+      WritableRegistry<R> writableRegistry2 = (WritableRegistry<R>) WRITABLE_REGISTRY; // MagmaCube - decompile error
+      return (R) writableRegistry2.register((ResourceKey) resourceKey, writableRegistry, lifecycle); // MagmaCube - decompile error
    }
 
    protected Registry(ResourceKey<? extends Registry<T>> resourceKey, Lifecycle lifecycle) {
@@ -262,13 +262,15 @@ public abstract class Registry<T> implements Codec<T>, Keyable, IdMap<T> {
    }
 
    public <U> DataResult<Pair<T, U>> decode(DynamicOps<U> dynamicOps, U object) {
+      // MagmaCube start - decompile error
       return dynamicOps.compressMaps() ? dynamicOps.getNumberValue(object).flatMap((number) -> {
-         T object = this.byId(number.intValue());
-         return object == null ? DataResult.error("Unknown registry id: " + number) : DataResult.success(object, this.lifecycle(object));
+         T o = this.byId(number.intValue());
+         return o == null ? DataResult.error("Unknown registry id: " + number) : DataResult.success(o, this.lifecycle(o));
       }).map((objectx) -> Pair.of(objectx, dynamicOps.empty())) : ResourceLocation.CODEC.decode(dynamicOps, object).flatMap((pair) -> {
-         T object = this.get((ResourceLocation)pair.getFirst());
-         return object == null ? DataResult.error("Unknown registry key: " + pair.getFirst()) : DataResult.success(Pair.of(object, pair.getSecond()), this.lifecycle(object));
+         T o = this.get((ResourceLocation)pair.getFirst());
+         return o == null ? DataResult.error("Unknown registry key: " + pair.getFirst()) : DataResult.success(Pair.of(o, pair.getSecond()), this.lifecycle(o));
       });
+      // MagmaCube end - decompile error
    }
 
    public <U> DataResult<U> encode(T object, DynamicOps<U> dynamicOps, U object2) {
@@ -290,6 +292,7 @@ public abstract class Registry<T> implements Codec<T>, Keyable, IdMap<T> {
    public abstract Optional<ResourceKey<T>> getResourceKey(T var1);
 
    public abstract int getId(@Nullable T var1);
+   public int getIdObject(@Nullable Object var1) { return getId((T) var1); } // MagmaCube - workaround
 
    @Nullable
    public abstract T get(@Nullable ResourceKey<T> var1);
@@ -333,11 +336,11 @@ public abstract class Registry<T> implements Codec<T>, Keyable, IdMap<T> {
    }
 
    public static <V, T extends V> T register(Registry<V> registry, ResourceLocation resourceLocation, T object) {
-      return ((WritableRegistry)registry).register(ResourceKey.create(registry.key, resourceLocation), object, Lifecycle.stable());
+      return ((WritableRegistry<V>)registry).register(ResourceKey.create(registry.key, resourceLocation), object, Lifecycle.stable()); // MagmaCube - decompile error
    }
 
    public static <V, T extends V> T registerMapping(Registry<V> registry, int i, String s, T object) {
-      return ((WritableRegistry)registry).registerMapping(i, ResourceKey.create(registry.key, new ResourceLocation(s)), object, Lifecycle.stable());
+      return ((WritableRegistry<V>)registry).registerMapping(i, ResourceKey.create(registry.key, new ResourceLocation(s)), object, Lifecycle.stable()); // MagmaCube - decompile error
    }
 
    static {
diff --git a/src/main/java/net/minecraft/core/RegistryAccess.java b/src/main/java/net/minecraft/core/RegistryAccess.java
index 5661d84c010cb5357d2bf5311130c0f28fda899c..802f03ed8f341e10791772ea7a3fba69fe0a2ede 100644
--- a/src/main/java/net/minecraft/core/RegistryAccess.java
+++ b/src/main/java/net/minecraft/core/RegistryAccess.java
@@ -100,7 +100,7 @@ public abstract class RegistryAccess {
    }
 
    private static <R extends Registry<?>> void copyBuiltin(RegistryAccess.RegistryHolder registryHolder, ResourceKey<R> resourceKey) {
-      Registry<R> registry = BuiltinRegistries.REGISTRY;
+      Registry<R> registry = (Registry<R>) BuiltinRegistries.REGISTRY; // MagmaCube - decompile error
       Registry<?> registry2 = registry.get(resourceKey);
       if (registry2 == null) {
          throw new IllegalStateException("Missing builtin registry: " + resourceKey);
@@ -169,7 +169,7 @@ public abstract class RegistryAccess {
 
       private static <E> Codec<RegistryAccess.RegistryHolder> makeNetworkCodec() {
          Codec<ResourceKey<? extends Registry<E>>> codec = ResourceLocation.CODEC.xmap(ResourceKey::createRegistryKey, ResourceKey::location);
-         Codec<MappedRegistry<E>> codec2 = codec.partialDispatch("type", (mappedRegistry) -> DataResult.success(mappedRegistry.key()), (resourceKey) -> getNetworkCodec(resourceKey).map((codec) -> MappedRegistry.networkCodec(resourceKey, Lifecycle.experimental(), codec)));
+         Codec<MappedRegistry<E>> codec2 = codec.partialDispatch("type", (mappedRegistry) -> DataResult.success(mappedRegistry.key()), (resourceKey) -> getNetworkCodec(resourceKey).map((codec1) -> MappedRegistry.networkCodec(resourceKey, Lifecycle.experimental(), codec1))); // MagmaCube - decompile error
          UnboundedMapCodec<? extends ResourceKey<? extends Registry<?>>, ? extends MappedRegistry<?>> unboundedMapCodec = Codec.unboundedMap(codec, codec2);
          return captureMap(unboundedMapCodec);
       }
@@ -191,11 +191,11 @@ public abstract class RegistryAccess {
       }
 
       private static <E> MappedRegistry<?> createRegistry(ResourceKey<? extends Registry<?>> resourceKey) {
-         return new MappedRegistry<>(resourceKey, Lifecycle.stable());
+         return new MappedRegistry(resourceKey, Lifecycle.stable()); // MagmaCube - decompile error
       }
 
       public <E> Optional<WritableRegistry<E>> registry(ResourceKey<? extends Registry<E>> resourceKey) {
-         return Optional.ofNullable(this.registries.get(resourceKey)).map((mappedRegistry) -> mappedRegistry);
+         return Optional.ofNullable(this.registries.get(resourceKey)).map((mappedRegistry) -> (WritableRegistry<E>) mappedRegistry); // MagmaCube - decompile error
       }
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/data/BuiltinRegistries.java b/src/main/java/net/minecraft/data/BuiltinRegistries.java
index fc2fc78302685e79feeadced8ede594a395ed18b..ba488d2a7ad499467a0c8b50596f8d912ef6a395 100644
--- a/src/main/java/net/minecraft/data/BuiltinRegistries.java
+++ b/src/main/java/net/minecraft/data/BuiltinRegistries.java
@@ -52,8 +52,8 @@ public class BuiltinRegistries {
    private static <T, R extends WritableRegistry<T>> R internalRegister(ResourceKey<? extends Registry<T>> resourceKey, R writableRegistry, Supplier<T> supplier, Lifecycle lifecycle) {
       ResourceLocation resourceLocation = resourceKey.location();
       LOADERS.put(resourceLocation, supplier);
-      WritableRegistry<R> writableRegistry2 = WRITABLE_REGISTRY;
-      return writableRegistry2.register(resourceKey, writableRegistry, lifecycle);
+      WritableRegistry<R> writableRegistry2 = (WritableRegistry<R>) WRITABLE_REGISTRY; // MagmaCube - decompile error
+      return (R) writableRegistry2.register((ResourceKey) resourceKey, writableRegistry, lifecycle); // MagmaCube - decompile error
    }
 
    public static <T> T register(Registry<? super T> registry, String s, T object) {
@@ -61,11 +61,11 @@ public class BuiltinRegistries {
    }
 
    public static <V, T extends V> T register(Registry<V> registry, ResourceLocation resourceLocation, T object) {
-      return ((WritableRegistry)registry).register(ResourceKey.create(registry.key(), resourceLocation), object, Lifecycle.stable());
+      return ((WritableRegistry<T>)registry).register((ResourceKey<T>) ResourceKey.create(registry.key(), resourceLocation), object, Lifecycle.stable()); // MagmaCube - decompile error
    }
 
    public static <V, T extends V> T registerMapping(Registry<V> registry, int i, ResourceKey<V> resourceKey, T object) {
-      return ((WritableRegistry)registry).registerMapping(i, resourceKey, object, Lifecycle.stable());
+      return ((WritableRegistry<T>)registry).registerMapping(i, (ResourceKey<T>) resourceKey, object, Lifecycle.stable()); // MagmaCube - decompile error
    }
 
    public static void bootstrap() {
diff --git a/src/main/java/net/minecraft/data/info/RegistryDumpReport.java b/src/main/java/net/minecraft/data/info/RegistryDumpReport.java
index 80b4da85a12ffee47546363ff593b64734028363..e1209076f3ada6bcb9e44cd72466314add3c4f97 100644
--- a/src/main/java/net/minecraft/data/info/RegistryDumpReport.java
+++ b/src/main/java/net/minecraft/data/info/RegistryDumpReport.java
@@ -35,7 +35,7 @@ public class RegistryDumpReport implements DataProvider {
          jsonObject.addProperty("default", resourceLocation.toString());
       }
 
-      int i = Registry.REGISTRY.getId(registry);
+      int i = Registry.REGISTRY.getIdObject(registry); // MagmaCube - workaround
       jsonObject.addProperty("protocol_id", i);
       JsonObject jsonObject2 = new JsonObject();
 
diff --git a/src/main/java/net/minecraft/data/loot/LootTableProvider.java b/src/main/java/net/minecraft/data/loot/LootTableProvider.java
index 129825d8c8c88a2bb145266cfe5714b3bdceeef8..3c2ef456458c09da81f9006e494754b24e914536 100644
--- a/src/main/java/net/minecraft/data/loot/LootTableProvider.java
+++ b/src/main/java/net/minecraft/data/loot/LootTableProvider.java
@@ -40,7 +40,7 @@ public class LootTableProvider implements DataProvider {
    public void run(HashCache hashCache) {
       Path path = this.generator.getOutputFolder();
       Map<ResourceLocation, LootTable> map = Maps.newHashMap();
-      this.subProviders.forEach((pair) -> ((Consumer)((Supplier)pair.getFirst()).get()).accept((BiConsumer)(resourceLocation, builder) -> {
+      this.subProviders.forEach((pair) -> ((pair.getFirst()).get()).accept((resourceLocation, builder) -> { // MagmaCube - decompile error
             if (map.put(resourceLocation, builder.setParamSet((LootContextParamSet)pair.getSecond()).build()) != null) {
                throw new IllegalStateException("Duplicate loot table " + resourceLocation);
             }
diff --git a/src/main/java/net/minecraft/data/models/blockstates/Selector.java b/src/main/java/net/minecraft/data/models/blockstates/Selector.java
index 674315e0afc7dfa9594c903599471ce0a86454a5..59fdf53c529548ad80debaf4f1947d4abd6cee0b 100644
--- a/src/main/java/net/minecraft/data/models/blockstates/Selector.java
+++ b/src/main/java/net/minecraft/data/models/blockstates/Selector.java
@@ -12,11 +12,11 @@ public final class Selector {
    private final List<Property.Value<?>> values;
 
    public Selector extend(Property.Value<?> value) {
-      return new Selector(ImmutableList.builder().addAll(this.values).add(value).build());
+      return new Selector((List) ImmutableList.builder().addAll(this.values).add(value).build()); // MagmaCube - decompile error
    }
 
    public Selector extend(Selector selector) {
-      return new Selector(ImmutableList.builder().addAll(this.values).addAll(selector.values).build());
+      return new Selector((List) ImmutableList.builder().addAll(this.values).addAll(selector.values).build()); // MagmaCube - decompile error
    }
 
    private Selector(List<Property.Value<?>> list) {
diff --git a/src/main/java/net/minecraft/data/models/blockstates/VariantProperties.java b/src/main/java/net/minecraft/data/models/blockstates/VariantProperties.java
index ac06cc13393bce950368586fffa7954cb86b09ea..4dcf95da0b4e2876fd862ea0355475f97a0afa30 100644
--- a/src/main/java/net/minecraft/data/models/blockstates/VariantProperties.java
+++ b/src/main/java/net/minecraft/data/models/blockstates/VariantProperties.java
@@ -4,11 +4,13 @@ import com.google.gson.JsonPrimitive;
 import net.minecraft.resources.ResourceLocation;
 
 public class VariantProperties {
-   public static final VariantProperty<VariantProperties.Rotation> X_ROT = new VariantProperty("x", (rotation) -> new JsonPrimitive(rotation.value));
-   public static final VariantProperty<VariantProperties.Rotation> Y_ROT = new VariantProperty("y", (rotation) -> new JsonPrimitive(rotation.value));
+   // MagmaCube start - decompile error
+   public static final VariantProperty<VariantProperties.Rotation> X_ROT = new VariantProperty<>("x", (rotation) -> new JsonPrimitive(rotation.value));
+   public static final VariantProperty<VariantProperties.Rotation> Y_ROT = new VariantProperty<>("y", (rotation) -> new JsonPrimitive(rotation.value));
    public static final VariantProperty<ResourceLocation> MODEL = new VariantProperty<>("model", (resourceLocation) -> new JsonPrimitive(resourceLocation.toString()));
-   public static final VariantProperty<Boolean> UV_LOCK = new VariantProperty("uvlock", JsonPrimitive::new);
-   public static final VariantProperty<Integer> WEIGHT = new VariantProperty("weight", JsonPrimitive::new);
+   public static final VariantProperty<Boolean> UV_LOCK = new VariantProperty<>("uvlock", JsonPrimitive::new);
+   public static final VariantProperty<Integer> WEIGHT = new VariantProperty<>("weight", JsonPrimitive::new);
+   // MagmaCube end - decompile error
 
    public static enum Rotation {
       R0(0),
diff --git a/src/main/java/net/minecraft/data/models/model/ModelTemplate.java b/src/main/java/net/minecraft/data/models/model/ModelTemplate.java
index ff426a58bfb86d92c9d5a7ef52b0e6b53c7811e6..22c49583f8a763db67055ebcfc59a5619b45b1b5 100644
--- a/src/main/java/net/minecraft/data/models/model/ModelTemplate.java
+++ b/src/main/java/net/minecraft/data/models/model/ModelTemplate.java
@@ -42,10 +42,10 @@ public class ModelTemplate {
       Map<TextureSlot, ResourceLocation> map = this.createMap(textureMapping);
       biConsumer.accept(resourceLocation, (Supplier)() -> {
          JsonObject jsonObject = new JsonObject();
-         this.model.ifPresent((resourceLocation) -> jsonObject.addProperty("parent", resourceLocation.toString()));
+         this.model.ifPresent((resourceLocationx) -> jsonObject.addProperty("parent", resourceLocationx.toString())); // MagmaCube - decompile error
          if (!map.isEmpty()) {
             JsonObject jsonObject2 = new JsonObject();
-            map.forEach((textureSlot, resourceLocation) -> jsonObject2.addProperty(textureSlot.getId(), resourceLocation.toString()));
+            map.forEach((textureSlot, resourceLocationx) -> jsonObject2.addProperty(textureSlot.getId(), resourceLocationx.toString())); // MagmaCube - decompile error
             jsonObject.add("textures", jsonObject2);
          }
 
diff --git a/src/main/java/net/minecraft/data/structures/SnbtToNbt.java b/src/main/java/net/minecraft/data/structures/SnbtToNbt.java
index 3652be959d134fc223990b257d0e72e41ca6b1c1..cef6359be69e705df46292767c28404134b86f7d 100644
--- a/src/main/java/net/minecraft/data/structures/SnbtToNbt.java
+++ b/src/main/java/net/minecraft/data/structures/SnbtToNbt.java
@@ -60,7 +60,7 @@ public class SnbtToNbt implements DataProvider {
          Files.walk(path2).filter((pathx) -> pathx.toString().endsWith(".snbt")).forEach((path2x) -> list.add(CompletableFuture.supplyAsync(() -> this.readStructure(path2x, this.getName(path2, path2x)), Util.backgroundExecutor())));
       }
 
-      ((List)Util.sequence(list).join()).stream().filter(Objects::nonNull).forEach((taskResult) -> this.storeStructureIfChanged(hashCache, taskResult, path));
+      (Util.sequence(list).join()).stream().filter(Objects::nonNull).forEach((taskResult) -> this.storeStructureIfChanged(hashCache, taskResult, path)); // MagmaCube - decompile error
    }
 
    public String getName() {
diff --git a/src/main/java/net/minecraft/gametest/framework/GameTestAssertPosException.java b/src/main/java/net/minecraft/gametest/framework/GameTestAssertPosException.java
index 03335978d1bd9744a828bf7a0504f31e592142c9..9759bb0ec323e86dcd7872da24d098cb7712f6f8 100644
--- a/src/main/java/net/minecraft/gametest/framework/GameTestAssertPosException.java
+++ b/src/main/java/net/minecraft/gametest/framework/GameTestAssertPosException.java
@@ -4,9 +4,15 @@ import javax.annotation.Nullable;
 import net.minecraft.core.BlockPos;
 
 public class GameTestAssertPosException extends GameTestAssertException {
-   private final BlockPos absolutePos;
-   private final BlockPos relativePos;
-   private final long tick;
+   // MagmaCube start - decompile error
+   private final BlockPos absolutePos = null;
+   private final BlockPos relativePos = null;
+   private final long tick = 0L;
+
+   public GameTestAssertPosException(String s) {
+      super(s);
+   }
+   // MagmaCube end - decompile error
 
    public String getMessage() {
       String s = "" + this.absolutePos.getX() + "," + this.absolutePos.getY() + "," + this.absolutePos.getZ() + " (relative: " + this.relativePos.getX() + "," + this.relativePos.getY() + "," + this.relativePos.getZ() + ")";
diff --git a/src/main/java/net/minecraft/gametest/framework/GameTestBatchRunner.java b/src/main/java/net/minecraft/gametest/framework/GameTestBatchRunner.java
index 01ca3cdc1b26198161374288779d6ceda7c66c7f..d293efbd08c624f20cab1832fd304dea138eb109 100644
--- a/src/main/java/net/minecraft/gametest/framework/GameTestBatchRunner.java
+++ b/src/main/java/net/minecraft/gametest/framework/GameTestBatchRunner.java
@@ -34,15 +34,15 @@ public class GameTestBatchRunner {
       this.testTicker = gameTestTicker;
       this.testsPerRow = i;
       collection.forEach((gameTestBatch) -> {
-         Collection<GameTestInfo> collection = Lists.newArrayList();
+         Collection<GameTestInfo> collections = Lists.newArrayList(); // MagmaCube - decompile error
 
          for(TestFunction testFunction : gameTestBatch.getTestFunctions()) {
             GameTestInfo gameTestInfo = new GameTestInfo(testFunction, rotation, serverLevel);
-            collection.add(gameTestInfo);
+            collections.add(gameTestInfo); // MagmaCube - decompile error
             this.allTestInfos.add(gameTestInfo);
          }
 
-         this.batches.add(Pair.of(gameTestBatch, collection));
+         this.batches.add(Pair.of(gameTestBatch, collections)); // MagmaCube - decompile error
       });
    }
 
diff --git a/src/main/java/net/minecraft/gametest/framework/GameTestEvent.java b/src/main/java/net/minecraft/gametest/framework/GameTestEvent.java
index 1c0d9bf6fdcfded4b79b5ddb788e3df1d8d7c7eb..7b003d5d7c5b12f5fdbdcfef337dc642cc5b01d8 100644
--- a/src/main/java/net/minecraft/gametest/framework/GameTestEvent.java
+++ b/src/main/java/net/minecraft/gametest/framework/GameTestEvent.java
@@ -4,6 +4,6 @@ import javax.annotation.Nullable;
 
 class GameTestEvent {
    @Nullable
-   public final Long expectedDelay;
-   public final Runnable assertion;
+   public final Long expectedDelay = 0L; // MagmaCube - decompile error
+   public final Runnable assertion = null; // MagmaCube - decompile error
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/gametest/framework/GameTestRunner.java b/src/main/java/net/minecraft/gametest/framework/GameTestRunner.java
index c611e05166365d1042d265db5a9418f84e44c83c..3470a98aa9cf5ef8bb0fa755e73db5d7e5c923a5 100644
--- a/src/main/java/net/minecraft/gametest/framework/GameTestRunner.java
+++ b/src/main/java/net/minecraft/gametest/framework/GameTestRunner.java
@@ -64,14 +64,16 @@ public class GameTestRunner {
       Map<String, Collection<TestFunction>> map = Maps.newHashMap();
       collection.forEach((testFunction) -> {
          String s = testFunction.getBatchName();
-         Collection<TestFunction> collection = (Collection)map.computeIfAbsent(s, (sx) -> Lists.newArrayList());
-         collection.add(testFunction);
+         // MagmaCube start - decompile error
+         Collection<TestFunction> collectionx = (Collection)map.computeIfAbsent(s, (sx) -> Lists.newArrayList());
+         collectionx.add(testFunction);
+         // MagmaCube end - decompile error
       });
       return (Collection)map.keySet().stream().flatMap((s) -> {
-         Collection<TestFunction> collection = (Collection)map.get(s);
+         Collection<TestFunction> collectionx = (Collection)map.get(s); // MagmaCube - decompile error
          Consumer<ServerLevel> consumer = GameTestRegistry.getBeforeBatchFunction(s);
          MutableInt mutableInt = new MutableInt();
-         return Streams.stream(Iterables.partition(collection, 100)).map((list) -> new GameTestBatch(s + ":" + mutableInt.incrementAndGet(), collection, consumer));
+         return Streams.stream(Iterables.partition(collectionx, 100)).map((list) -> new GameTestBatch(s + ":" + mutableInt.incrementAndGet(), collectionx, consumer)); // MagmaCube - decompile error
       }).collect(Collectors.toList());
    }
 
@@ -149,9 +151,9 @@ public class GameTestRunner {
       BlockPos blockPos3 = blockPos.offset(i, 0, i);
       BlockPos.betweenClosedStream(blockPos2, blockPos3).filter((blockPosx) -> serverLevel.getBlockState(blockPosx).is(Blocks.STRUCTURE_BLOCK)).forEach((blockPosx) -> {
          StructureBlockEntity structureBlockEntity = (StructureBlockEntity)serverLevel.getBlockEntity(blockPosx);
-         BlockPos blockPos2 = structureBlockEntity.getBlockPos();
+         BlockPos blockPos2x = structureBlockEntity.getBlockPos(); // MagmaCube - decompile error
          BoundingBox boundingBox = StructureUtils.getStructureBoundingBox(structureBlockEntity);
-         StructureUtils.clearSpaceForStructure(boundingBox, blockPos2.getY(), serverLevel);
+         StructureUtils.clearSpaceForStructure(boundingBox, blockPos2x.getY(), serverLevel); // MagmaCube - decompile error
       });
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/gametest/framework/GameTestSequence.java b/src/main/java/net/minecraft/gametest/framework/GameTestSequence.java
index 4e52c09541511e4c8b03b6e8cf4764eefa13a08e..a7babffcee07cfa542d91f72396aa8b657215981 100644
--- a/src/main/java/net/minecraft/gametest/framework/GameTestSequence.java
+++ b/src/main/java/net/minecraft/gametest/framework/GameTestSequence.java
@@ -1,11 +1,12 @@
 package net.minecraft.gametest.framework;
 
+import java.util.ArrayList;
 import java.util.Iterator;
 import java.util.List;
 
 public class GameTestSequence {
-   private final GameTestInfo parent;
-   private final List<GameTestEvent> events;
+   private final GameTestInfo parent = null; // MagmaCube - decompile error
+   private final List<GameTestEvent> events = new ArrayList<>(); // MagmaCube - decompile error
    private long lastTick;
 
    public void tickAndContinue(long l) {
diff --git a/src/main/java/net/minecraft/gametest/framework/TestFunction.java b/src/main/java/net/minecraft/gametest/framework/TestFunction.java
index 3821f4b1f7f9688426f6b8c69560b8de8b27271d..35fee11ada8f2176eb4277bddf096b58f75e3626 100644
--- a/src/main/java/net/minecraft/gametest/framework/TestFunction.java
+++ b/src/main/java/net/minecraft/gametest/framework/TestFunction.java
@@ -4,14 +4,16 @@ import java.util.function.Consumer;
 import net.minecraft.world.level.block.Rotation;
 
 public class TestFunction {
-   private final String batchName;
-   private final String testName;
-   private final String structureName;
-   private final boolean required;
-   private final Consumer<GameTestHelper> function;
-   private final int maxTicks;
-   private final long setupTicks;
-   private final Rotation rotation;
+   // MagmaCube start - decompile error
+   private final String batchName = null;
+   private final String testName = null;
+   private final String structureName = null;
+   private final boolean required = false;
+   private final Consumer<GameTestHelper> function = null;
+   private final int maxTicks = 0;
+   private final long setupTicks = 0;
+   private final Rotation rotation = null;
+   // MagmaCube end - decompile error
 
    public void run(GameTestHelper gameTestHelper) {
       this.function.accept(gameTestHelper);
diff --git a/src/main/java/net/minecraft/nbt/NbtOps.java b/src/main/java/net/minecraft/nbt/NbtOps.java
index 874b54256b78a2b844e052a00f92285e7480c770..482f527c6fa5fc07f71ab1655c91435bb7e6314c 100644
--- a/src/main/java/net/minecraft/nbt/NbtOps.java
+++ b/src/main/java/net/minecraft/nbt/NbtOps.java
@@ -127,19 +127,19 @@ public class NbtOps implements DynamicOps<Tag> {
    private static <T extends Tag> void fillOne(CollectionTag<T> collectionTag, Tag tag, Tag tag2) {
       if (tag instanceof CollectionTag) {
          CollectionTag<?> collectionTag2 = (CollectionTag)tag;
-         collectionTag2.forEach((tagx) -> collectionTag.add(tagx));
+         collectionTag2.forEach((tagx) -> collectionTag.add((T) tagx)); // MagmaCube - decompile error
       }
 
-      collectionTag.add(tag2);
+      collectionTag.add((T) tag2); // MagmaCube - decompile error
    }
 
    private static <T extends Tag> void fillMany(CollectionTag<T> collectionTag, Tag tag, List<Tag> list) {
       if (tag instanceof CollectionTag) {
          CollectionTag<?> collectionTag2 = (CollectionTag)tag;
-         collectionTag2.forEach((tagx) -> collectionTag.add(tagx));
+         collectionTag2.forEach((tagx) -> collectionTag.add((T) tagx)); // MagmaCube - decompile error
       }
 
-      list.forEach((tagx) -> collectionTag.add(tagx));
+      list.forEach((tagx) -> collectionTag.add((T) tagx)); // MagmaCube - decompile error
    }
 
    public DataResult<Tag> mergeToList(Tag tag, Tag tag2) {
@@ -191,11 +191,13 @@ public class NbtOps implements DynamicOps<Tag> {
 
          List<Tag> list = Lists.newArrayList();
          mapLike.entries().forEach((pair) -> {
-            Tag tag = (Tag)pair.getFirst();
-            if (!(tag instanceof StringTag)) {
-               list.add(tag);
+            // MagmaCube start - decompile error
+            Tag tagx = (Tag)pair.getFirst();
+            if (!(tagx instanceof StringTag)) {
+               list.add(tagx);
             } else {
-               compoundTag.put(tag.getAsString(), (Tag)pair.getSecond());
+               compoundTag.put(tagx.getAsString(), (Tag)pair.getSecond());
+               // MagmaCube end - decompile error
             }
          });
          return !list.isEmpty() ? DataResult.error("some keys are not strings: " + list, compoundTag) : DataResult.success(compoundTag);
@@ -216,7 +218,8 @@ public class NbtOps implements DynamicOps<Tag> {
          return DataResult.error("Not a map: " + tag);
       } else {
          CompoundTag compoundTag = (CompoundTag)tag;
-         return DataResult.success((Consumer)(biConsumer) -> compoundTag.getAllKeys().forEach((s) -> biConsumer.accept(this.createString(s), compoundTag.get(s))));
+         // MagmaCube - decompile error
+         return DataResult.success((biConsumer) -> compoundTag.getAllKeys().forEach((s) -> biConsumer.accept(this.createString(s), compoundTag.get(s))));
       }
    }
 
@@ -267,7 +270,7 @@ public class NbtOps implements DynamicOps<Tag> {
    }
 
    public DataResult<ByteBuffer> getByteBuffer(Tag tag) {
-      return tag instanceof ByteArrayTag ? DataResult.success(ByteBuffer.wrap(((ByteArrayTag)tag).getAsByteArray())) : super.getByteBuffer(tag);
+      return tag instanceof ByteArrayTag ? DataResult.success(ByteBuffer.wrap(((ByteArrayTag)tag).getAsByteArray())) : DynamicOps.super.getByteBuffer(tag); // MagmaCube - decompile error
    }
 
    public Tag createByteList(ByteBuffer byteBuffer) {
@@ -275,7 +278,7 @@ public class NbtOps implements DynamicOps<Tag> {
    }
 
    public DataResult<IntStream> getIntStream(Tag tag) {
-      return tag instanceof IntArrayTag ? DataResult.success(Arrays.stream(((IntArrayTag)tag).getAsIntArray())) : super.getIntStream(tag);
+      return tag instanceof IntArrayTag ? DataResult.success(Arrays.stream(((IntArrayTag)tag).getAsIntArray())) : DynamicOps.super.getIntStream(tag); // MagmaCube - decompile error
    }
 
    public Tag createIntList(IntStream intStream) {
@@ -283,7 +286,7 @@ public class NbtOps implements DynamicOps<Tag> {
    }
 
    public DataResult<LongStream> getLongStream(Tag tag) {
-      return tag instanceof LongArrayTag ? DataResult.success(Arrays.stream(((LongArrayTag)tag).getAsLongArray())) : super.getLongStream(tag);
+      return tag instanceof LongArrayTag ? DataResult.success(Arrays.stream(((LongArrayTag)tag).getAsLongArray())) : DynamicOps.super.getLongStream(tag); // MagmaCube - decompile error
    }
 
    public Tag createLongList(LongStream longStream) {
diff --git a/src/main/java/net/minecraft/nbt/NbtUtils.java b/src/main/java/net/minecraft/nbt/NbtUtils.java
index 68a1492e207d62dbc9920f0cfa412263a5f1362b..ade57bbee4c36cc5da25e1830e2824e7b54c99e5 100644
--- a/src/main/java/net/minecraft/nbt/NbtUtils.java
+++ b/src/main/java/net/minecraft/nbt/NbtUtils.java
@@ -206,7 +206,7 @@ public final class NbtUtils {
    private static <S extends StateHolder<?, S>, T extends Comparable<T>> S setValueHelper(S stateHolder, Property<T> property, String s, CompoundTag compoundTag, CompoundTag compoundTag2) {
       Optional<T> optional = property.getValue(compoundTag.getString(s));
       if (optional.isPresent()) {
-         return stateHolder.setValue(property, (Comparable)optional.get());
+         return stateHolder.setValue(property, optional.get()); // MagmaCube - decompile error
       } else {
          LOGGER.warn("Unable to read property: {} with value: {} for blockstate: {}", s, compoundTag.getString(s), compoundTag2.toString());
          return stateHolder;
diff --git a/src/main/java/net/minecraft/nbt/TagParser.java b/src/main/java/net/minecraft/nbt/TagParser.java
index 31cf6ae773e3bf54aef9a74163668147bc947717..6a2f953f5f22ac58e8e8bf822135ef1c89f1916f 100644
--- a/src/main/java/net/minecraft/nbt/TagParser.java
+++ b/src/main/java/net/minecraft/nbt/TagParser.java
@@ -229,11 +229,11 @@ public class TagParser {
             }
 
             if (tagType2 == ByteTag.TYPE) {
-               list.add(((NumericTag)tag).getAsByte());
+               list.add((T)(Object)((NumericTag)tag).getAsByte()); // MagmaCube - decompile error
             } else if (tagType2 == LongTag.TYPE) {
-               list.add(((NumericTag)tag).getAsLong());
+               list.add((T)(Object)((NumericTag)tag).getAsLong()); // MagmaCube - decompile error
             } else {
-               list.add(((NumericTag)tag).getAsInt());
+               list.add((T)(Object)((NumericTag)tag).getAsInt()); // MagmaCube - decompile error
             }
 
             if (this.hasElementSeparator()) {
diff --git a/src/main/java/net/minecraft/resources/RegistryFileCodec.java b/src/main/java/net/minecraft/resources/RegistryFileCodec.java
index 2957286aa9e7c266d678c13744fe2d781958bf44..3a7e9ccff0af8df062fb3ddf9543f2761de66aaa 100644
--- a/src/main/java/net/minecraft/resources/RegistryFileCodec.java
+++ b/src/main/java/net/minecraft/resources/RegistryFileCodec.java
@@ -6,6 +6,7 @@ import com.mojang.serialization.Codec;
 import com.mojang.serialization.DataResult;
 import com.mojang.serialization.DynamicOps;
 import java.util.List;
+import java.util.function.Function;
 import java.util.function.Supplier;
 import net.minecraft.core.Registry;
 
@@ -19,7 +20,7 @@ public final class RegistryFileCodec<E> implements Codec<Supplier<E>> {
    }
 
    public static <E> Codec<List<Supplier<E>>> homogeneousList(ResourceKey<? extends Registry<E>> resourceKey, Codec<E> codec) {
-      return Codec.either(create(resourceKey, codec, false).listOf(), codec.xmap((object) -> () -> object, Supplier::get).listOf()).xmap((either) -> (List)either.map((list) -> list, (list) -> list), Either::left);
+      return Codec.either(create(resourceKey, codec, false).listOf(), codec.xmap((Function<? super E, Supplier<E>>) (object) -> () -> object, Supplier::get).listOf()).xmap((either) -> either.map((list) -> list, (list) -> list), Either::left); // MagmaCube - decompile error
    }
 
    private static <E> RegistryFileCodec<E> create(ResourceKey<? extends Registry<E>> resourceKey, Codec<E> codec, boolean flag) {
@@ -37,7 +38,7 @@ public final class RegistryFileCodec<E> implements Codec<Supplier<E>> {
    }
 
    public <T> DataResult<Pair<Supplier<E>, T>> decode(DynamicOps<T> dynamicOps, T object) {
-      return dynamicOps instanceof RegistryReadOps ? ((RegistryReadOps)dynamicOps).decodeElement(object, this.registryKey, this.elementCodec, this.allowInline) : this.elementCodec.decode(dynamicOps, object).map((pair) -> pair.mapFirst((object) -> () -> object));
+      return dynamicOps instanceof RegistryReadOps ? ((RegistryReadOps)dynamicOps).decodeElement(object, this.registryKey, this.elementCodec, this.allowInline) : this.elementCodec.decode(dynamicOps, object).map((pair) -> pair.mapFirst((objectx) -> () -> objectx)); // MagmaCube - decompile error
    }
 
    public String toString() {
diff --git a/src/main/java/net/minecraft/resources/RegistryReadOps.java b/src/main/java/net/minecraft/resources/RegistryReadOps.java
index 4f36ebe314d708616b88be8e8eaf4cf6eeb07794..424d33ffe310798278bf0d38f0ae0aeb0ebd447b 100644
--- a/src/main/java/net/minecraft/resources/RegistryReadOps.java
+++ b/src/main/java/net/minecraft/resources/RegistryReadOps.java
@@ -60,7 +60,7 @@ public class RegistryReadOps<T> extends DelegatingOps<T> {
       this.resources = resourceAccess;
       this.registryHolder = registryHolder;
       this.readCache = identityHashMap;
-      this.jsonOps = dynamicOps == JsonOps.INSTANCE ? this : new RegistryReadOps(JsonOps.INSTANCE, resourceAccess, registryHolder, identityHashMap);
+      this.jsonOps = dynamicOps == JsonOps.INSTANCE ? (RegistryReadOps<JsonElement>) this : new RegistryReadOps(JsonOps.INSTANCE, resourceAccess, registryHolder, identityHashMap); // MagmaCube - decompile error
    }
 
    protected <E> DataResult<Pair<Supplier<E>, T>> decodeElement(T object, ResourceKey<? extends Registry<E>> resourceKey, Codec<E> codec, boolean flag) {
@@ -71,7 +71,7 @@ public class RegistryReadOps<T> extends DelegatingOps<T> {
          WritableRegistry<E> writableRegistry = (WritableRegistry)optional.get();
          DataResult<Pair<ResourceLocation, T>> dataResult = ResourceLocation.CODEC.decode(this.delegate, object);
          if (!dataResult.result().isPresent()) {
-            return !flag ? DataResult.error("Inline definitions not allowed here") : codec.decode(this, object).map((pairx) -> pairx.mapFirst((object) -> () -> object));
+            return !flag ? DataResult.error("Inline definitions not allowed here") : codec.decode(this, object).map((pairx) -> pairx.mapFirst((objecta) -> () -> objecta)); // MagmaCube - decompile error
          } else {
             Pair<ResourceLocation, T> pair = (Pair)dataResult.result().get();
             ResourceLocation resourceLocation = (ResourceLocation)pair.getFirst();
diff --git a/src/main/java/net/minecraft/server/Main.java b/src/main/java/net/minecraft/server/Main.java
index 955d6ab378b812ad3137253a61fb3700b4bfc9a3..0bc723f0ce400081616179420f6c8f0b3b29a5fb 100644
--- a/src/main/java/net/minecraft/server/Main.java
+++ b/src/main/java/net/minecraft/server/Main.java
@@ -151,17 +151,18 @@ public class Main {
          levelStorageAccess.saveDataTag(registryHolder, worldData);
          WorldData worldData2 = worldData;
          final DedicatedServer dedicatedServer = MinecraftServer.spin((threadx) -> {
-            DedicatedServer dedicatedServer = new DedicatedServer(threadx, registryHolder, levelStorageAccess, packRepository, serverResources, worldData2, dedicatedServerSettings, DataFixers.getDataFixer(), minecraftSessionService, gameProfileRepository, gameProfileCache, LoggerChunkProgressListener::new);
-            dedicatedServer.setSingleplayerName((String)optionSet.valueOf(optionSpec9));
-            dedicatedServer.setPort(optionSet.valueOf(optionSpec12));
-            dedicatedServer.setDemo(optionSet.has(optionSpec3));
-            dedicatedServer.setId((String)optionSet.valueOf(optionSpec13));
-            boolean flag = !optionSet.has(optionSpec) && !optionSet.valuesOf(optionSpec14).contains("nogui");
-            if (flag && !GraphicsEnvironment.isHeadless()) {
-               dedicatedServer.showGui();
+            // MagmaCube start - decompile error
+            DedicatedServer dedicatedServerx = new DedicatedServer(threadx, registryHolder, levelStorageAccess, packRepository, serverResources, worldData2, dedicatedServerSettings, DataFixers.getDataFixer(), minecraftSessionService, gameProfileRepository, gameProfileCache, LoggerChunkProgressListener::new);
+            dedicatedServerx.setSingleplayerName((String)optionSet.valueOf(optionSpec9));
+            dedicatedServerx.setPort(optionSet.valueOf(optionSpec12));
+            dedicatedServerx.setDemo(optionSet.has(optionSpec3));
+            dedicatedServerx.setId((String)optionSet.valueOf(optionSpec13));
+            boolean flagx = !optionSet.has(optionSpec) && !optionSet.valuesOf(optionSpec14).contains("nogui");
+            if (flagx && !GraphicsEnvironment.isHeadless()) {
+               dedicatedServerx.showGui();
             }
-
-            return dedicatedServer;
+            return dedicatedServerx;
+            // MagmaCube end - decompile error
          });
          Thread thread = new Thread("Server Shutdown Thread") {
             public void run() {
diff --git a/src/main/java/net/minecraft/server/PlayerAdvancements.java b/src/main/java/net/minecraft/server/PlayerAdvancements.java
index e369bddfa2db79b994d8b3082a31d1b3d696b1d2..8796290fe0f087e4e83d82f4ca576bd233a532ff 100644
--- a/src/main/java/net/minecraft/server/PlayerAdvancements.java
+++ b/src/main/java/net/minecraft/server/PlayerAdvancements.java
@@ -154,7 +154,7 @@ public class PlayerAdvancements {
 
                Stream<Entry<ResourceLocation, AdvancementProgress>> stream = map.entrySet().stream().sorted(Comparator.comparing(Entry::getValue));
 
-               for(Entry<ResourceLocation, AdvancementProgress> entry : (List)stream.collect(Collectors.toList())) {
+               for(Entry<ResourceLocation, AdvancementProgress> entry : stream.collect(Collectors.toList())) { // MagmaCube - decompile error
                   Advancement advancement = serverAdvancementManager.getAdvancement((ResourceLocation)entry.getKey());
                   if (advancement == null) {
                      LOGGER.warn("Ignored advancement '{}' in progress file {} - it doesn't exist anymore?", entry.getKey(), this.file);
diff --git a/src/main/java/net/minecraft/server/ServerFunctionLibrary.java b/src/main/java/net/minecraft/server/ServerFunctionLibrary.java
index 3e57d96df32002e6b2bdc493708cf3ceb9d12328..b2904eb1e3dbafeb62d3c35bd75076c8a5162180 100644
--- a/src/main/java/net/minecraft/server/ServerFunctionLibrary.java
+++ b/src/main/java/net/minecraft/server/ServerFunctionLibrary.java
@@ -85,7 +85,7 @@ public class ServerFunctionLibrary implements PreparableReloadListener {
       return completableFuture.thenCombine(completableFuture2, Pair::of).thenCompose(preparationBarrier::wait).thenAcceptAsync((pair) -> {
          Map<ResourceLocation, CompletableFuture<CommandFunction>> map = (Map)pair.getSecond();
          Builder<ResourceLocation, CommandFunction> builder = ImmutableMap.builder();
-         map.forEach((resourceLocation, completableFuture) -> completableFuture.handle((commandFunction, throwable) -> {
+         map.forEach((resourceLocation, completableFuturex) -> completableFuturex.handle((commandFunction, throwable) -> { // MagmaCube - decompile error
                if (throwable != null) {
                   LOGGER.error("Failed to load function {}", resourceLocation, throwable);
                } else {
diff --git a/src/main/java/net/minecraft/server/commands/EmoteCommands.java b/src/main/java/net/minecraft/server/commands/EmoteCommands.java
index 1574fed5a9ac5bc45b7c6ea80aa46a29649ed1f6..67a76847f4a5df94c73abad5721a418c2765d58f 100644
--- a/src/main/java/net/minecraft/server/commands/EmoteCommands.java
+++ b/src/main/java/net/minecraft/server/commands/EmoteCommands.java
@@ -25,7 +25,7 @@ public class EmoteCommands {
             if (entity instanceof ServerPlayer) {
                TextFilter textFilter = ((ServerPlayer)entity).getTextFilter();
                if (textFilter != null) {
-                  textFilter.processStreamMessage(s).thenAcceptAsync((optional) -> optional.ifPresent((s) -> minecraftServer.getPlayerList().broadcastMessage(createMessage(commandContext, s), ChatType.CHAT, entity.getUUID())), minecraftServer);
+                  textFilter.processStreamMessage(s).thenAcceptAsync((optional) -> optional.ifPresent((s1) -> minecraftServer.getPlayerList().broadcastMessage(createMessage(commandContext, s1), ChatType.CHAT, entity.getUUID())), minecraftServer); // MagmaCube - decompile error
                   return 1;
                }
             }
diff --git a/src/main/java/net/minecraft/server/commands/ForceLoadCommand.java b/src/main/java/net/minecraft/server/commands/ForceLoadCommand.java
index d100e4e83d3652c27c0fe54ee96d0bbb473395d8..77da164de0858e13cdfceccf6cb7bec074fe0294 100644
--- a/src/main/java/net/minecraft/server/commands/ForceLoadCommand.java
+++ b/src/main/java/net/minecraft/server/commands/ForceLoadCommand.java
@@ -19,6 +19,8 @@ import net.minecraft.server.level.ServerLevel;
 import net.minecraft.world.level.ChunkPos;
 import net.minecraft.world.level.Level;
 
+import java.util.function.LongConsumer;
+
 public class ForceLoadCommand {
    private static final Dynamic2CommandExceptionType ERROR_TOO_MANY_CHUNKS = new Dynamic2CommandExceptionType((object, object2) -> new TranslatableComponent("commands.forceload.toobig", object, object2));
    private static final Dynamic2CommandExceptionType ERROR_NOT_TICKING = new Dynamic2CommandExceptionType((object, object2) -> new TranslatableComponent("commands.forceload.query.failure", object, object2));
@@ -65,7 +67,7 @@ public class ForceLoadCommand {
       ServerLevel serverLevel = commandSourceStack.getLevel();
       ResourceKey<Level> resourceKey = serverLevel.dimension();
       LongSet longSet = serverLevel.getForcedChunks();
-      longSet.forEach((l) -> serverLevel.setChunkForced(ChunkPos.getX(l), ChunkPos.getZ(l), false));
+      longSet.forEach((LongConsumer) (l) -> serverLevel.setChunkForced(ChunkPos.getX(l), ChunkPos.getZ(l), false)); // MagmaCube - decompile error
       commandSourceStack.sendSuccess(new TranslatableComponent("commands.forceload.removed.all", resourceKey.location()), true);
       return 0;
    }
diff --git a/src/main/java/net/minecraft/server/commands/data/DataCommands.java b/src/main/java/net/minecraft/server/commands/data/DataCommands.java
index d3bbce1f009f978da2cf1249106152bc38fffc3f..881074f35aa0068b02628ab5809756ae39305c22 100644
--- a/src/main/java/net/minecraft/server/commands/data/DataCommands.java
+++ b/src/main/java/net/minecraft/server/commands/data/DataCommands.java
@@ -119,7 +119,7 @@ public class DataCommands {
             ArgumentBuilder<CommandSourceStack, ?> argumentBuilder2 = Commands.argument("targetPath", NbtPathArgument.nbtPath());
 
             for(DataCommands.DataProvider dataProvider2 : SOURCE_PROVIDERS) {
-               biConsumer.accept(argumentBuilder2, (DataCommands.DataManipulatorDecorator)(dataManipulator) -> dataProvider2.wrap(Commands.literal("from"), (argumentBuilder) -> argumentBuilder.executes((commandContext) -> {
+               biConsumer.accept(argumentBuilder2, (DataCommands.DataManipulatorDecorator)(dataManipulator) -> dataProvider2.wrap(Commands.literal("from"), (argumentBuilderx) -> argumentBuilderx.executes((commandContext) -> { // MagmaCube - decompile error
                         List<Tag> list = Collections.singletonList(dataProvider2.access(commandContext).getData());
                         return manipulateData(commandContext, dataProvider, dataManipulator, list);
                      }).then(Commands.argument("sourcePath", NbtPathArgument.nbtPath()).executes((commandContext) -> {
diff --git a/src/main/java/net/minecraft/server/dedicated/Settings.java b/src/main/java/net/minecraft/server/dedicated/Settings.java
index 6df1c65b44faebf67fdc467873724a17fde26534..08865a91a22c28593957b06940ea55ea5537ada0 100644
--- a/src/main/java/net/minecraft/server/dedicated/Settings.java
+++ b/src/main/java/net/minecraft/server/dedicated/Settings.java
@@ -91,7 +91,7 @@ public abstract class Settings<T extends Settings<T>> {
    private static <V extends Number> Function<String, V> wrapNumberDeserializer(Function<String, V> function) {
       return (s) -> {
          try {
-            return (Number)function.apply(s);
+            return function.apply(s); // MagmaCube - decompile error
          } catch (NumberFormatException var3) {
             return null;
          }
@@ -135,13 +135,15 @@ public abstract class Settings<T extends Settings<T>> {
       String s2 = this.getStringRaw(s);
       V object2 = (V)MoreObjects.firstNonNull(s2 != null ? function.apply(s2) : null, object);
       this.properties.put(s, function2.apply(object2));
-      return new Settings.MutableValue<>(s, object2, function2);
+      return new Settings.MutableValue(s, object2, function2); // MagmaCube - decompile error
    }
 
    protected <V> V get(String s, Function<String, V> function, UnaryOperator<V> unaryOperator, Function<V, String> function2, V object) {
       return this.get(s, (sx) -> {
-         V object = (V)function.apply(sx);
-         return object != null ? unaryOperator.apply(object) : null;
+         // MagmaCube start - decompile error
+         V obj = (V)function.apply(sx);
+         return obj != null ? unaryOperator.apply(obj) : null;
+         // MagmaCube end - decompile error
       }, function2, object);
    }
 
diff --git a/src/main/java/net/minecraft/server/level/ChunkMap.java b/src/main/java/net/minecraft/server/level/ChunkMap.java
index a874fdcff7a722f43cf7fee5fd8e8cbc519794ef..f2c00dab0695eb3c1739abb4d2282aa653c9cffc 100644
--- a/src/main/java/net/minecraft/server/level/ChunkMap.java
+++ b/src/main/java/net/minecraft/server/level/ChunkMap.java
@@ -196,16 +196,18 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
          ChunkStatus chunkStatus = chunkHolder.getLastAvailableStatus();
          ChunkAccess chunkAccess = chunkHolder.getLastAvailable();
          if (chunkStatus != null) {
-            s = s + "St: ﾂｧ" + chunkStatus.getIndex() + chunkStatus + 'ﾂｧ' + "r\n";
+            s = s + "St: \u00a7" + chunkStatus.getIndex() + chunkStatus + '\u00a7' + "r\n"; // MagmaCube - decompile error
          }
 
          if (chunkAccess != null) {
-            s = s + "Ch: ﾂｧ" + chunkAccess.getStatus().getIndex() + chunkAccess.getStatus() + 'ﾂｧ' + "r\n";
+            s = s + "Ch: \u00a7" + chunkAccess.getStatus().getIndex() + chunkAccess.getStatus() + '\u00a7' + "r\n"; // MagmaCube - decompile error
          }
 
          ChunkHolder.FullChunkStatus fullChunkStatus = chunkHolder.getFullStatus();
-         s = s + "ﾂｧ" + fullChunkStatus.ordinal() + fullChunkStatus;
-         return s + 'ﾂｧ' + "r";
+         // MagmaCube start - decompile error
+         s = s + "\u00a7" + fullChunkStatus.ordinal() + fullChunkStatus;
+         return s + '\u00a7' + "r";
+         // MagmaCube end - decompile error
       }
    }
 
@@ -431,15 +433,15 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
 
                ChunkAccess chunkAccess = (ChunkAccess)optional.get();
                if (chunkAccess.getStatus().isOrAfter(chunkStatus)) {
-                  CompletableFuture<Either<ChunkAccess, ChunkHolder.ChunkLoadingFailure>> completableFuture;
+                  CompletableFuture<Either<ChunkAccess, ChunkHolder.ChunkLoadingFailure>> completableFuture1; // MagmaCube - decompile error
                   if (chunkStatus == ChunkStatus.LIGHT) {
-                     completableFuture = this.scheduleChunkGeneration(chunkHolder, chunkStatus);
+                     completableFuture1 = this.scheduleChunkGeneration(chunkHolder, chunkStatus); // MagmaCube - decompile error
                   } else {
-                     completableFuture = chunkStatus.load(this.level, this.structureManager, this.lightEngine, (chunkAccessx) -> this.protoChunkToFullChunk(chunkHolder), chunkAccess);
+                     completableFuture1 = chunkStatus.load(this.level, this.structureManager, this.lightEngine, (chunkAccessx) -> this.protoChunkToFullChunk(chunkHolder), chunkAccess); // MagmaCube - decompile error
                   }
 
                   this.progressListener.onStatusChange(chunkPos, chunkStatus);
-                  return completableFuture;
+                  return completableFuture1; // MagmaCube - decompile error
                } else {
                   return this.scheduleChunkGeneration(chunkHolder, chunkStatus);
                }
@@ -495,9 +497,9 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
       this.level.getProfiler().incrementCounter((Supplier<String>)(() -> "chunkGenerate " + chunkStatus.getName()));
       return completableFuture.thenComposeAsync((either) -> (CompletableFuture)either.map((list) -> {
             try {
-               CompletableFuture<Either<ChunkAccess, ChunkHolder.ChunkLoadingFailure>> completableFuture = chunkStatus.generate(this.level, this.generator, this.structureManager, this.lightEngine, (chunkAccess) -> this.protoChunkToFullChunk(chunkHolder), list);
+               CompletableFuture<Either<ChunkAccess, ChunkHolder.ChunkLoadingFailure>> completableFuture1 = chunkStatus.generate(this.level, this.generator, this.structureManager, this.lightEngine, (chunkAccess) -> this.protoChunkToFullChunk(chunkHolder), list); // MagmaCube - decompile error
                this.progressListener.onStatusChange(chunkPos, chunkStatus);
-               return completableFuture;
+               return completableFuture1; // MagmaCube - decompile error
             } catch (Exception var8) {
                CrashReport crashReport = CrashReport.forThrowable(var8, "Exception generating new chunk");
                CrashReportCategory crashReportCategory = crashReport.addCategory("Chunk to be generated");
@@ -547,7 +549,7 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
                levelChunk.setLoaded(true);
                this.level.addAllPendingBlockEntities(levelChunk.getBlockEntities().values());
                List<Entity> list = null;
-               ClassInstanceMultiMap[] var6 = levelChunk.getEntitySections();
+               ClassInstanceMultiMap<Entity>[] var6 = levelChunk.getEntitySections(); // MagmaCube - type
                int var7 = var6.length;
 
                for(int var8 = 0; var8 < var7; ++var8) {
@@ -670,9 +672,11 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
             ChunkPos chunkPos = chunkHolder.getPos();
             Packet<?>[] packets = new Packet[2];
             this.getPlayers(chunkPos, false).forEach((serverPlayer) -> {
-               int i2 = checkerboardDistance(chunkPos, serverPlayer, true);
-               boolean flag = i2 <= i3;
-               boolean flag2 = i2 <= this.viewDistance;
+               // MagmaCube start - decompile error
+               int i21 = checkerboardDistance(chunkPos, serverPlayer, true);
+               boolean flag = i21 <= i3;
+               boolean flag2 = i21 <= this.viewDistance;
+               // MagmaCube end - decompile error
                this.updateChunkTracking(serverPlayer, chunkPos, packets, flag, flag2);
             });
          }
@@ -801,7 +805,7 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
          }
       }
 
-      int i = Mth.floor(serverPlayer.getX()) >> 4;
+      int i1 = Mth.floor(serverPlayer.getX()) >> 4; // MagmaCube - decompile error
       int i2 = Mth.floor(serverPlayer.getZ()) >> 4;
       SectionPos sectionPos = serverPlayer.getLastSectionPos();
       SectionPos sectionPos2 = SectionPos.of(serverPlayer);
@@ -835,17 +839,19 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
 
       int i3 = sectionPos.x();
       int i4 = sectionPos.z();
-      if (Math.abs(i3 - i) <= this.viewDistance * 2 && Math.abs(i4 - i2) <= this.viewDistance * 2) {
-         int i5 = Math.min(i, i3) - this.viewDistance;
+      // MagmaCube start - decompile error
+      if (Math.abs(i3 - i1) <= this.viewDistance * 2 && Math.abs(i4 - i2) <= this.viewDistance * 2) {
+         int i5 = Math.min(i1, i3) - this.viewDistance;
          int i6 = Math.min(i2, i4) - this.viewDistance;
-         int i7 = Math.max(i, i3) + this.viewDistance;
+         int i7 = Math.max(i1, i3) + this.viewDistance;
+         // MagmaCube end - decompile error
          int i8 = Math.max(i2, i4) + this.viewDistance;
 
          for(int i9 = i5; i9 <= i7; ++i9) {
             for(int i10 = i6; i10 <= i8; ++i10) {
                ChunkPos chunkPos = new ChunkPos(i9, i10);
                boolean flag4 = checkerboardDistance(chunkPos, i3, i4) <= this.viewDistance;
-               boolean flag5 = checkerboardDistance(chunkPos, i, i2) <= this.viewDistance;
+               boolean flag5 = checkerboardDistance(chunkPos, i1, i2) <= this.viewDistance; // MagmaCube - decompile error
                this.updateChunkTracking(serverPlayer, chunkPos, new Packet[2], flag4, flag5);
             }
          }
@@ -859,7 +865,7 @@ public class ChunkMap extends ChunkStorage implements ChunkHolder.PlayerProvider
             }
          }
 
-         for(int i13 = i - this.viewDistance; i13 <= i + this.viewDistance; ++i13) {
+         for(int i13 = i1 - this.viewDistance; i13 <= i1 + this.viewDistance; ++i13) { // MagmaCube - decompile error
             for(int i14 = i2 - this.viewDistance; i14 <= i2 + this.viewDistance; ++i14) {
                ChunkPos chunkPos3 = new ChunkPos(i13, i14);
                boolean flag8 = false;
diff --git a/src/main/java/net/minecraft/server/level/ChunkTaskPriorityQueueSorter.java b/src/main/java/net/minecraft/server/level/ChunkTaskPriorityQueueSorter.java
index 1e8405085db06baf9aeb6ad7ce219eea9a4f41ae..cacf5f04e2729e7c6bea8ec53677ecc0e020ce79 100644
--- a/src/main/java/net/minecraft/server/level/ChunkTaskPriorityQueueSorter.java
+++ b/src/main/java/net/minecraft/server/level/ChunkTaskPriorityQueueSorter.java
@@ -36,7 +36,7 @@ public class ChunkTaskPriorityQueueSorter implements AutoCloseable, ChunkHolder.
    }
 
    public static ChunkTaskPriorityQueueSorter.Message<Runnable> message(Runnable runnable, long l, IntSupplier intSupplier) {
-      return new ChunkTaskPriorityQueueSorter.Message((processorHandle) -> () -> {
+      return new ChunkTaskPriorityQueueSorter.Message<>((processorHandle) -> () -> { // MagmaCube - decompile error
             runnable.run();
             processorHandle.tell(Unit.INSTANCE);
          }, l, intSupplier);
@@ -51,14 +51,15 @@ public class ChunkTaskPriorityQueueSorter implements AutoCloseable, ChunkHolder.
    }
 
    public <T> ProcessorHandle<ChunkTaskPriorityQueueSorter.Message<T>> getProcessor(ProcessorHandle<T> processorHandle, boolean flag) {
-      return (ProcessorHandle)this.mailbox.ask((processorHandle2) -> new StrictQueue.IntRunnable(0, () -> {
+      return this.mailbox.<ProcessorHandle<Message<T>>>ask((processorHandle2) -> new StrictQueue.IntRunnable(0, () -> { // MagmaCube - decompile error
             this.getQueue(processorHandle);
             processorHandle2.tell(ProcessorHandle.of("chunk priority sorter around " + processorHandle.name(), (message) -> this.submit(processorHandle, message.task, message.pos, message.level, flag)));
          })).join();
    }
 
    public ProcessorHandle<ChunkTaskPriorityQueueSorter.Release> getReleaseProcessor(ProcessorHandle<Runnable> processorHandle) {
-      return (ProcessorHandle)this.mailbox.ask((processorHandle2) -> new StrictQueue.IntRunnable(0, () -> processorHandle2.tell(ProcessorHandle.of("chunk priority sorter around " + processorHandle.name(), (release) -> this.release(processorHandle, release.pos, release.task, release.clearQueue))))).join();
+      // MagmaCube - decompile error
+      return this.mailbox.<ProcessorHandle<ChunkTaskPriorityQueueSorter.Release>>ask((processorHandle2) -> new StrictQueue.IntRunnable(0, () -> processorHandle2.tell(ProcessorHandle.of("chunk priority sorter around " + processorHandle.name(), (release) -> this.release(processorHandle, release.pos, release.task, release.clearQueue))))).join();
    }
 
    public void onLevelChange(ChunkPos chunkPos, IntSupplier intSupplier, int i, IntConsumer intConsumer) {
@@ -115,9 +116,9 @@ public class ChunkTaskPriorityQueueSorter implements AutoCloseable, ChunkHolder.
    private <T> ChunkTaskPriorityQueue<Function<ProcessorHandle<Unit>, T>> getQueue(ProcessorHandle<T> processorHandle) {
       ChunkTaskPriorityQueue<? extends Function<ProcessorHandle<Unit>, ?>> chunkTaskPriorityQueue = (ChunkTaskPriorityQueue)this.queues.get(processorHandle);
       if (chunkTaskPriorityQueue == null) {
-         throw (IllegalArgumentException)Util.pauseInIde((T)(new IllegalArgumentException("No queue for: " + processorHandle)));
+         throw (IllegalArgumentException)Util.pauseInIde((new IllegalArgumentException("No queue for: " + processorHandle))); // MagmaCube - decompile error
       } else {
-         return chunkTaskPriorityQueue;
+         return (ChunkTaskPriorityQueue<Function<ProcessorHandle<Unit>, T>>) chunkTaskPriorityQueue; // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/server/level/DistanceManager.java b/src/main/java/net/minecraft/server/level/DistanceManager.java
index 84e0436440365a8e00fb503ba3e02b87b4a29151..b1450dc058f5de6ce7295b8a762cf99521895bcf 100644
--- a/src/main/java/net/minecraft/server/level/DistanceManager.java
+++ b/src/main/java/net/minecraft/server/level/DistanceManager.java
@@ -61,7 +61,7 @@ public abstract class DistanceManager {
 
       while(objectIterator.hasNext()) {
          Entry<SortedArraySet<Ticket<?>>> entry = (Entry)objectIterator.next();
-         if (((SortedArraySet)entry.getValue()).removeIf((ticket) -> ticket.timedOut(this.ticketTickCounter))) {
+         if ((entry.getValue()).removeIf((ticket) -> ticket.timedOut(this.ticketTickCounter))) { // MagmaCube - decompile error
             this.ticketTracker.update(entry.getLongKey(), getTicketLevelAt((SortedArraySet)entry.getValue()), false);
          }
 
diff --git a/src/main/java/net/minecraft/server/level/ServerChunkCache.java b/src/main/java/net/minecraft/server/level/ServerChunkCache.java
index ee7b08c2f1dc820d5a7216dc0c742fdb1a611acd..91745054fe415e186fb4e5c6206541461f238b4a 100644
--- a/src/main/java/net/minecraft/server/level/ServerChunkCache.java
+++ b/src/main/java/net/minecraft/server/level/ServerChunkCache.java
@@ -185,7 +185,7 @@ public class ServerChunkCache extends ChunkSource {
          completableFuture = this.getChunkFutureMainThread(i, i2, chunkStatus, flag);
          this.mainThreadProcessor.managedBlock(completableFuture::isDone);
       } else {
-         completableFuture = CompletableFuture.supplyAsync(() -> this.getChunkFutureMainThread(i, i2, chunkStatus, flag), this.mainThreadProcessor).thenCompose((completableFuture) -> completableFuture);
+         completableFuture = CompletableFuture.supplyAsync(() -> this.getChunkFutureMainThread(i, i2, chunkStatus, flag), this.mainThreadProcessor).thenCompose((completableFuturex) -> completableFuturex); // MagmaCube - decompile error
       }
 
       return completableFuture;
diff --git a/src/main/java/net/minecraft/server/level/ServerLevel.java b/src/main/java/net/minecraft/server/level/ServerLevel.java
index 7dbf9e6195cfa9f8f6dcd640a763a11fdbcffb9e..e8cb0100ea4effd23efa906a506363a911710fc8 100644
--- a/src/main/java/net/minecraft/server/level/ServerLevel.java
+++ b/src/main/java/net/minecraft/server/level/ServerLevel.java
@@ -427,7 +427,7 @@ public class ServerLevel extends Level implements WorldGenLevel {
    }
 
    private void wakeUpAllPlayers() {
-      ((List)this.players.stream().filter(LivingEntity::isSleeping).collect(Collectors.toList())).forEach((serverPlayer) -> serverPlayer.stopSleepInBed(false, false));
+      ((List)this.players.stream().filter(LivingEntity::isSleeping).collect(Collectors.toList())).forEach((serverPlayer) -> ((ServerPlayer) serverPlayer).stopSleepInBed(false, false)); // MagmaCube - decompile error
    }
 
    public void tickChunk(LevelChunk levelChunk, int i) {
@@ -846,7 +846,7 @@ public class ServerLevel extends Level implements WorldGenLevel {
 
    public void unload(LevelChunk levelChunk) {
       this.blockEntitiesToUnload.addAll(levelChunk.getBlockEntities().values());
-      ClassInstanceMultiMap[] var2 = levelChunk.getEntitySections();
+      ClassInstanceMultiMap<Entity>[] var2 = levelChunk.getEntitySections(); // MagmaCube - type
       int var3 = var2.length;
 
       for(int var4 = 0; var4 < var3; ++var4) {
@@ -1299,8 +1299,8 @@ public class ServerLevel extends Level implements WorldGenLevel {
 
       }
 
-      Path path2 = path.resolve("chunks.csv");
-      Writer writer3 = Files.newBufferedWriter(path2);
+      Path path2x = path.resolve("chunks.csv"); // MagmaCube - decompile error
+      Writer writer3 = Files.newBufferedWriter(path2x); // MagmaCube - decompile error
       Throwable var129 = null;
 
       try {
@@ -1453,7 +1453,7 @@ public class ServerLevel extends Level implements WorldGenLevel {
             object2IntOpenHashMap.addTo(resourceLocation, 1);
          }
 
-         return (String)object2IntOpenHashMap.object2IntEntrySet().stream().sorted(Comparator.comparing(it.unimi.dsi.fastutil.objects.Object2IntMap.Entry::getIntValue).reversed()).limit(5L).map((entry) -> entry.getKey() + ":" + entry.getIntValue()).collect(Collectors.joining(","));
+         return (String)object2IntOpenHashMap.object2IntEntrySet().stream().sorted(Comparator.comparing(it.unimi.dsi.fastutil.objects.Object2IntMap.Entry<ResourceLocation>::getIntValue).reversed()).limit(5L).map((entry) -> entry.getKey() + ":" + entry.getIntValue()).collect(Collectors.joining(",")); // MagmaCube - type
       } catch (Exception var6) {
          return "";
       }
diff --git a/src/main/java/net/minecraft/server/level/ServerPlayer.java b/src/main/java/net/minecraft/server/level/ServerPlayer.java
index bc8c08c69f480411b7300bc48dd7dac7e51444c1..3ee14c544636ec8dc454fa37cb8fcd9bf4688d4f 100644
--- a/src/main/java/net/minecraft/server/level/ServerPlayer.java
+++ b/src/main/java/net/minecraft/server/level/ServerPlayer.java
@@ -1213,7 +1213,7 @@ public class ServerPlayer extends Player implements ContainerListener {
    }
 
    public void cancelRemoveEntity(Entity entity) {
-      this.entitiesToRemove.remove(entity.getId());
+      this.entitiesToRemove.remove(Integer.valueOf(entity.getId())); // MagmaCube - decompile error
    }
 
    protected void updateInvisibilityStatus() {
diff --git a/src/main/java/net/minecraft/server/level/Ticket.java b/src/main/java/net/minecraft/server/level/Ticket.java
index 871755edc0f37226f9a4e1577cc617c6abc606a9..b0867baf435be943d9e632cc6515344a414d3118 100644
--- a/src/main/java/net/minecraft/server/level/Ticket.java
+++ b/src/main/java/net/minecraft/server/level/Ticket.java
@@ -20,7 +20,7 @@ public final class Ticket<T> implements Comparable<Ticket<?>> {
          return i;
       } else {
          int i2 = Integer.compare(System.identityHashCode(this.type), System.identityHashCode(ticket.type));
-         return i2 != 0 ? i2 : this.type.getComparator().compare(this.key, ticket.key);
+         return i2 != 0 ? i2 : this.type.getComparator().compare(this.key, (T) ticket.key); // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/server/network/LegacyQueryHandler.java b/src/main/java/net/minecraft/server/network/LegacyQueryHandler.java
index adf216b512867283b9d6a294239c8eda2b2bfaa1..6267078cefa27e8a2f2e4dbc35137584734e6fac 100644
--- a/src/main/java/net/minecraft/server/network/LegacyQueryHandler.java
+++ b/src/main/java/net/minecraft/server/network/LegacyQueryHandler.java
@@ -32,7 +32,7 @@ public class LegacyQueryHandler extends ChannelInboundHandlerAdapter {
             switch(i) {
             case 0:
                LOGGER.debug("Ping: (<1.3.x) from {}:{}", inetSocketAddress.getAddress(), inetSocketAddress.getPort());
-               String s = String.format("%sﾂｧ%dﾂｧ%d", minecraftServer.getMotd(), minecraftServer.getPlayerCount(), minecraftServer.getMaxPlayers());
+               String s = String.format("%s\u00a7%d\u00a7%d", minecraftServer.getMotd(), minecraftServer.getPlayerCount(), minecraftServer.getMaxPlayers());
                this.sendFlushAndClose(channelHandlerContext, this.createReply(s));
                break;
             case 1:
@@ -41,7 +41,7 @@ public class LegacyQueryHandler extends ChannelInboundHandlerAdapter {
                }
 
                LOGGER.debug("Ping: (1.4-1.5.x) from {}:{}", inetSocketAddress.getAddress(), inetSocketAddress.getPort());
-               String s2 = String.format("ﾂｧ1\u0000%d\u0000%s\u0000%s\u0000%d\u0000%d", 127, minecraftServer.getServerVersion(), minecraftServer.getMotd(), minecraftServer.getPlayerCount(), minecraftServer.getMaxPlayers());
+               String s2 = String.format("\u00a71\u0000%d\u0000%s\u0000%s\u0000%d\u0000%d", 127, minecraftServer.getServerVersion(), minecraftServer.getMotd(), minecraftServer.getPlayerCount(), minecraftServer.getMaxPlayers());
                this.sendFlushAndClose(channelHandlerContext, this.createReply(s2));
                break;
             default:
@@ -58,7 +58,7 @@ public class LegacyQueryHandler extends ChannelInboundHandlerAdapter {
                }
 
                LOGGER.debug("Ping: (1.6) from {}:{}", inetSocketAddress.getAddress(), inetSocketAddress.getPort());
-               String s3 = String.format("ﾂｧ1\u0000%d\u0000%s\u0000%s\u0000%d\u0000%d", 127, minecraftServer.getServerVersion(), minecraftServer.getMotd(), minecraftServer.getPlayerCount(), minecraftServer.getMaxPlayers());
+               String s3 = String.format("\u00a71\u0000%d\u0000%s\u0000%s\u0000%d\u0000%d", 127, minecraftServer.getServerVersion(), minecraftServer.getMotd(), minecraftServer.getPlayerCount(), minecraftServer.getMaxPlayers());
                ByteBuf byteBuf2 = this.createReply(s3);
 
                try {
diff --git a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
index 734c87961b67cae94fec7cb340ebee3b35e65ebb..c2ce34609f594889dfb431908597fee83627d4c1 100644
--- a/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
+++ b/src/main/java/net/minecraft/server/network/ServerGamePacketListenerImpl.java
@@ -309,7 +309,7 @@ public class ServerGamePacketListenerImpl implements ServerGamePacketListener {
       };
       TextFilter textFilter = this.player.getTextFilter();
       if (textFilter != null) {
-         ((CompletableFuture)biFunction.apply(textFilter, object)).thenAcceptAsync((optional) -> optional.ifPresent(consumer2), blockableEventLoop);
+         (biFunction.apply(textFilter, object)).thenAcceptAsync((optional) -> optional.ifPresent(consumer2), blockableEventLoop); // MagmaCube - decompile error
       } else {
          blockableEventLoop.execute(() -> consumer2.accept(object));
       }
diff --git a/src/main/java/net/minecraft/server/network/TextFilterClient.java b/src/main/java/net/minecraft/server/network/TextFilterClient.java
index 0485592ea10d72407ba3cd69184f409165007760..dcf82351d30f596f4210125ccb714b1dc61fe2c4 100644
--- a/src/main/java/net/minecraft/server/network/TextFilterClient.java
+++ b/src/main/java/net/minecraft/server/network/TextFilterClient.java
@@ -35,14 +35,16 @@ public class TextFilterClient implements AutoCloseable {
       thread.setName("Chat-Filter-Worker-" + WORKER_COUNT.getAndIncrement());
       return thread;
    };
-   private final URL chatEndpoint;
-   private final URL joinEndpoint;
-   private final URL leaveEndpoint;
-   private final String authKey;
-   private final int ruleId;
-   private final String serverId;
-   private final TextFilterClient.IgnoreStrategy chatIgnoreStrategy;
-   private final ExecutorService workerPool;
+   // MagmaCube start - decompile error
+   private final URL chatEndpoint = null;
+   private final URL joinEndpoint = null;
+   private final URL leaveEndpoint = null;
+   private final String authKey = null;
+   private final int ruleId = 0;
+   private final String serverId = null;
+   private final TextFilterClient.IgnoreStrategy chatIgnoreStrategy = null;
+   private final ExecutorService workerPool = null;
+   // MagmaCube end - decompile error
 
    private void processJoinOrLeave(GameProfile gameProfile, URL uRL, Executor executor) {
       JsonObject jsonObject = new JsonObject();
@@ -266,7 +268,7 @@ public class TextFilterClient implements AutoCloseable {
 
       public CompletableFuture<Optional<List<String>>> processMessageBundle(List<String> list) {
          List<CompletableFuture<Optional<String>>> list2 = (List)list.stream().map((s) -> TextFilterClient.this.requestMessageProcessing(this.profile, s, TextFilterClient.this.chatIgnoreStrategy, this.streamExecutor)).collect(ImmutableList.toImmutableList());
-         return Util.sequence(list2).thenApply((listx) -> Optional.of(listx.stream().map((optional) -> (String)optional.orElse("")).collect(ImmutableList.toImmutableList()))).exceptionally((throwable) -> Optional.empty());
+         return (CompletableFuture) Util.sequence(list2).thenApply((listx) -> Optional.of(listx.stream().map((optional) -> (String)optional.orElse("")).collect(ImmutableList.toImmutableList()))).exceptionally((throwable) -> Optional.empty()); // MagmaCube - decompile error
       }
 
       public CompletableFuture<Optional<String>> processStreamMessage(String s) {
diff --git a/src/main/java/net/minecraft/server/packs/FolderPackResources.java b/src/main/java/net/minecraft/server/packs/FolderPackResources.java
index ebfd5b0b7cb3613934f226f6b8f49204dacfd229..9b765a802cffdd13a048e2796d302710212aeff6 100644
--- a/src/main/java/net/minecraft/server/packs/FolderPackResources.java
+++ b/src/main/java/net/minecraft/server/packs/FolderPackResources.java
@@ -4,6 +4,7 @@ import com.google.common.base.CharMatcher;
 import com.google.common.collect.Lists;
 import com.google.common.collect.Sets;
 import java.io.File;
+import java.io.FileFilter; // MagmaCube
 import java.io.FileInputStream;
 import java.io.IOException;
 import java.io.InputStream;
@@ -67,7 +68,7 @@ public class FolderPackResources extends AbstractPackResources {
    public Set<String> getNamespaces(PackType packType) {
       Set<String> set = Sets.newHashSet();
       File file = new File(this.file, packType.getDirectory());
-      File[] files = file.listFiles(DirectoryFileFilter.DIRECTORY);
+      File[] files = file.listFiles((FileFilter) DirectoryFileFilter.DIRECTORY); // MagmaCube - decompile error
       if (files != null) {
          for(File file2 : files) {
             String s = getRelativePath(file, file2);
diff --git a/src/main/java/net/minecraft/server/packs/resources/ProfiledReloadInstance.java b/src/main/java/net/minecraft/server/packs/resources/ProfiledReloadInstance.java
index 91b6a9b62a53acdeb186826bcd33d67c43539ed6..0f77629df62d385a54b0c89aa537f8a83aaf4966 100644
--- a/src/main/java/net/minecraft/server/packs/resources/ProfiledReloadInstance.java
+++ b/src/main/java/net/minecraft/server/packs/resources/ProfiledReloadInstance.java
@@ -23,7 +23,7 @@ public class ProfiledReloadInstance extends SimpleReloadInstance<ProfiledReloadI
          AtomicLong atomicLong2 = new AtomicLong();
          ActiveProfiler activeProfiler = new ActiveProfiler(Util.timeSource, () -> 0, false);
          ActiveProfiler activeProfiler2 = new ActiveProfiler(Util.timeSource, () -> 0, false);
-         CompletableFuture<Void> completableFuture = preparableReloadListener.reload(preparationBarrier, resourceManagerx, activeProfiler, activeProfiler2, (runnable) -> executor2x.execute(() -> {
+         CompletableFuture<Void> completableFuturex = preparableReloadListener.reload(preparationBarrier, resourceManagerx, activeProfiler, activeProfiler2, (runnable) -> executor2x.execute(() -> { // MagmaCube - decompile error
                long l = Util.getNanos();
                runnable.run();
                atomicLong.addAndGet(Util.getNanos() - l);
@@ -32,7 +32,7 @@ public class ProfiledReloadInstance extends SimpleReloadInstance<ProfiledReloadI
                runnable.run();
                atomicLong2.addAndGet(Util.getNanos() - l);
             }));
-         return completableFuture.thenApplyAsync((void_) -> new ProfiledReloadInstance.State(preparableReloadListener.getName(), activeProfiler.getResults(), activeProfiler2.getResults(), atomicLong, atomicLong2), executor2);
+         return completableFuturex.thenApplyAsync((void_) -> new ProfiledReloadInstance.State(preparableReloadListener.getName(), activeProfiler.getResults(), activeProfiler2.getResults(), atomicLong, atomicLong2), executor2); // MagmaCube - decompile error
       }, completableFuture);
       this.total.start();
       this.allDone.thenAcceptAsync(this::finish, executor2);
diff --git a/src/main/java/net/minecraft/server/players/GameProfileCache.java b/src/main/java/net/minecraft/server/players/GameProfileCache.java
index fe652d0d61bd53ded40b31b4b8352200ac505ef1..246047a3cc9e252ebe8a2eeb5091893def8f221a 100644
--- a/src/main/java/net/minecraft/server/players/GameProfileCache.java
+++ b/src/main/java/net/minecraft/server/players/GameProfileCache.java
@@ -170,9 +170,9 @@ public class GameProfileCache {
          try {
             JsonArray jsonArray = (JsonArray)this.gson.fromJson(reader, JsonArray.class);
             if (jsonArray != null) {
-               DateFormat dateFormat = createDateFormat();
+               DateFormat dateFormatx = createDateFormat(); // MagmaCube - decompile error
                jsonArray.forEach((jsonElement) -> {
-                  GameProfileCache.GameProfileInfo gameProfileInfo = readGameProfile(jsonElement, dateFormat);
+                  GameProfileCache.GameProfileInfo gameProfileInfo = readGameProfile(jsonElement, dateFormatx); // MagmaCube - decompile error
                   if (gameProfileInfo != null) {
                      list.add(gameProfileInfo);
                   }
diff --git a/src/main/java/net/minecraft/server/players/StoredUserList.java b/src/main/java/net/minecraft/server/players/StoredUserList.java
index ec2afef171f8365972532db1370324ddbe8a8c0d..2eda9aa6d38014116a5f8d302009bf80063abf61 100644
--- a/src/main/java/net/minecraft/server/players/StoredUserList.java
+++ b/src/main/java/net/minecraft/server/players/StoredUserList.java
@@ -146,7 +146,7 @@ public abstract class StoredUserList<K, V extends StoredUserEntry<K>> {
                JsonObject jsonObject = GsonHelper.convertToJsonObject(jsonElement, "entry");
                StoredUserEntry<K> storedUserEntry = this.createEntry(jsonObject);
                if (storedUserEntry.getUser() != null) {
-                  this.map.put(this.getKeyForUser(storedUserEntry.getUser()), storedUserEntry);
+                  this.map.put(this.getKeyForUser(storedUserEntry.getUser()), (V) storedUserEntry); // MagmaCube - decompile error
                }
             }
          } catch (Throwable var15) {
diff --git a/src/main/java/net/minecraft/stats/ServerStatsCounter.java b/src/main/java/net/minecraft/stats/ServerStatsCounter.java
index 9521d8b06a09a7cdf621689d7b773b01669cdc70..516c0a9eac2d911ba8b85509b1a0e6d6bf6ad844 100644
--- a/src/main/java/net/minecraft/stats/ServerStatsCounter.java
+++ b/src/main/java/net/minecraft/stats/ServerStatsCounter.java
@@ -97,15 +97,16 @@ public class ServerStatsCounter extends StatsCounter {
                   for(String s2 : compoundTag2.getAllKeys()) {
                      if (compoundTag2.contains(s2, 10)) {
                         Util.ifElse(Registry.STAT_TYPE.getOptional(new ResourceLocation(s2)), (statType) -> {
-                           CompoundTag compoundTag2 = compoundTag2.getCompound(s2);
-
-                           for(String s2 : compoundTag2.getAllKeys()) {
-                              if (compoundTag2.contains(s2, 99)) {
-                                 Util.ifElse(this.getStat(statType, s2), (stat) -> this.stats.put(stat, compoundTag2.getInt(s2)), () -> LOGGER.warn("Invalid statistic in {}: Don't know what {} is", this.file, s2));
+                           // MagmaCube start - decompile error
+                           CompoundTag compoundTag21 = compoundTag2.getCompound(s2);
+                           for(String s3 : compoundTag21.getAllKeys()) {
+                              if (compoundTag21.contains(s3, 99)) {
+                                 Util.ifElse(this.getStat(statType, s3), (stat) -> this.stats.put(stat, compoundTag21.getInt(s3)), () -> LOGGER.warn("Invalid statistic in {}: Don't know what {} is", this.file, s3));
                               } else {
-                                 LOGGER.warn("Invalid statistic value in {}: Don't know what {} is for key {}", this.file, compoundTag2.get(s2), s2);
+                                 LOGGER.warn("Invalid statistic value in {}: Don't know what {} is for key {}", this.file, compoundTag21.get(s3), s3);
                               }
                            }
+                           // MagmaCube end - decompile error
 
                         }, () -> LOGGER.warn("Invalid statistic type in {}: Don't know what {} is", this.file, s2));
                      }
@@ -171,14 +172,14 @@ public class ServerStatsCounter extends StatsCounter {
          ((JsonObject)map.computeIfAbsent(stat.getType(), (statType) -> new JsonObject())).addProperty(getKey(stat).toString(), entry.getIntValue());
       }
 
-      JsonObject jsonObject = new JsonObject();
+      JsonObject jsonObject1 = new JsonObject(); // MagmaCube - decompile error
 
       for(Entry<StatType<?>, JsonObject> entry2 : map.entrySet()) {
-         jsonObject.add(Registry.STAT_TYPE.getKey((StatType<?>)entry2.getKey()).toString(), (JsonElement)entry2.getValue());
+         jsonObject1.add(Registry.STAT_TYPE.getKey((StatType<?>)entry2.getKey()).toString(), (JsonElement)entry2.getValue()); // MagmaCube - decompile error
       }
 
       JsonObject jsonObject2 = new JsonObject();
-      jsonObject2.add("stats", jsonObject);
+      jsonObject2.add("stats", jsonObject1); // MagmaCube - decompile error
       jsonObject2.addProperty("DataVersion", SharedConstants.getCurrentVersion().getWorldVersion());
       return jsonObject2.toString();
    }
diff --git a/src/main/java/net/minecraft/tags/Tag.java b/src/main/java/net/minecraft/tags/Tag.java
index 5e442376b8cc555cf37bf3c9a4a952bca99bb2da..08308d7ff660b6e7eaded6c98da38d9e07b82ab7 100644
--- a/src/main/java/net/minecraft/tags/Tag.java
+++ b/src/main/java/net/minecraft/tags/Tag.java
@@ -20,7 +20,8 @@ import net.minecraft.util.GsonHelper;
 
 public interface Tag<T> {
    static <T> Codec<Tag<T>> codec(Supplier<TagCollection<T>> supplier) {
-      return ResourceLocation.CODEC.flatXmap((resourceLocation) -> (DataResult)Optional.ofNullable(((TagCollection)supplier.get()).getTag(resourceLocation)).map(DataResult::success).orElseGet(() -> DataResult.error("Unknown tag: " + resourceLocation)), (tag) -> (DataResult)Optional.ofNullable(((TagCollection)supplier.get()).getId(tag)).map(DataResult::success).orElseGet(() -> DataResult.error("Unknown tag: " + tag)));
+      // MagmaCube - decompile error
+      return ResourceLocation.CODEC.flatXmap((resourceLocation) -> Optional.ofNullable((supplier.get()).getTag(resourceLocation)).map(DataResult::success).orElseGet(() -> DataResult.error("Unknown tag: " + resourceLocation)), (tag) -> Optional.ofNullable((supplier.get()).getId(tag)).map(DataResult::success).orElseGet(() -> DataResult.error("Unknown tag: " + tag)));
    }
 
    boolean contains(T var1);
diff --git a/src/main/java/net/minecraft/tags/TagCollection.java b/src/main/java/net/minecraft/tags/TagCollection.java
index 6f835d46193bc51fad13c4ad29f48c9a5222cb52..e5c56669addbc31028c6f3409f393afd0e564214 100644
--- a/src/main/java/net/minecraft/tags/TagCollection.java
+++ b/src/main/java/net/minecraft/tags/TagCollection.java
@@ -62,7 +62,7 @@ public interface TagCollection<T> {
          friendlyByteBuf.writeResourceLocation((ResourceLocation)entry.getKey());
          friendlyByteBuf.writeVarInt(((Tag)entry.getValue()).getValues().size());
 
-         for(T object : ((Tag)entry.getValue()).getValues()) {
+         for(T object : (entry.getValue()).getValues()) { // MagmaCube - decompile error
             friendlyByteBuf.writeVarInt(defaultedRegistry.getId(object));
          }
       }
diff --git a/src/main/java/net/minecraft/tags/TagLoader.java b/src/main/java/net/minecraft/tags/TagLoader.java
index 0f961d309b9c87425330b1149ca38701baf6d721..76c7c2d12ece0629c03262ba2614eb1a526d29ee 100644
--- a/src/main/java/net/minecraft/tags/TagLoader.java
+++ b/src/main/java/net/minecraft/tags/TagLoader.java
@@ -117,7 +117,7 @@ public class TagLoader<T> {
    public TagCollection<T> load(Map<ResourceLocation, Tag.Builder> map) {
       Map<ResourceLocation, Tag<T>> map2 = Maps.newHashMap();
       Function<ResourceLocation, Tag<T>> function = map2::get;
-      Function<ResourceLocation, T> function2 = (resourceLocation) -> ((Optional)this.idToValue.apply(resourceLocation)).orElse(null);
+      Function<ResourceLocation, T> function2 = (resourceLocation) -> (this.idToValue.apply(resourceLocation)).orElse(null); // MagmaCube - decompile error
 
       while(!map.isEmpty()) {
          boolean flag = false;
diff --git a/src/main/java/net/minecraft/util/ClassInstanceMultiMap.java b/src/main/java/net/minecraft/util/ClassInstanceMultiMap.java
index c53da1ac082603b9712657788c7d4e8cc81d021d..554e10483711b4bc009cbaf67ac2bc52654ec170 100644
--- a/src/main/java/net/minecraft/util/ClassInstanceMultiMap.java
+++ b/src/main/java/net/minecraft/util/ClassInstanceMultiMap.java
@@ -57,7 +57,7 @@ public class ClassInstanceMultiMap<T> extends AbstractCollection<T> {
          throw new IllegalArgumentException("Don't know how to search for " + clazz);
       } else {
          List<T> list = (List)this.byClass.computeIfAbsent(clazz, (clazzx) -> (List)this.allInstances.stream().filter(clazzx::isInstance).collect(Collectors.toList()));
-         return Collections.unmodifiableCollection(list);
+         return (Collection<S>) Collections.unmodifiableCollection(list); // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/util/DirectoryLock.java b/src/main/java/net/minecraft/util/DirectoryLock.java
index 9e64c5b3581647ac7e760c5338463b6c23a81225..207516be629c79dba0d2ef529886391fea8a4ef8 100644
--- a/src/main/java/net/minecraft/util/DirectoryLock.java
+++ b/src/main/java/net/minecraft/util/DirectoryLock.java
@@ -75,7 +75,7 @@ public class DirectoryLock implements AutoCloseable {
          FileChannel fileChannel = FileChannel.open(path2, StandardOpenOption.WRITE);
          Throwable var3 = null;
 
-         Throwable var6;
+         boolean var6; // MagmaCube - decompile error
          try {
             FileLock fileLock = fileChannel.tryLock();
             Throwable var5 = null;
@@ -83,8 +83,6 @@ public class DirectoryLock implements AutoCloseable {
             try {
                var6 = fileLock == null;
             } catch (Throwable var33) {
-               var6 = var33;
-               var5 = var33;
                throw var33;
             } finally {
                if (fileLock != null) {
@@ -101,7 +99,6 @@ public class DirectoryLock implements AutoCloseable {
 
             }
          } catch (Throwable var35) {
-            var3 = var35;
             throw var35;
          } finally {
             if (fileChannel != null) {
diff --git a/src/main/java/net/minecraft/util/LowerCaseEnumTypeAdapterFactory.java b/src/main/java/net/minecraft/util/LowerCaseEnumTypeAdapterFactory.java
index 8473be2ec84e281c54e7b83224988e49c8fb5f6f..8e301c186de7b919dc6d7ea481cfc25e39727b23 100644
--- a/src/main/java/net/minecraft/util/LowerCaseEnumTypeAdapterFactory.java
+++ b/src/main/java/net/minecraft/util/LowerCaseEnumTypeAdapterFactory.java
@@ -16,7 +16,7 @@ import javax.annotation.Nullable;
 public class LowerCaseEnumTypeAdapterFactory implements TypeAdapterFactory {
    @Nullable
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> typeToken) {
-      Class<T> clazz = typeToken.getRawType();
+      Class<T> clazz = (Class<T>) typeToken.getRawType(); // MagmaCube - decompile error
       if (!clazz.isEnum()) {
          return null;
       } else {
diff --git a/src/main/java/net/minecraft/util/StringRepresentable.java b/src/main/java/net/minecraft/util/StringRepresentable.java
index bf11a39f89e40455d1f9515499e0d6f72fd2ac6e..40ce1531926882bd82448966b0e208598e555280 100644
--- a/src/main/java/net/minecraft/util/StringRepresentable.java
+++ b/src/main/java/net/minecraft/util/StringRepresentable.java
@@ -18,7 +18,7 @@ public interface StringRepresentable {
    String getSerializedName();
 
    static <E extends Enum<E> & StringRepresentable> Codec<E> fromEnum(Supplier<E[]> supplier, Function<? super String, ? extends E> function) {
-      E[] enums = (Enum[])supplier.get();
+      E[] enums = supplier.get(); // MagmaCube - decompile error
       return fromStringResolver(Enum::ordinal, (i) -> enums[i], function);
    }
 
diff --git a/src/main/java/net/minecraft/util/UniformInt.java b/src/main/java/net/minecraft/util/UniformInt.java
index eb8608af49e9f3d73a2254d4003e4c0398847fe2..b8f9345678f64f58b3c41fea731e3a7749afabfa 100644
--- a/src/main/java/net/minecraft/util/UniformInt.java
+++ b/src/main/java/net/minecraft/util/UniformInt.java
@@ -9,7 +9,8 @@ import java.util.Random;
 import java.util.function.Function;
 
 public class UniformInt {
-   public static final Codec<UniformInt> CODEC = Codec.either(Codec.INT, RecordCodecBuilder.create((instance) -> instance.group(Codec.INT.fieldOf("base").forGetter((uniformInt) -> uniformInt.baseValue), Codec.INT.fieldOf("spread").forGetter((uniformInt) -> uniformInt.spread)).apply(instance, UniformInt::new)).comapFlatMap((uniformInt) -> uniformInt.spread < 0 ? DataResult.error("Spread must be non-negative, got: " + uniformInt.spread) : DataResult.success(uniformInt), Function.identity())).xmap((either) -> (UniformInt)either.map(UniformInt::fixed, (uniformInt) -> uniformInt), (uniformInt) -> uniformInt.spread == 0 ? Either.left(uniformInt.baseValue) : Either.right(uniformInt));
+   // MagmaCube - decompile error
+   public static final Codec<UniformInt> CODEC = Codec.either(Codec.INT, RecordCodecBuilder.<UniformInt>create((instance) -> instance.group(Codec.INT.fieldOf("base").forGetter((uniformInt) -> uniformInt.baseValue), Codec.INT.fieldOf("spread").forGetter((uniformInt) -> uniformInt.spread)).apply(instance, UniformInt::new)).comapFlatMap((uniformInt) -> uniformInt.spread < 0 ? DataResult.error("Spread must be non-negative, got: " + uniformInt.spread) : DataResult.success(uniformInt), Function.identity())).xmap((either) -> (UniformInt)either.map(UniformInt::fixed, (uniformInt) -> uniformInt), (uniformInt) -> uniformInt.spread == 0 ? Either.left(uniformInt.baseValue) : Either.right(uniformInt));
    private final int baseValue;
    private final int spread;
 
diff --git a/src/main/java/net/minecraft/util/WeighedRandom.java b/src/main/java/net/minecraft/util/WeighedRandom.java
index 12a0560b63b2a44df960e402965f8d8f25688eec..5c4863b587ff3dd955cd3af174b50965d9ea28ed 100644
--- a/src/main/java/net/minecraft/util/WeighedRandom.java
+++ b/src/main/java/net/minecraft/util/WeighedRandom.java
@@ -19,7 +19,7 @@ public class WeighedRandom {
 
    public static <T extends WeighedRandom.WeighedRandomItem> T getRandomItem(Random random, List<T> list, int i) {
       if (i <= 0) {
-         throw (IllegalArgumentException)Util.pauseInIde((T)(new IllegalArgumentException()));
+         throw (IllegalArgumentException)Util.pauseInIde((new IllegalArgumentException())); // MagmaCube - decompile error
       } else {
          int i2 = random.nextInt(i);
          return getWeightedItem(list, i2);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/AbstractUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/AbstractUUIDFix.java
index 50ed45f86b78b0010e43f33cc99c55fe1c677b62..c8be39a824d87d04cf5ca31322f84d33ce69258c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/AbstractUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/AbstractUUIDFix.java
@@ -45,10 +45,12 @@ public abstract class AbstractUUIDFix extends DataFix {
 
    protected static Optional<Dynamic<?>> createUUIDFromString(Dynamic<?> dynamic, String s) {
       return dynamic.get(s).result().flatMap((dynamic2) -> {
-         String s = dynamic2.asString((String)null);
-         if (s != null) {
+         // MagmaCube start - decompile error
+         String ss = dynamic2.asString((String)null);
+         if (ss != null) {
+            // MagmaCube end - decompile error
             try {
-               UUID uuid = UUID.fromString(s);
+               UUID uuid = UUID.fromString(ss); // MagmaCube - decompile error
                return createUUIDTag(dynamic, uuid.getMostSignificantBits(), uuid.getLeastSignificantBits());
             } catch (IllegalArgumentException var4) {
             }
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/AddNewChoices.java b/src/main/java/net/minecraft/util/datafix/fixes/AddNewChoices.java
index 2f45fd7161f4cdc65209e7303925d46df9427b25..858a31ce8e6a031b0b072bbccac4749e39a536c9 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/AddNewChoices.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/AddNewChoices.java
@@ -5,6 +5,7 @@ import com.mojang.datafixers.TypeRewriteRule;
 import com.mojang.datafixers.DSL.TypeReference;
 import com.mojang.datafixers.schemas.Schema;
 import com.mojang.datafixers.types.templates.TaggedChoice.TaggedChoiceType;
+import com.mojang.datafixers.util.Pair;
 
 public class AddNewChoices extends DataFix {
    private final String name;
@@ -27,10 +28,10 @@ public class AddNewChoices extends DataFix {
          throw new IllegalStateException("Could not inject: key type is not the same");
       } else {
          return this.fixTypeEverywhere(s, taggedChoiceType, taggedChoiceType2, (dynamicOps) -> (pair) -> {
-               if (!taggedChoiceType2.hasType(pair.getFirst())) {
+               if (!((TaggedChoiceType) taggedChoiceType2).hasType(pair.getFirst())) { // MagmaCube - decompile error
                   throw new IllegalArgumentException(String.format("Unknown type %s in %s ", pair.getFirst(), this.type));
                } else {
-                  return pair;
+                  return (Pair) pair; // MagmaCube - decompile error
                }
             });
       }
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/AdvancementsFix.java b/src/main/java/net/minecraft/util/datafix/fixes/AdvancementsFix.java
index bf7776741bfcf0fd2ca2dec863384fd9e9a798f6..243471ca50bba48dc287429d521a7c74ee745ed0 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/AdvancementsFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/AdvancementsFix.java
@@ -5,7 +5,8 @@ import com.mojang.datafixers.schemas.Schema;
 import java.util.Map;
 
 public class AdvancementsFix extends AdvancementsRenameFix {
-   private static final Map<String, String> RENAMES = ImmutableMap.builder().put("minecraft:recipes/brewing/speckled_melon", "minecraft:recipes/brewing/glistering_melon_slice").put("minecraft:recipes/building_blocks/black_stained_hardened_clay", "minecraft:recipes/building_blocks/black_terracotta").put("minecraft:recipes/building_blocks/blue_stained_hardened_clay", "minecraft:recipes/building_blocks/blue_terracotta").put("minecraft:recipes/building_blocks/brown_stained_hardened_clay", "minecraft:recipes/building_blocks/brown_terracotta").put("minecraft:recipes/building_blocks/cyan_stained_hardened_clay", "minecraft:recipes/building_blocks/cyan_terracotta").put("minecraft:recipes/building_blocks/gray_stained_hardened_clay", "minecraft:recipes/building_blocks/gray_terracotta").put("minecraft:recipes/building_blocks/green_stained_hardened_clay", "minecraft:recipes/building_blocks/green_terracotta").put("minecraft:recipes/building_blocks/light_blue_stained_hardened_clay", "minecraft:recipes/building_blocks/light_blue_terracotta").put("minecraft:recipes/building_blocks/light_gray_stained_hardened_clay", "minecraft:recipes/building_blocks/light_gray_terracotta").put("minecraft:recipes/building_blocks/lime_stained_hardened_clay", "minecraft:recipes/building_blocks/lime_terracotta").put("minecraft:recipes/building_blocks/magenta_stained_hardened_clay", "minecraft:recipes/building_blocks/magenta_terracotta").put("minecraft:recipes/building_blocks/orange_stained_hardened_clay", "minecraft:recipes/building_blocks/orange_terracotta").put("minecraft:recipes/building_blocks/pink_stained_hardened_clay", "minecraft:recipes/building_blocks/pink_terracotta").put("minecraft:recipes/building_blocks/purple_stained_hardened_clay", "minecraft:recipes/building_blocks/purple_terracotta").put("minecraft:recipes/building_blocks/red_stained_hardened_clay", "minecraft:recipes/building_blocks/red_terracotta").put("minecraft:recipes/building_blocks/white_stained_hardened_clay", "minecraft:recipes/building_blocks/white_terracotta").put("minecraft:recipes/building_blocks/yellow_stained_hardened_clay", "minecraft:recipes/building_blocks/yellow_terracotta").put("minecraft:recipes/building_blocks/acacia_wooden_slab", "minecraft:recipes/building_blocks/acacia_slab").put("minecraft:recipes/building_blocks/birch_wooden_slab", "minecraft:recipes/building_blocks/birch_slab").put("minecraft:recipes/building_blocks/dark_oak_wooden_slab", "minecraft:recipes/building_blocks/dark_oak_slab").put("minecraft:recipes/building_blocks/jungle_wooden_slab", "minecraft:recipes/building_blocks/jungle_slab").put("minecraft:recipes/building_blocks/oak_wooden_slab", "minecraft:recipes/building_blocks/oak_slab").put("minecraft:recipes/building_blocks/spruce_wooden_slab", "minecraft:recipes/building_blocks/spruce_slab").put("minecraft:recipes/building_blocks/brick_block", "minecraft:recipes/building_blocks/bricks").put("minecraft:recipes/building_blocks/chiseled_stonebrick", "minecraft:recipes/building_blocks/chiseled_stone_bricks").put("minecraft:recipes/building_blocks/end_bricks", "minecraft:recipes/building_blocks/end_stone_bricks").put("minecraft:recipes/building_blocks/lit_pumpkin", "minecraft:recipes/building_blocks/jack_o_lantern").put("minecraft:recipes/building_blocks/magma", "minecraft:recipes/building_blocks/magma_block").put("minecraft:recipes/building_blocks/melon_block", "minecraft:recipes/building_blocks/melon").put("minecraft:recipes/building_blocks/mossy_stonebrick", "minecraft:recipes/building_blocks/mossy_stone_bricks").put("minecraft:recipes/building_blocks/nether_brick", "minecraft:recipes/building_blocks/nether_bricks").put("minecraft:recipes/building_blocks/pillar_quartz_block", "minecraft:recipes/building_blocks/quartz_pillar").put("minecraft:recipes/building_blocks/red_nether_brick", "minecraft:recipes/building_blocks/red_nether_bricks").put("minecraft:recipes/building_blocks/snow", "minecraft:recipes/building_blocks/snow_block").put("minecraft:recipes/building_blocks/smooth_red_sandstone", "minecraft:recipes/building_blocks/cut_red_sandstone").put("minecraft:recipes/building_blocks/smooth_sandstone", "minecraft:recipes/building_blocks/cut_sandstone").put("minecraft:recipes/building_blocks/stonebrick", "minecraft:recipes/building_blocks/stone_bricks").put("minecraft:recipes/building_blocks/stone_stairs", "minecraft:recipes/building_blocks/cobblestone_stairs").put("minecraft:recipes/building_blocks/string_to_wool", "minecraft:recipes/building_blocks/white_wool_from_string").put("minecraft:recipes/decorations/fence", "minecraft:recipes/decorations/oak_fence").put("minecraft:recipes/decorations/purple_shulker_box", "minecraft:recipes/decorations/shulker_box").put("minecraft:recipes/decorations/slime", "minecraft:recipes/decorations/slime_block").put("minecraft:recipes/decorations/snow_layer", "minecraft:recipes/decorations/snow").put("minecraft:recipes/misc/bone_meal_from_block", "minecraft:recipes/misc/bone_meal_from_bone_block").put("minecraft:recipes/misc/bone_meal_from_bone", "minecraft:recipes/misc/bone_meal").put("minecraft:recipes/misc/gold_ingot_from_block", "minecraft:recipes/misc/gold_ingot_from_gold_block").put("minecraft:recipes/misc/iron_ingot_from_block", "minecraft:recipes/misc/iron_ingot_from_iron_block").put("minecraft:recipes/redstone/fence_gate", "minecraft:recipes/redstone/oak_fence_gate").put("minecraft:recipes/redstone/noteblock", "minecraft:recipes/redstone/note_block").put("minecraft:recipes/redstone/trapdoor", "minecraft:recipes/redstone/oak_trapdoor").put("minecraft:recipes/redstone/wooden_button", "minecraft:recipes/redstone/oak_button").put("minecraft:recipes/redstone/wooden_door", "minecraft:recipes/redstone/oak_door").put("minecraft:recipes/redstone/wooden_pressure_plate", "minecraft:recipes/redstone/oak_pressure_plate").put("minecraft:recipes/transportation/boat", "minecraft:recipes/transportation/oak_boat").put("minecraft:recipes/transportation/golden_rail", "minecraft:recipes/transportation/powered_rail").build();
+   // MagmaCube - decompile error
+   private static final Map<String, String> RENAMES = (Map) ImmutableMap.builder().put("minecraft:recipes/brewing/speckled_melon", "minecraft:recipes/brewing/glistering_melon_slice").put("minecraft:recipes/building_blocks/black_stained_hardened_clay", "minecraft:recipes/building_blocks/black_terracotta").put("minecraft:recipes/building_blocks/blue_stained_hardened_clay", "minecraft:recipes/building_blocks/blue_terracotta").put("minecraft:recipes/building_blocks/brown_stained_hardened_clay", "minecraft:recipes/building_blocks/brown_terracotta").put("minecraft:recipes/building_blocks/cyan_stained_hardened_clay", "minecraft:recipes/building_blocks/cyan_terracotta").put("minecraft:recipes/building_blocks/gray_stained_hardened_clay", "minecraft:recipes/building_blocks/gray_terracotta").put("minecraft:recipes/building_blocks/green_stained_hardened_clay", "minecraft:recipes/building_blocks/green_terracotta").put("minecraft:recipes/building_blocks/light_blue_stained_hardened_clay", "minecraft:recipes/building_blocks/light_blue_terracotta").put("minecraft:recipes/building_blocks/light_gray_stained_hardened_clay", "minecraft:recipes/building_blocks/light_gray_terracotta").put("minecraft:recipes/building_blocks/lime_stained_hardened_clay", "minecraft:recipes/building_blocks/lime_terracotta").put("minecraft:recipes/building_blocks/magenta_stained_hardened_clay", "minecraft:recipes/building_blocks/magenta_terracotta").put("minecraft:recipes/building_blocks/orange_stained_hardened_clay", "minecraft:recipes/building_blocks/orange_terracotta").put("minecraft:recipes/building_blocks/pink_stained_hardened_clay", "minecraft:recipes/building_blocks/pink_terracotta").put("minecraft:recipes/building_blocks/purple_stained_hardened_clay", "minecraft:recipes/building_blocks/purple_terracotta").put("minecraft:recipes/building_blocks/red_stained_hardened_clay", "minecraft:recipes/building_blocks/red_terracotta").put("minecraft:recipes/building_blocks/white_stained_hardened_clay", "minecraft:recipes/building_blocks/white_terracotta").put("minecraft:recipes/building_blocks/yellow_stained_hardened_clay", "minecraft:recipes/building_blocks/yellow_terracotta").put("minecraft:recipes/building_blocks/acacia_wooden_slab", "minecraft:recipes/building_blocks/acacia_slab").put("minecraft:recipes/building_blocks/birch_wooden_slab", "minecraft:recipes/building_blocks/birch_slab").put("minecraft:recipes/building_blocks/dark_oak_wooden_slab", "minecraft:recipes/building_blocks/dark_oak_slab").put("minecraft:recipes/building_blocks/jungle_wooden_slab", "minecraft:recipes/building_blocks/jungle_slab").put("minecraft:recipes/building_blocks/oak_wooden_slab", "minecraft:recipes/building_blocks/oak_slab").put("minecraft:recipes/building_blocks/spruce_wooden_slab", "minecraft:recipes/building_blocks/spruce_slab").put("minecraft:recipes/building_blocks/brick_block", "minecraft:recipes/building_blocks/bricks").put("minecraft:recipes/building_blocks/chiseled_stonebrick", "minecraft:recipes/building_blocks/chiseled_stone_bricks").put("minecraft:recipes/building_blocks/end_bricks", "minecraft:recipes/building_blocks/end_stone_bricks").put("minecraft:recipes/building_blocks/lit_pumpkin", "minecraft:recipes/building_blocks/jack_o_lantern").put("minecraft:recipes/building_blocks/magma", "minecraft:recipes/building_blocks/magma_block").put("minecraft:recipes/building_blocks/melon_block", "minecraft:recipes/building_blocks/melon").put("minecraft:recipes/building_blocks/mossy_stonebrick", "minecraft:recipes/building_blocks/mossy_stone_bricks").put("minecraft:recipes/building_blocks/nether_brick", "minecraft:recipes/building_blocks/nether_bricks").put("minecraft:recipes/building_blocks/pillar_quartz_block", "minecraft:recipes/building_blocks/quartz_pillar").put("minecraft:recipes/building_blocks/red_nether_brick", "minecraft:recipes/building_blocks/red_nether_bricks").put("minecraft:recipes/building_blocks/snow", "minecraft:recipes/building_blocks/snow_block").put("minecraft:recipes/building_blocks/smooth_red_sandstone", "minecraft:recipes/building_blocks/cut_red_sandstone").put("minecraft:recipes/building_blocks/smooth_sandstone", "minecraft:recipes/building_blocks/cut_sandstone").put("minecraft:recipes/building_blocks/stonebrick", "minecraft:recipes/building_blocks/stone_bricks").put("minecraft:recipes/building_blocks/stone_stairs", "minecraft:recipes/building_blocks/cobblestone_stairs").put("minecraft:recipes/building_blocks/string_to_wool", "minecraft:recipes/building_blocks/white_wool_from_string").put("minecraft:recipes/decorations/fence", "minecraft:recipes/decorations/oak_fence").put("minecraft:recipes/decorations/purple_shulker_box", "minecraft:recipes/decorations/shulker_box").put("minecraft:recipes/decorations/slime", "minecraft:recipes/decorations/slime_block").put("minecraft:recipes/decorations/snow_layer", "minecraft:recipes/decorations/snow").put("minecraft:recipes/misc/bone_meal_from_block", "minecraft:recipes/misc/bone_meal_from_bone_block").put("minecraft:recipes/misc/bone_meal_from_bone", "minecraft:recipes/misc/bone_meal").put("minecraft:recipes/misc/gold_ingot_from_block", "minecraft:recipes/misc/gold_ingot_from_gold_block").put("minecraft:recipes/misc/iron_ingot_from_block", "minecraft:recipes/misc/iron_ingot_from_iron_block").put("minecraft:recipes/redstone/fence_gate", "minecraft:recipes/redstone/oak_fence_gate").put("minecraft:recipes/redstone/noteblock", "minecraft:recipes/redstone/note_block").put("minecraft:recipes/redstone/trapdoor", "minecraft:recipes/redstone/oak_trapdoor").put("minecraft:recipes/redstone/wooden_button", "minecraft:recipes/redstone/oak_button").put("minecraft:recipes/redstone/wooden_door", "minecraft:recipes/redstone/oak_door").put("minecraft:recipes/redstone/wooden_pressure_plate", "minecraft:recipes/redstone/oak_pressure_plate").put("minecraft:recipes/transportation/boat", "minecraft:recipes/transportation/oak_boat").put("minecraft:recipes/transportation/golden_rail", "minecraft:recipes/transportation/powered_rail").build();
 
    public AdvancementsFix(Schema schema, boolean flag) {
       super(schema, flag, "AdvancementsFix", (s) -> (String)RENAMES.getOrDefault(s, s));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/AttributesRename.java b/src/main/java/net/minecraft/util/datafix/fixes/AttributesRename.java
index d9422fc8ee09c791acd1a7a0902a88ee0582e94b..92d9fe8c727aa5127a92c8e1e20e27779ca7a8a4 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/AttributesRename.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/AttributesRename.java
@@ -13,7 +13,8 @@ import com.mojang.serialization.Dynamic;
 import java.util.Map;
 
 public class AttributesRename extends DataFix {
-   private static final Map<String, String> RENAMES = ImmutableMap.builder().put("generic.maxHealth", "generic.max_health").put("Max Health", "generic.max_health").put("zombie.spawnReinforcements", "zombie.spawn_reinforcements").put("Spawn Reinforcements Chance", "zombie.spawn_reinforcements").put("horse.jumpStrength", "horse.jump_strength").put("Jump Strength", "horse.jump_strength").put("generic.followRange", "generic.follow_range").put("Follow Range", "generic.follow_range").put("generic.knockbackResistance", "generic.knockback_resistance").put("Knockback Resistance", "generic.knockback_resistance").put("generic.movementSpeed", "generic.movement_speed").put("Movement Speed", "generic.movement_speed").put("generic.flyingSpeed", "generic.flying_speed").put("Flying Speed", "generic.flying_speed").put("generic.attackDamage", "generic.attack_damage").put("generic.attackKnockback", "generic.attack_knockback").put("generic.attackSpeed", "generic.attack_speed").put("generic.armorToughness", "generic.armor_toughness").build();
+   // MagmaCube - decompile error
+   private static final Map<String, String> RENAMES = (Map) ImmutableMap.builder().put("generic.maxHealth", "generic.max_health").put("Max Health", "generic.max_health").put("zombie.spawnReinforcements", "zombie.spawn_reinforcements").put("Spawn Reinforcements Chance", "zombie.spawn_reinforcements").put("horse.jumpStrength", "horse.jump_strength").put("Jump Strength", "horse.jump_strength").put("generic.followRange", "generic.follow_range").put("Follow Range", "generic.follow_range").put("generic.knockbackResistance", "generic.knockback_resistance").put("Knockback Resistance", "generic.knockback_resistance").put("generic.movementSpeed", "generic.movement_speed").put("Movement Speed", "generic.movement_speed").put("generic.flyingSpeed", "generic.flying_speed").put("Flying Speed", "generic.flying_speed").put("generic.attackDamage", "generic.attack_damage").put("generic.attackKnockback", "generic.attack_knockback").put("generic.attackSpeed", "generic.attack_speed").put("generic.armorToughness", "generic.armor_toughness").build();
 
    public AttributesRename(Schema schema) {
       super(schema, false);
@@ -30,10 +31,10 @@ public class AttributesRename extends DataFix {
    }
 
    private static Typed<?> fixItemStackTag(Typed<?> typed) {
-      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("AttributeModifiers", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().result().map((stream) -> stream.map((dynamic) -> dynamic.update("AttributeName", AttributesRename::fixName))).map(dynamicx::createList), dynamicx)));
+      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("AttributeModifiers", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().result().map((stream) -> stream.map((dynamicz) -> dynamicz.update("AttributeName", AttributesRename::fixName))).map(dynamicx::createList), dynamicx))); // MagmaCube - decompile error
    }
 
    private static Typed<?> fixEntity(Typed<?> typed) {
-      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Attributes", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().result().map((stream) -> stream.map((dynamic) -> dynamic.update("Name", AttributesRename::fixName))).map(dynamicx::createList), dynamicx)));
+      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Attributes", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().result().map((stream) -> stream.map((dynamicc) -> dynamicc.update("Name", AttributesRename::fixName))).map(dynamicx::createList), dynamicx))); // MagmaCube - decompile error
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/BedBlockEntityInjecter.java b/src/main/java/net/minecraft/util/datafix/fixes/BedBlockEntityInjecter.java
index 6de42aaf8b256b296675b7b8a50e817ac996f252..d4875c0e0af6e43dc0f9f3363ec5b5553e3c012c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/BedBlockEntityInjecter.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/BedBlockEntityInjecter.java
@@ -12,6 +12,8 @@ import com.mojang.datafixers.types.Type;
 import com.mojang.datafixers.types.templates.List.ListType;
 import com.mojang.datafixers.util.Pair;
 import com.mojang.serialization.Dynamic;
+
+import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
 import java.util.function.Function;
@@ -39,11 +41,14 @@ public class BedBlockEntityInjecter extends DataFix {
       OpticFinder<?> opticFinder = DSL.fieldFinder("Level", type);
       OpticFinder<List<TE>> opticFinder2 = DSL.fieldFinder("TileEntities", listType);
       int i = 416;
-      return TypeRewriteRule.seq(this.fixTypeEverywhere("InjectBedBlockEntityType", this.getInputSchema().findChoiceType(References.BLOCK_ENTITY), this.getOutputSchema().findChoiceType(References.BLOCK_ENTITY), (dynamicOps) -> (pair) -> pair), this.fixTypeEverywhereTyped("BedBlockEntityInjecter", this.getOutputSchema().getType(References.CHUNK), (typed) -> {
+      // MagmaCube - decompile error
+      return TypeRewriteRule.seq(this.fixTypeEverywhere("InjectBedBlockEntityType", this.getInputSchema().findChoiceType(References.BLOCK_ENTITY), this.getOutputSchema().findChoiceType(References.BLOCK_ENTITY), (dynamicOps) -> (pair) -> (Pair) pair), this.fixTypeEverywhereTyped("BedBlockEntityInjecter", this.getOutputSchema().getType(References.CHUNK), (typed) -> {
          Typed<?> typed2 = typed.getTyped(opticFinder);
          Dynamic<?> dynamic = (Dynamic)typed2.get(DSL.remainderFinder());
-         int i = dynamic.get("xPos").asInt(0);
-         int i2 = dynamic.get("zPos").asInt(0);
+         // MagmaCube start - decompile error
+         int xPos = dynamic.get("xPos").asInt(0);
+         int zPos = dynamic.get("zPos").asInt(0);
+         // MagmaCube end - decompile error
          List<TE> list = Lists.newArrayList((Iterable)typed2.getOrCreate(opticFinder2));
          List<? extends Dynamic<?>> list2 = dynamic.get("Sections").asList(Function.identity());
 
@@ -53,18 +58,21 @@ public class BedBlockEntityInjecter extends DataFix {
             Stream<Integer> stream = dynamic2.get("Blocks").asStream().map((dynamicx) -> dynamicx.asInt(0));
             int i5 = 0;
 
-            for(int i6 : stream::iterator) {
+            // MagmaCube start - decompile error
+            for (Iterator<Integer> it = stream.iterator(); it.hasNext(); ) {
+               int i6 = it.next();
+               // MagmaCube end - decompile error
                if (416 == (i6 & 255) << 4) {
                   int i7 = i5 & 15;
                   int i8 = i5 >> 8 & 15;
                   int i9 = i5 >> 4 & 15;
                   Map<Dynamic<?>, Dynamic<?>> map = Maps.newHashMap();
                   map.put(dynamic2.createString("id"), dynamic2.createString("minecraft:bed"));
-                  map.put(dynamic2.createString("x"), dynamic2.createInt(i7 + (i << 4)));
+                  map.put(dynamic2.createString("x"), dynamic2.createInt(i7 + (xPos << 4))); // MagmaCube - decompile error
                   map.put(dynamic2.createString("y"), dynamic2.createInt(i8 + (i4 << 4)));
-                  map.put(dynamic2.createString("z"), dynamic2.createInt(i9 + (i2 << 4)));
+                  map.put(dynamic2.createString("z"), dynamic2.createInt(i9 + (zPos << 4))); // MagmaCube - decompile error
                   map.put(dynamic2.createString("color"), dynamic2.createShort((short)14));
-                  list.add(((Pair)type2.read(dynamic2.createMap(map)).result().orElseThrow(() -> new IllegalStateException("Could not parse newly created bed block entity."))).getFirst());
+                  list.add((type2.read(dynamic2.createMap(map)).result().orElseThrow(() -> new IllegalStateException("Could not parse newly created bed block entity."))).getFirst()); // MagmaCube - decompile error
                }
 
                ++i5;
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/BiomeFix.java b/src/main/java/net/minecraft/util/datafix/fixes/BiomeFix.java
index 307982714196e3c3986f38ac079afcbfeb4a1749..15c259dda0abecb1bb88a76e06b9441a515fb347 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/BiomeFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/BiomeFix.java
@@ -5,7 +5,8 @@ import com.mojang.datafixers.schemas.Schema;
 import java.util.Map;
 
 public class BiomeFix extends RenameBiomesFix {
-   public static final Map<String, String> BIOMES = ImmutableMap.builder().put("minecraft:extreme_hills", "minecraft:mountains").put("minecraft:swampland", "minecraft:swamp").put("minecraft:hell", "minecraft:nether_wastes").put("minecraft:sky", "minecraft:the_end").put("minecraft:ice_flats", "minecraft:snowy_tundra").put("minecraft:ice_mountains", "minecraft:snowy_mountains").put("minecraft:mushroom_island", "minecraft:mushroom_fields").put("minecraft:mushroom_island_shore", "minecraft:mushroom_field_shore").put("minecraft:beaches", "minecraft:beach").put("minecraft:forest_hills", "minecraft:wooded_hills").put("minecraft:smaller_extreme_hills", "minecraft:mountain_edge").put("minecraft:stone_beach", "minecraft:stone_shore").put("minecraft:cold_beach", "minecraft:snowy_beach").put("minecraft:roofed_forest", "minecraft:dark_forest").put("minecraft:taiga_cold", "minecraft:snowy_taiga").put("minecraft:taiga_cold_hills", "minecraft:snowy_taiga_hills").put("minecraft:redwood_taiga", "minecraft:giant_tree_taiga").put("minecraft:redwood_taiga_hills", "minecraft:giant_tree_taiga_hills").put("minecraft:extreme_hills_with_trees", "minecraft:wooded_mountains").put("minecraft:savanna_rock", "minecraft:savanna_plateau").put("minecraft:mesa", "minecraft:badlands").put("minecraft:mesa_rock", "minecraft:wooded_badlands_plateau").put("minecraft:mesa_clear_rock", "minecraft:badlands_plateau").put("minecraft:sky_island_low", "minecraft:small_end_islands").put("minecraft:sky_island_medium", "minecraft:end_midlands").put("minecraft:sky_island_high", "minecraft:end_highlands").put("minecraft:sky_island_barren", "minecraft:end_barrens").put("minecraft:void", "minecraft:the_void").put("minecraft:mutated_plains", "minecraft:sunflower_plains").put("minecraft:mutated_desert", "minecraft:desert_lakes").put("minecraft:mutated_extreme_hills", "minecraft:gravelly_mountains").put("minecraft:mutated_forest", "minecraft:flower_forest").put("minecraft:mutated_taiga", "minecraft:taiga_mountains").put("minecraft:mutated_swampland", "minecraft:swamp_hills").put("minecraft:mutated_ice_flats", "minecraft:ice_spikes").put("minecraft:mutated_jungle", "minecraft:modified_jungle").put("minecraft:mutated_jungle_edge", "minecraft:modified_jungle_edge").put("minecraft:mutated_birch_forest", "minecraft:tall_birch_forest").put("minecraft:mutated_birch_forest_hills", "minecraft:tall_birch_hills").put("minecraft:mutated_roofed_forest", "minecraft:dark_forest_hills").put("minecraft:mutated_taiga_cold", "minecraft:snowy_taiga_mountains").put("minecraft:mutated_redwood_taiga", "minecraft:giant_spruce_taiga").put("minecraft:mutated_redwood_taiga_hills", "minecraft:giant_spruce_taiga_hills").put("minecraft:mutated_extreme_hills_with_trees", "minecraft:modified_gravelly_mountains").put("minecraft:mutated_savanna", "minecraft:shattered_savanna").put("minecraft:mutated_savanna_rock", "minecraft:shattered_savanna_plateau").put("minecraft:mutated_mesa", "minecraft:eroded_badlands").put("minecraft:mutated_mesa_rock", "minecraft:modified_wooded_badlands_plateau").put("minecraft:mutated_mesa_clear_rock", "minecraft:modified_badlands_plateau").put("minecraft:warm_deep_ocean", "minecraft:deep_warm_ocean").put("minecraft:lukewarm_deep_ocean", "minecraft:deep_lukewarm_ocean").put("minecraft:cold_deep_ocean", "minecraft:deep_cold_ocean").put("minecraft:frozen_deep_ocean", "minecraft:deep_frozen_ocean").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> BIOMES = (Map) ImmutableMap.builder().put("minecraft:extreme_hills", "minecraft:mountains").put("minecraft:swampland", "minecraft:swamp").put("minecraft:hell", "minecraft:nether_wastes").put("minecraft:sky", "minecraft:the_end").put("minecraft:ice_flats", "minecraft:snowy_tundra").put("minecraft:ice_mountains", "minecraft:snowy_mountains").put("minecraft:mushroom_island", "minecraft:mushroom_fields").put("minecraft:mushroom_island_shore", "minecraft:mushroom_field_shore").put("minecraft:beaches", "minecraft:beach").put("minecraft:forest_hills", "minecraft:wooded_hills").put("minecraft:smaller_extreme_hills", "minecraft:mountain_edge").put("minecraft:stone_beach", "minecraft:stone_shore").put("minecraft:cold_beach", "minecraft:snowy_beach").put("minecraft:roofed_forest", "minecraft:dark_forest").put("minecraft:taiga_cold", "minecraft:snowy_taiga").put("minecraft:taiga_cold_hills", "minecraft:snowy_taiga_hills").put("minecraft:redwood_taiga", "minecraft:giant_tree_taiga").put("minecraft:redwood_taiga_hills", "minecraft:giant_tree_taiga_hills").put("minecraft:extreme_hills_with_trees", "minecraft:wooded_mountains").put("minecraft:savanna_rock", "minecraft:savanna_plateau").put("minecraft:mesa", "minecraft:badlands").put("minecraft:mesa_rock", "minecraft:wooded_badlands_plateau").put("minecraft:mesa_clear_rock", "minecraft:badlands_plateau").put("minecraft:sky_island_low", "minecraft:small_end_islands").put("minecraft:sky_island_medium", "minecraft:end_midlands").put("minecraft:sky_island_high", "minecraft:end_highlands").put("minecraft:sky_island_barren", "minecraft:end_barrens").put("minecraft:void", "minecraft:the_void").put("minecraft:mutated_plains", "minecraft:sunflower_plains").put("minecraft:mutated_desert", "minecraft:desert_lakes").put("minecraft:mutated_extreme_hills", "minecraft:gravelly_mountains").put("minecraft:mutated_forest", "minecraft:flower_forest").put("minecraft:mutated_taiga", "minecraft:taiga_mountains").put("minecraft:mutated_swampland", "minecraft:swamp_hills").put("minecraft:mutated_ice_flats", "minecraft:ice_spikes").put("minecraft:mutated_jungle", "minecraft:modified_jungle").put("minecraft:mutated_jungle_edge", "minecraft:modified_jungle_edge").put("minecraft:mutated_birch_forest", "minecraft:tall_birch_forest").put("minecraft:mutated_birch_forest_hills", "minecraft:tall_birch_hills").put("minecraft:mutated_roofed_forest", "minecraft:dark_forest_hills").put("minecraft:mutated_taiga_cold", "minecraft:snowy_taiga_mountains").put("minecraft:mutated_redwood_taiga", "minecraft:giant_spruce_taiga").put("minecraft:mutated_redwood_taiga_hills", "minecraft:giant_spruce_taiga_hills").put("minecraft:mutated_extreme_hills_with_trees", "minecraft:modified_gravelly_mountains").put("minecraft:mutated_savanna", "minecraft:shattered_savanna").put("minecraft:mutated_savanna_rock", "minecraft:shattered_savanna_plateau").put("minecraft:mutated_mesa", "minecraft:eroded_badlands").put("minecraft:mutated_mesa_rock", "minecraft:modified_wooded_badlands_plateau").put("minecraft:mutated_mesa_clear_rock", "minecraft:modified_badlands_plateau").put("minecraft:warm_deep_ocean", "minecraft:deep_warm_ocean").put("minecraft:lukewarm_deep_ocean", "minecraft:deep_lukewarm_ocean").put("minecraft:cold_deep_ocean", "minecraft:deep_cold_ocean").put("minecraft:frozen_deep_ocean", "minecraft:deep_frozen_ocean").build();
 
    public BiomeFix(Schema schema, boolean flag) {
       super(schema, flag, "Biomes fix", BIOMES);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/BitStorageAlignFix.java b/src/main/java/net/minecraft/util/datafix/fixes/BitStorageAlignFix.java
index b0fc0eb49721d512d3a709ba486426561d323c70..39db647a98b6148609070aa30a45690637e90436 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/BitStorageAlignFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/BitStorageAlignFix.java
@@ -33,13 +33,15 @@ public class BitStorageAlignFix extends DataFix {
    }
 
    private Typed<?> updateHeightmaps(Typed<?> typed) {
-      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Heightmaps", (dynamic2) -> dynamic2.updateMapValues((pair) -> pair.mapSecond((dynamic2) -> updateBitStorage(dynamic, dynamic2, 256, 9)))));
+      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Heightmaps", (dynamic2) -> dynamic2.updateMapValues((pair) -> pair.mapSecond((dynamic2c) -> updateBitStorage(dynamic, dynamic2c, 256, 9))))); // MagmaCube - decompile error
    }
 
    private static Typed<?> updateSections(OpticFinder<?> opticFinder, OpticFinder<?> opticFinder2, OpticFinder<List<Pair<String, Dynamic<?>>>> opticFinder3, Typed<?> typed) {
-      return typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typed) -> {
-            int i = typed.getOptional(opticFinder3).map((list) -> Math.max(4, DataFixUtils.ceillog2(list.size()))).orElse(0);
-            return i != 0 && !Mth.isPowerOfTwo(i) ? typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("BlockStates", (dynamic2) -> updateBitStorage(dynamic, dynamic2, 4096, i))) : typed;
+      // MagmaCube start - decompile error
+      return typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typedc) -> {
+            int i = typedc.getOptional(opticFinder3).map((list) -> Math.max(4, DataFixUtils.ceillog2(list.size()))).orElse(0);
+            return i != 0 && !Mth.isPowerOfTwo(i) ? typedc.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("BlockStates", (dynamic2) -> updateBitStorage(dynamic, dynamic2, 4096, i))) : typedc;
+           // MagmaCube end - decompile error
          }));
    }
 
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityBannerColorFix.java b/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityBannerColorFix.java
index b4fc639576d1540b779b0aa9016e6c37540505bd..d60d1f4d82d07d416aba1a0aecf50204dfa5315f 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityBannerColorFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityBannerColorFix.java
@@ -13,7 +13,8 @@ public class BlockEntityBannerColorFix extends NamedEntityFix {
 
    public Dynamic<?> fixTag(Dynamic<?> dynamic) {
       dynamic = dynamic.update("Base", (dynamicx) -> dynamicx.createInt(15 - dynamicx.asInt(0)));
-      return dynamic.update("Patterns", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().map((stream) -> stream.map((dynamic) -> dynamic.update("Color", (dynamicx) -> dynamicx.createInt(15 - dynamicx.asInt(0))))).map(dynamicx::createList).result(), dynamicx));
+      // MagmaCube - decompile error
+      return dynamic.update("Patterns", (dynamicx) -> DataFixUtils.orElse(dynamicx.asStreamOpt().map((stream) -> stream.map((dynamicxxx) -> dynamicxxx.update("Color", (dynamicxx) -> dynamicxx.createInt(15 - dynamicxx.asInt(0))))).map(dynamicx::createList).result(), dynamicx));
    }
 
    protected Typed<?> fix(Typed<?> typed) {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityIdFix.java b/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityIdFix.java
index cae7d91528685155da92cf152016ff4626262106..01f80f608158cf2f5d118dfa95e7081c3e43cfa5 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityIdFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityIdFix.java
@@ -43,8 +43,10 @@ public class BlockEntityIdFix extends DataFix {
    public TypeRewriteRule makeRule() {
       Type<?> type = this.getInputSchema().getType(References.ITEM_STACK);
       Type<?> type2 = this.getOutputSchema().getType(References.ITEM_STACK);
-      TaggedChoiceType<String> taggedChoiceType = this.getInputSchema().findChoiceType(References.BLOCK_ENTITY);
-      TaggedChoiceType<String> taggedChoiceType2 = this.getOutputSchema().findChoiceType(References.BLOCK_ENTITY);
+      // MagmaCube start - decompile error
+      TaggedChoiceType<String> taggedChoiceType = (TaggedChoiceType<String>) this.getInputSchema().findChoiceType(References.BLOCK_ENTITY);
+      TaggedChoiceType<String> taggedChoiceType2 = (TaggedChoiceType<String>) this.getOutputSchema().findChoiceType(References.BLOCK_ENTITY);
+      // MagmaCube end - decompile error
       return TypeRewriteRule.seq(this.convertUnchecked("item stack block entity name hook converter", type, type2), this.fixTypeEverywhere("BlockEntityIdFix", taggedChoiceType, taggedChoiceType2, (dynamicOps) -> (pair) -> pair.mapFirst((s) -> (String)ID_MAP.getOrDefault(s, s))));
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityUUIDFix.java
index d5c39edc934d7e4d0eec340f07fbc7a2d5979cc1..57279bb9b9c0fd192fcbac93ac7477f3ff0aba90 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/BlockEntityUUIDFix.java
@@ -17,7 +17,7 @@ public class BlockEntityUUIDFix extends AbstractUUIDFix {
    }
 
    private Dynamic<?> updateSkull(Dynamic<?> dynamic) {
-      return (Dynamic)dynamic.get("Owner").get().map((dynamicx) -> (Dynamic)replaceUUIDString(dynamicx, "Id", "Id").orElse(dynamicx)).map((dynamic2) -> dynamic.remove("Owner").set("SkullOwner", dynamic2)).result().orElse(dynamic);
+      return (Dynamic)dynamic.get("Owner").get().map((dynamicx) -> (Dynamic)replaceUUIDString(dynamicx, "Id", "Id").orElse(dynamicx)).map((dynamic2) -> dynamic.remove("Owner").set("SkullOwner", dynamic2)).result().orElse((Dynamic) dynamic); // MagmaCube - decompile error
    }
 
    private Dynamic<?> updateConduit(Dynamic<?> dynamic) {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ChunkPalettedStorageFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ChunkPalettedStorageFix.java
index 65c52ed550baa80ed00b005db95289c22002ebe5..d082d8b861e746e8148d133aa6acca85f1c2fb0c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ChunkPalettedStorageFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ChunkPalettedStorageFix.java
@@ -69,7 +69,7 @@ public class ChunkPalettedStorageFix extends DataFix {
       hashMap.put("minecraft:tallgrass2", BlockStateData.parse("{Name:'minecraft:potted_fern'}"));
       hashMap.put("minecraft:cactus0", BlockStateData.getTag(2240));
    });
-   private static final Map<String, Dynamic<?>> SKULL_MAP = (Map)DataFixUtils.make(Maps.newHashMap(), (hashMap) -> {
+   private static final Map<String, Dynamic<?>> SKULL_MAP = DataFixUtils.make(Maps.newHashMap(), (hashMap) -> { // MagmaCube - decompile error
       mapSkull(hashMap, 0, "skeleton", "skull");
       mapSkull(hashMap, 1, "wither_skeleton", "skull");
       mapSkull(hashMap, 2, "zombie", "head");
@@ -77,7 +77,7 @@ public class ChunkPalettedStorageFix extends DataFix {
       mapSkull(hashMap, 4, "creeper", "head");
       mapSkull(hashMap, 5, "dragon", "head");
    });
-   private static final Map<String, Dynamic<?>> DOOR_MAP = (Map)DataFixUtils.make(Maps.newHashMap(), (hashMap) -> {
+   private static final Map<String, Dynamic<?>> DOOR_MAP = DataFixUtils.make(Maps.newHashMap(), (hashMap) -> { // MagmaCube - decompile error
       mapDoor(hashMap, "oak_door", 1024);
       mapDoor(hashMap, "iron_door", 1136);
       mapDoor(hashMap, "spruce_door", 3088);
@@ -86,14 +86,14 @@ public class ChunkPalettedStorageFix extends DataFix {
       mapDoor(hashMap, "acacia_door", 3136);
       mapDoor(hashMap, "dark_oak_door", 3152);
    });
-   private static final Map<String, Dynamic<?>> NOTE_BLOCK_MAP = (Map)DataFixUtils.make(Maps.newHashMap(), (hashMap) -> {
+   private static final Map<String, Dynamic<?>> NOTE_BLOCK_MAP = DataFixUtils.make(Maps.newHashMap(), (hashMap) -> { // MagmaCube - decompile error
       for(int i = 0; i < 26; ++i) {
          hashMap.put("true" + i, BlockStateData.parse("{Name:'minecraft:note_block',Properties:{powered:'true',note:'" + i + "'}}"));
          hashMap.put("false" + i, BlockStateData.parse("{Name:'minecraft:note_block',Properties:{powered:'false',note:'" + i + "'}}"));
       }
 
    });
-   private static final Int2ObjectMap<String> DYE_COLOR_MAP = (Int2ObjectMap)DataFixUtils.make(new Int2ObjectOpenHashMap(), (int2ObjectOpenHashMap) -> {
+   private static final Int2ObjectMap<String> DYE_COLOR_MAP = DataFixUtils.make(new Int2ObjectOpenHashMap(), (int2ObjectOpenHashMap) -> { // MagmaCube - decompile error
       int2ObjectOpenHashMap.put(0, "white");
       int2ObjectOpenHashMap.put(1, "orange");
       int2ObjectOpenHashMap.put(2, "magenta");
@@ -111,7 +111,7 @@ public class ChunkPalettedStorageFix extends DataFix {
       int2ObjectOpenHashMap.put(14, "red");
       int2ObjectOpenHashMap.put(15, "black");
    });
-   private static final Map<String, Dynamic<?>> BED_BLOCK_MAP = (Map)DataFixUtils.make(Maps.newHashMap(), (hashMap) -> {
+   private static final Map<String, Dynamic<?>> BED_BLOCK_MAP = DataFixUtils.make(Maps.newHashMap(), (hashMap) -> { // MagmaCube - decompile error
       ObjectIterator var1 = DYE_COLOR_MAP.int2ObjectEntrySet().iterator();
 
       while(var1.hasNext()) {
@@ -122,7 +122,7 @@ public class ChunkPalettedStorageFix extends DataFix {
       }
 
    });
-   private static final Map<String, Dynamic<?>> BANNER_BLOCK_MAP = (Map)DataFixUtils.make(Maps.newHashMap(), (hashMap) -> {
+   private static final Map<String, Dynamic<?>> BANNER_BLOCK_MAP = DataFixUtils.make(Maps.newHashMap(), (hashMap) -> { // MagmaCube - decompile error
       ObjectIterator var1 = DYE_COLOR_MAP.int2ObjectEntrySet().iterator();
 
       while(var1.hasNext()) {
@@ -550,19 +550,23 @@ public class ChunkPalettedStorageFix extends DataFix {
          this.level = dynamic;
          this.x = dynamic.get("xPos").asInt(0) << 4;
          this.z = dynamic.get("zPos").asInt(0) << 4;
-         dynamic.get("TileEntities").asStreamOpt().result().ifPresent((stream) -> stream.forEach((dynamic) -> {
-               int i = dynamic.get("x").asInt(0) - this.x & 15;
-               int i2 = dynamic.get("y").asInt(0);
-               int i3 = dynamic.get("z").asInt(0) - this.z & 15;
+         // MagmaCube start - decompile error
+         dynamic.get("TileEntities").asStreamOpt().result().ifPresent((stream) -> stream.forEach((dynamicx) -> {
+               int i = dynamicx.get("x").asInt(0) - this.x & 15;
+               int i2 = dynamicx.get("y").asInt(0);
+               int i3 = dynamicx.get("z").asInt(0) - this.z & 15;
                int i4 = i2 << 8 | i3 << 4 | i;
-               if (this.blockEntities.put(i4, dynamic) != null) {
+               if (this.blockEntities.put(i4, dynamicx) != null) {
+                  // MagmaCube end - decompile error
                   ChunkPalettedStorageFix.LOGGER.warn("In chunk: {}x{} found a duplicate block entity at position: [{}, {}, {}]", this.x, this.z, i, i2, i3);
                }
 
             }));
          boolean flag = dynamic.get("convertedFromAlphaFormat").asBoolean(false);
-         dynamic.get("Sections").asStreamOpt().result().ifPresent((stream) -> stream.forEach((dynamic) -> {
-               ChunkPalettedStorageFix.Section section = new ChunkPalettedStorageFix.Section(dynamic);
+         // MagmaCube start - decompile error
+         dynamic.get("Sections").asStreamOpt().result().ifPresent((stream) -> stream.forEach((dynamicx) -> {
+               ChunkPalettedStorageFix.Section section = new ChunkPalettedStorageFix.Section(dynamicx);
+               // MagmaCube end - decompile error
                this.sides = section.upgrade(this.sides);
                this.sections[section.y] = section;
             }));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ChunkStatusFix2.java b/src/main/java/net/minecraft/util/datafix/fixes/ChunkStatusFix2.java
index 33e06cbcc84137b45cb496fd7081fcd40618bec1..ff247ffe178bcb26237aeb2845121b8b06bccba8 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ChunkStatusFix2.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ChunkStatusFix2.java
@@ -12,7 +12,8 @@ import java.util.Map;
 import java.util.Objects;
 
 public class ChunkStatusFix2 extends DataFix {
-   private static final Map<String, String> RENAMES_AND_DOWNGRADES = ImmutableMap.builder().put("structure_references", "empty").put("biomes", "empty").put("base", "surface").put("carved", "carvers").put("liquid_carved", "liquid_carvers").put("decorated", "features").put("lighted", "light").put("mobs_spawned", "spawn").put("finalized", "heightmaps").put("fullchunk", "full").build();
+   // MagmaCube - decompile error
+   private static final Map<String, String> RENAMES_AND_DOWNGRADES = (Map) ImmutableMap.builder().put("structure_references", "empty").put("biomes", "empty").put("base", "surface").put("carved", "carvers").put("liquid_carved", "liquid_carvers").put("decorated", "features").put("lighted", "light").put("mobs_spawned", "spawn").put("finalized", "heightmaps").put("fullchunk", "full").build();
 
    public ChunkStatusFix2(Schema schema, boolean flag) {
       super(schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ChunkStructuresTemplateRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ChunkStructuresTemplateRenameFix.java
index dafa29a7a8cde2a1a4704b8e88370d2e8188e97f..4eaa5c6214747ace636ee2f69f8596a52732e55c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ChunkStructuresTemplateRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ChunkStructuresTemplateRenameFix.java
@@ -11,7 +11,8 @@ import com.mojang.datafixers.util.Pair;
 import com.mojang.serialization.Dynamic;
 
 public class ChunkStructuresTemplateRenameFix extends DataFix {
-   private static final ImmutableMap<String, Pair<String, ImmutableMap<String, String>>> RENAMES = ImmutableMap.builder().put("EndCity", Pair.of("ECP", ImmutableMap.builder().put("second_floor", "second_floor_1").put("third_floor", "third_floor_1").put("third_floor_c", "third_floor_2").build())).put("Mansion", Pair.of("WMP", ImmutableMap.builder().put("carpet_south", "carpet_south_1").put("carpet_west", "carpet_west_1").put("indoors_door", "indoors_door_1").put("indoors_wall", "indoors_wall_1").build())).put("Igloo", Pair.of("Iglu", ImmutableMap.builder().put("minecraft:igloo/igloo_bottom", "minecraft:igloo/bottom").put("minecraft:igloo/igloo_middle", "minecraft:igloo/middle").put("minecraft:igloo/igloo_top", "minecraft:igloo/top").build())).put("Ocean_Ruin", Pair.of("ORP", ImmutableMap.builder().put("minecraft:ruin/big_ruin1_brick", "minecraft:underwater_ruin/big_brick_1").put("minecraft:ruin/big_ruin2_brick", "minecraft:underwater_ruin/big_brick_2").put("minecraft:ruin/big_ruin3_brick", "minecraft:underwater_ruin/big_brick_3").put("minecraft:ruin/big_ruin8_brick", "minecraft:underwater_ruin/big_brick_8").put("minecraft:ruin/big_ruin1_cracked", "minecraft:underwater_ruin/big_cracked_1").put("minecraft:ruin/big_ruin2_cracked", "minecraft:underwater_ruin/big_cracked_2").put("minecraft:ruin/big_ruin3_cracked", "minecraft:underwater_ruin/big_cracked_3").put("minecraft:ruin/big_ruin8_cracked", "minecraft:underwater_ruin/big_cracked_8").put("minecraft:ruin/big_ruin1_mossy", "minecraft:underwater_ruin/big_mossy_1").put("minecraft:ruin/big_ruin2_mossy", "minecraft:underwater_ruin/big_mossy_2").put("minecraft:ruin/big_ruin3_mossy", "minecraft:underwater_ruin/big_mossy_3").put("minecraft:ruin/big_ruin8_mossy", "minecraft:underwater_ruin/big_mossy_8").put("minecraft:ruin/big_ruin_warm4", "minecraft:underwater_ruin/big_warm_4").put("minecraft:ruin/big_ruin_warm5", "minecraft:underwater_ruin/big_warm_5").put("minecraft:ruin/big_ruin_warm6", "minecraft:underwater_ruin/big_warm_6").put("minecraft:ruin/big_ruin_warm7", "minecraft:underwater_ruin/big_warm_7").put("minecraft:ruin/ruin1_brick", "minecraft:underwater_ruin/brick_1").put("minecraft:ruin/ruin2_brick", "minecraft:underwater_ruin/brick_2").put("minecraft:ruin/ruin3_brick", "minecraft:underwater_ruin/brick_3").put("minecraft:ruin/ruin4_brick", "minecraft:underwater_ruin/brick_4").put("minecraft:ruin/ruin5_brick", "minecraft:underwater_ruin/brick_5").put("minecraft:ruin/ruin6_brick", "minecraft:underwater_ruin/brick_6").put("minecraft:ruin/ruin7_brick", "minecraft:underwater_ruin/brick_7").put("minecraft:ruin/ruin8_brick", "minecraft:underwater_ruin/brick_8").put("minecraft:ruin/ruin1_cracked", "minecraft:underwater_ruin/cracked_1").put("minecraft:ruin/ruin2_cracked", "minecraft:underwater_ruin/cracked_2").put("minecraft:ruin/ruin3_cracked", "minecraft:underwater_ruin/cracked_3").put("minecraft:ruin/ruin4_cracked", "minecraft:underwater_ruin/cracked_4").put("minecraft:ruin/ruin5_cracked", "minecraft:underwater_ruin/cracked_5").put("minecraft:ruin/ruin6_cracked", "minecraft:underwater_ruin/cracked_6").put("minecraft:ruin/ruin7_cracked", "minecraft:underwater_ruin/cracked_7").put("minecraft:ruin/ruin8_cracked", "minecraft:underwater_ruin/cracked_8").put("minecraft:ruin/ruin1_mossy", "minecraft:underwater_ruin/mossy_1").put("minecraft:ruin/ruin2_mossy", "minecraft:underwater_ruin/mossy_2").put("minecraft:ruin/ruin3_mossy", "minecraft:underwater_ruin/mossy_3").put("minecraft:ruin/ruin4_mossy", "minecraft:underwater_ruin/mossy_4").put("minecraft:ruin/ruin5_mossy", "minecraft:underwater_ruin/mossy_5").put("minecraft:ruin/ruin6_mossy", "minecraft:underwater_ruin/mossy_6").put("minecraft:ruin/ruin7_mossy", "minecraft:underwater_ruin/mossy_7").put("minecraft:ruin/ruin8_mossy", "minecraft:underwater_ruin/mossy_8").put("minecraft:ruin/ruin_warm1", "minecraft:underwater_ruin/warm_1").put("minecraft:ruin/ruin_warm2", "minecraft:underwater_ruin/warm_2").put("minecraft:ruin/ruin_warm3", "minecraft:underwater_ruin/warm_3").put("minecraft:ruin/ruin_warm4", "minecraft:underwater_ruin/warm_4").put("minecraft:ruin/ruin_warm5", "minecraft:underwater_ruin/warm_5").put("minecraft:ruin/ruin_warm6", "minecraft:underwater_ruin/warm_6").put("minecraft:ruin/ruin_warm7", "minecraft:underwater_ruin/warm_7").put("minecraft:ruin/ruin_warm8", "minecraft:underwater_ruin/warm_8").put("minecraft:ruin/big_brick_1", "minecraft:underwater_ruin/big_brick_1").put("minecraft:ruin/big_brick_2", "minecraft:underwater_ruin/big_brick_2").put("minecraft:ruin/big_brick_3", "minecraft:underwater_ruin/big_brick_3").put("minecraft:ruin/big_brick_8", "minecraft:underwater_ruin/big_brick_8").put("minecraft:ruin/big_mossy_1", "minecraft:underwater_ruin/big_mossy_1").put("minecraft:ruin/big_mossy_2", "minecraft:underwater_ruin/big_mossy_2").put("minecraft:ruin/big_mossy_3", "minecraft:underwater_ruin/big_mossy_3").put("minecraft:ruin/big_mossy_8", "minecraft:underwater_ruin/big_mossy_8").put("minecraft:ruin/big_cracked_1", "minecraft:underwater_ruin/big_cracked_1").put("minecraft:ruin/big_cracked_2", "minecraft:underwater_ruin/big_cracked_2").put("minecraft:ruin/big_cracked_3", "minecraft:underwater_ruin/big_cracked_3").put("minecraft:ruin/big_cracked_8", "minecraft:underwater_ruin/big_cracked_8").put("minecraft:ruin/big_warm_4", "minecraft:underwater_ruin/big_warm_4").put("minecraft:ruin/big_warm_5", "minecraft:underwater_ruin/big_warm_5").put("minecraft:ruin/big_warm_6", "minecraft:underwater_ruin/big_warm_6").put("minecraft:ruin/big_warm_7", "minecraft:underwater_ruin/big_warm_7").build())).build();
+   // MagmaCube - decompile error
+   private static final ImmutableMap<String, Pair<String, ImmutableMap<String, String>>> RENAMES = (ImmutableMap) ImmutableMap.builder().put("EndCity", Pair.of("ECP", ImmutableMap.builder().put("second_floor", "second_floor_1").put("third_floor", "third_floor_1").put("third_floor_c", "third_floor_2").build())).put("Mansion", Pair.of("WMP", ImmutableMap.builder().put("carpet_south", "carpet_south_1").put("carpet_west", "carpet_west_1").put("indoors_door", "indoors_door_1").put("indoors_wall", "indoors_wall_1").build())).put("Igloo", Pair.of("Iglu", ImmutableMap.builder().put("minecraft:igloo/igloo_bottom", "minecraft:igloo/bottom").put("minecraft:igloo/igloo_middle", "minecraft:igloo/middle").put("minecraft:igloo/igloo_top", "minecraft:igloo/top").build())).put("Ocean_Ruin", Pair.of("ORP", ImmutableMap.builder().put("minecraft:ruin/big_ruin1_brick", "minecraft:underwater_ruin/big_brick_1").put("minecraft:ruin/big_ruin2_brick", "minecraft:underwater_ruin/big_brick_2").put("minecraft:ruin/big_ruin3_brick", "minecraft:underwater_ruin/big_brick_3").put("minecraft:ruin/big_ruin8_brick", "minecraft:underwater_ruin/big_brick_8").put("minecraft:ruin/big_ruin1_cracked", "minecraft:underwater_ruin/big_cracked_1").put("minecraft:ruin/big_ruin2_cracked", "minecraft:underwater_ruin/big_cracked_2").put("minecraft:ruin/big_ruin3_cracked", "minecraft:underwater_ruin/big_cracked_3").put("minecraft:ruin/big_ruin8_cracked", "minecraft:underwater_ruin/big_cracked_8").put("minecraft:ruin/big_ruin1_mossy", "minecraft:underwater_ruin/big_mossy_1").put("minecraft:ruin/big_ruin2_mossy", "minecraft:underwater_ruin/big_mossy_2").put("minecraft:ruin/big_ruin3_mossy", "minecraft:underwater_ruin/big_mossy_3").put("minecraft:ruin/big_ruin8_mossy", "minecraft:underwater_ruin/big_mossy_8").put("minecraft:ruin/big_ruin_warm4", "minecraft:underwater_ruin/big_warm_4").put("minecraft:ruin/big_ruin_warm5", "minecraft:underwater_ruin/big_warm_5").put("minecraft:ruin/big_ruin_warm6", "minecraft:underwater_ruin/big_warm_6").put("minecraft:ruin/big_ruin_warm7", "minecraft:underwater_ruin/big_warm_7").put("minecraft:ruin/ruin1_brick", "minecraft:underwater_ruin/brick_1").put("minecraft:ruin/ruin2_brick", "minecraft:underwater_ruin/brick_2").put("minecraft:ruin/ruin3_brick", "minecraft:underwater_ruin/brick_3").put("minecraft:ruin/ruin4_brick", "minecraft:underwater_ruin/brick_4").put("minecraft:ruin/ruin5_brick", "minecraft:underwater_ruin/brick_5").put("minecraft:ruin/ruin6_brick", "minecraft:underwater_ruin/brick_6").put("minecraft:ruin/ruin7_brick", "minecraft:underwater_ruin/brick_7").put("minecraft:ruin/ruin8_brick", "minecraft:underwater_ruin/brick_8").put("minecraft:ruin/ruin1_cracked", "minecraft:underwater_ruin/cracked_1").put("minecraft:ruin/ruin2_cracked", "minecraft:underwater_ruin/cracked_2").put("minecraft:ruin/ruin3_cracked", "minecraft:underwater_ruin/cracked_3").put("minecraft:ruin/ruin4_cracked", "minecraft:underwater_ruin/cracked_4").put("minecraft:ruin/ruin5_cracked", "minecraft:underwater_ruin/cracked_5").put("minecraft:ruin/ruin6_cracked", "minecraft:underwater_ruin/cracked_6").put("minecraft:ruin/ruin7_cracked", "minecraft:underwater_ruin/cracked_7").put("minecraft:ruin/ruin8_cracked", "minecraft:underwater_ruin/cracked_8").put("minecraft:ruin/ruin1_mossy", "minecraft:underwater_ruin/mossy_1").put("minecraft:ruin/ruin2_mossy", "minecraft:underwater_ruin/mossy_2").put("minecraft:ruin/ruin3_mossy", "minecraft:underwater_ruin/mossy_3").put("minecraft:ruin/ruin4_mossy", "minecraft:underwater_ruin/mossy_4").put("minecraft:ruin/ruin5_mossy", "minecraft:underwater_ruin/mossy_5").put("minecraft:ruin/ruin6_mossy", "minecraft:underwater_ruin/mossy_6").put("minecraft:ruin/ruin7_mossy", "minecraft:underwater_ruin/mossy_7").put("minecraft:ruin/ruin8_mossy", "minecraft:underwater_ruin/mossy_8").put("minecraft:ruin/ruin_warm1", "minecraft:underwater_ruin/warm_1").put("minecraft:ruin/ruin_warm2", "minecraft:underwater_ruin/warm_2").put("minecraft:ruin/ruin_warm3", "minecraft:underwater_ruin/warm_3").put("minecraft:ruin/ruin_warm4", "minecraft:underwater_ruin/warm_4").put("minecraft:ruin/ruin_warm5", "minecraft:underwater_ruin/warm_5").put("minecraft:ruin/ruin_warm6", "minecraft:underwater_ruin/warm_6").put("minecraft:ruin/ruin_warm7", "minecraft:underwater_ruin/warm_7").put("minecraft:ruin/ruin_warm8", "minecraft:underwater_ruin/warm_8").put("minecraft:ruin/big_brick_1", "minecraft:underwater_ruin/big_brick_1").put("minecraft:ruin/big_brick_2", "minecraft:underwater_ruin/big_brick_2").put("minecraft:ruin/big_brick_3", "minecraft:underwater_ruin/big_brick_3").put("minecraft:ruin/big_brick_8", "minecraft:underwater_ruin/big_brick_8").put("minecraft:ruin/big_mossy_1", "minecraft:underwater_ruin/big_mossy_1").put("minecraft:ruin/big_mossy_2", "minecraft:underwater_ruin/big_mossy_2").put("minecraft:ruin/big_mossy_3", "minecraft:underwater_ruin/big_mossy_3").put("minecraft:ruin/big_mossy_8", "minecraft:underwater_ruin/big_mossy_8").put("minecraft:ruin/big_cracked_1", "minecraft:underwater_ruin/big_cracked_1").put("minecraft:ruin/big_cracked_2", "minecraft:underwater_ruin/big_cracked_2").put("minecraft:ruin/big_cracked_3", "minecraft:underwater_ruin/big_cracked_3").put("minecraft:ruin/big_cracked_8", "minecraft:underwater_ruin/big_cracked_8").put("minecraft:ruin/big_warm_4", "minecraft:underwater_ruin/big_warm_4").put("minecraft:ruin/big_warm_5", "minecraft:underwater_ruin/big_warm_5").put("minecraft:ruin/big_warm_6", "minecraft:underwater_ruin/big_warm_6").put("minecraft:ruin/big_warm_7", "minecraft:underwater_ruin/big_warm_7").build())).build();
 
    public ChunkStructuresTemplateRenameFix(Schema schema, boolean flag) {
       super(schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ChunkToProtochunkFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ChunkToProtochunkFix.java
index 19473da5fa4af6f9a1fabd894a11030ee0db97a0..fc4db196f92e490796d4dadf5fe988f854d8f4e7 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ChunkToProtochunkFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ChunkToProtochunkFix.java
@@ -34,7 +34,7 @@ public class ChunkToProtochunkFix extends DataFix {
       OpticFinder<?> opticFinder = DSL.fieldFinder("Level", type3);
       OpticFinder<?> opticFinder2 = DSL.fieldFinder("TileTicks", type5);
       return TypeRewriteRule.seq(this.fixTypeEverywhereTyped("ChunkToProtoChunkFix", type, this.getOutputSchema().getType(References.CHUNK), (typed) -> typed.updateTyped(opticFinder, type4, (typedx) -> {
-            Optional<? extends Stream<? extends Dynamic<?>>> optional = typedx.getOptionalTyped(opticFinder2).flatMap((typed) -> typed.write().result()).flatMap((dynamicx) -> dynamicx.asStreamOpt().result());
+            Optional<? extends Stream<? extends Dynamic<?>>> optional = typedx.getOptionalTyped(opticFinder2).flatMap((typedz) -> typedz.write().result()).flatMap((dynamicx) -> dynamicx.asStreamOpt().result()); // MagmaCube - decompile error
             Dynamic<?> dynamic = (Dynamic)typedx.get(DSL.remainderFinder());
             boolean flag = dynamic.get("TerrainPopulated").asBoolean(false) && (!dynamic.get("LightPopulated").asNumber().result().isPresent() || dynamic.get("LightPopulated").asBoolean(false));
             dynamic = dynamic.set("Status", dynamic.createString(flag ? "mobs_spawned" : "empty"));
@@ -58,7 +58,7 @@ public class ChunkToProtochunkFix extends DataFix {
                Dynamic<?> dynamic2 = dynamic;
                List<ShortList> list = (List)IntStream.range(0, 16).mapToObj((ix) -> new ShortArrayList()).collect(Collectors.toList());
                if (optional.isPresent()) {
-                  ((Stream)optional.get()).forEach((dynamicx) -> {
+                  (optional.get()).forEach((dynamicx) -> { // MagmaCube - decompile error
                      int i = dynamicx.get("x").asInt(0);
                      int i2 = dynamicx.get("y").asInt(0);
                      int i3 = dynamicx.get("z").asInt(0);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/DyeItemRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/DyeItemRenameFix.java
index 8a5a740a554ad109a5569b6824b32a8697d588f2..970e5c8035eadaf233c90db547afa7cfc8c112c5 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/DyeItemRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/DyeItemRenameFix.java
@@ -4,5 +4,6 @@ import com.google.common.collect.ImmutableMap;
 import java.util.Map;
 
 public class DyeItemRenameFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:cactus_green", "minecraft:green_dye").put("minecraft:rose_red", "minecraft:red_dye").put("minecraft:dandelion_yellow", "minecraft:yellow_dye").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:cactus_green", "minecraft:green_dye").put("minecraft:rose_red", "minecraft:red_dye").put("minecraft:dandelion_yellow", "minecraft:yellow_dye").build();
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityBlockStateFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityBlockStateFix.java
index c312eed007be49bf0b5f0cb70c9c581f6afce04a..4d90e6f41e24b9aed0573ca5e0599a6c6136c51d 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityBlockStateFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityBlockStateFix.java
@@ -18,7 +18,7 @@ import java.util.function.Function;
 import net.minecraft.util.datafix.schemas.NamespacedSchema;
 
 public class EntityBlockStateFix extends DataFix {
-   private static final Map<String, Integer> MAP = (Map)DataFixUtils.make(Maps.newHashMap(), (hashMap) -> {
+   private static final Map<String, Integer> MAP = DataFixUtils.make(Maps.newHashMap(), (hashMap) -> { // MagmaCube - type
       hashMap.put("minecraft:air", 0);
       hashMap.put("minecraft:stone", 1);
       hashMap.put("minecraft:grass", 2);
@@ -319,7 +319,7 @@ public class EntityBlockStateFix extends DataFix {
       Type<Either<Pair<String, Dynamic<?>>, Unit>> type2 = DSL.optional(DSL.field("BlockState", DSL.named(References.BLOCK_STATE.typeName(), DSL.remainderType())));
       Dynamic<?> dynamic = (Dynamic)typed.get(DSL.remainderFinder());
       return typed.update(type.finder(), type2, (either) -> {
-         int i = either.map((pair) -> (Integer)((Either)pair.getSecond()).map((integer) -> integer, EntityBlockStateFix::getBlockId), (unit) -> {
+         int i = either.map((pair) -> (Integer)(pair.getSecond()).map((integer) -> integer, EntityBlockStateFix::getBlockId), (unit) -> { // MagmaCube - decompile error
             Optional<Number> optional = dynamic.get("TileID").asNumber().result();
             return (Integer)optional.map(Number::intValue).orElseGet(() -> dynamic.get("Tile").asByte((byte)0) & 255);
          });
@@ -333,7 +333,7 @@ public class EntityBlockStateFix extends DataFix {
       Type<Pair<String, Dynamic<?>>> type2 = DSL.field(s3, DSL.named(References.BLOCK_STATE.typeName(), DSL.remainderType()));
       Dynamic<?> dynamic = (Dynamic)typed.getOrCreate(DSL.remainderFinder());
       return typed.update(type.finder(), type2, (pair) -> {
-         int i = ((Either)pair.getSecond()).map((integer) -> integer, EntityBlockStateFix::getBlockId);
+         int i = (pair.getSecond()).map((integer) -> integer, EntityBlockStateFix::getBlockId); // MagmaCube - decompile error
          int i2 = dynamic.get(s2).asInt(0) & 15;
          return Pair.of(References.BLOCK_STATE.typeName(), BlockStateData.getTag(i << 4 | i2));
       }).set(DSL.remainderFinder(), dynamic.remove(s2));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityCodSalmonFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityCodSalmonFix.java
index 17696e5a243fb4dda3db5a4c6b36e6e5c0f9a532..1153c091acc1a3bd6f102da75d54ffd33fb9b06e 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityCodSalmonFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityCodSalmonFix.java
@@ -5,8 +5,10 @@ import com.mojang.datafixers.schemas.Schema;
 import java.util.Map;
 
 public class EntityCodSalmonFix extends SimplestEntityRenameFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:salmon_mob", "minecraft:salmon").put("minecraft:cod_mob", "minecraft:cod").build();
-   public static final Map<String, String> RENAMED_EGG_IDS = ImmutableMap.builder().put("minecraft:salmon_mob_spawn_egg", "minecraft:salmon_spawn_egg").put("minecraft:cod_mob_spawn_egg", "minecraft:cod_spawn_egg").build();
+   // MagmaCube start - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:salmon_mob", "minecraft:salmon").put("minecraft:cod_mob", "minecraft:cod").build();
+   public static final Map<String, String> RENAMED_EGG_IDS = (Map) ImmutableMap.builder().put("minecraft:salmon_mob_spawn_egg", "minecraft:salmon_spawn_egg").put("minecraft:cod_mob_spawn_egg", "minecraft:cod_spawn_egg").build();
+   // MagmaCube end - decompile error
 
    public EntityCodSalmonFix(Schema schema, boolean flag) {
       super("EntityCodSalmonFix", schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityEquipmentToArmorAndHandFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityEquipmentToArmorAndHandFix.java
index 479b1ddd19745778b5956c87dd27d3ce9e1b4911..aab1050b2a5fc706ff1935ddb977a6e07320b6a6 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityEquipmentToArmorAndHandFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityEquipmentToArmorAndHandFix.java
@@ -39,11 +39,11 @@ public class EntityEquipmentToArmorAndHandFix extends DataFix {
             List<IS> list = (List)optional.get();
             IS object = (IS)((Pair)type.read(dynamic.emptyMap()).result().orElseThrow(() -> new IllegalStateException("Could not parse newly created empty itemstack."))).getFirst();
             if (!list.isEmpty()) {
-               either = Either.left(Lists.newArrayList(new Object[]{list.get(0), object}));
+               either = Either.left((List<IS>) Lists.newArrayList(new Object[]{list.get(0), object})); // MagmaCube - decompile error
             }
 
             if (list.size() > 1) {
-               List<IS> list2 = Lists.newArrayList(new Object[]{object, object, object, object});
+               List<IS> list2 = (List<IS>) Lists.newArrayList(new Object[]{object, object, object, object}); // MagmaCube - decompile error
 
                for(int i = 1; i < Math.min(list.size(), 5); ++i) {
                   list2.set(i - 1, list.get(i));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityHorseSplitFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityHorseSplitFix.java
index 7f0059ab0a570c65afea2e55d0e4d6b90bcac2a8..5a59bebd642a24c20fcdfd5a552846d295d8dffb 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityHorseSplitFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityHorseSplitFix.java
@@ -38,7 +38,7 @@ public class EntityHorseSplitFix extends EntityRenameFix {
 
          dynamic.remove("Type");
          Type<?> type = (Type)this.getOutputSchema().findChoiceType(References.ENTITY).types().get(s2);
-         return Pair.of(s2, ((Pair)typed.write().flatMap(type::readTyped).result().orElseThrow(() -> new IllegalStateException("Could not parse the new horse"))).getFirst());
+         return Pair.of(s2, (typed.write().flatMap(type::readTyped).result().orElseThrow(() -> new IllegalStateException("Could not parse the new horse"))).getFirst()); // MagmaCube - decompile error
       } else {
          return Pair.of(s, typed);
       }
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityIdFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityIdFix.java
index 9a3705beb956c42aff5ab9642c7f40d904da986f..fdb7fbe8fd6dfaed77d76bce79442fb0aa8e6a1c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityIdFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityIdFix.java
@@ -93,8 +93,10 @@ public class EntityIdFix extends DataFix {
    }
 
    public TypeRewriteRule makeRule() {
-      TaggedChoiceType<String> taggedChoiceType = this.getInputSchema().findChoiceType(References.ENTITY);
-      TaggedChoiceType<String> taggedChoiceType2 = this.getOutputSchema().findChoiceType(References.ENTITY);
+      // MagmaCube start - decompile error
+      TaggedChoiceType<String> taggedChoiceType = (TaggedChoiceType<String>) this.getInputSchema().findChoiceType(References.ENTITY);
+      TaggedChoiceType<String> taggedChoiceType2 = (TaggedChoiceType<String>) this.getOutputSchema().findChoiceType(References.ENTITY);
+      // MagmaCube end - decompile error
       Type<?> type = this.getInputSchema().getType(References.ITEM_STACK);
       Type<?> type2 = this.getOutputSchema().getType(References.ITEM_STACK);
       return TypeRewriteRule.seq(this.convertUnchecked("item stack entity name hook converter", type, type2), this.fixTypeEverywhere("EntityIdFix", taggedChoiceType, taggedChoiceType2, (dynamicOps) -> (pair) -> pair.mapFirst((s) -> (String)ID_MAP.getOrDefault(s, s))));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityMinecartIdentifiersFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityMinecartIdentifiersFix.java
index da3846e39f978b8106f137ad790a781d6f1171cd..5b4ff2f785dbedb42bd378c28043522baa644395 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityMinecartIdentifiersFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityMinecartIdentifiersFix.java
@@ -21,8 +21,10 @@ public class EntityMinecartIdentifiersFix extends DataFix {
    }
 
    public TypeRewriteRule makeRule() {
-      TaggedChoiceType<String> taggedChoiceType = this.getInputSchema().findChoiceType(References.ENTITY);
-      TaggedChoiceType<String> taggedChoiceType2 = this.getOutputSchema().findChoiceType(References.ENTITY);
+      // MagmaCube start - decompile error
+      TaggedChoiceType<String> taggedChoiceType = (TaggedChoiceType<String>) this.getInputSchema().findChoiceType(References.ENTITY);
+      TaggedChoiceType<String> taggedChoiceType2 = (TaggedChoiceType<String>) this.getOutputSchema().findChoiceType(References.ENTITY);
+      // MagmaCube end - decompile error
       return this.fixTypeEverywhere("EntityMinecartIdentifiersFix", taggedChoiceType, taggedChoiceType2, (dynamicOps) -> (pair) -> {
             if (!Objects.equals(pair.getFirst(), "Minecart")) {
                return pair;
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityPufferfishRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityPufferfishRenameFix.java
index a30f7be56f133fda9873a4e2f5b4159697425d5a..8194dc5cf51e484f0e6e4c9632db776fd8bc68c8 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityPufferfishRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityPufferfishRenameFix.java
@@ -6,7 +6,8 @@ import java.util.Map;
 import java.util.Objects;
 
 public class EntityPufferfishRenameFix extends SimplestEntityRenameFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:puffer_fish_spawn_egg", "minecraft:pufferfish_spawn_egg").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:puffer_fish_spawn_egg", "minecraft:pufferfish_spawn_egg").build();
 
    public EntityPufferfishRenameFix(Schema schema, boolean flag) {
       super("EntityPufferfishRenameFix", schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityRavagerRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityRavagerRenameFix.java
index 36aa280142557b2f08c771abb5f4d950ed001b6f..e26993da953f5a612c4c5d28c12f82b96130b1f6 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityRavagerRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityRavagerRenameFix.java
@@ -6,7 +6,8 @@ import java.util.Map;
 import java.util.Objects;
 
 public class EntityRavagerRenameFix extends SimplestEntityRenameFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:illager_beast_spawn_egg", "minecraft:ravager_spawn_egg").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:illager_beast_spawn_egg", "minecraft:ravager_spawn_egg").build();
 
    public EntityRavagerRenameFix(Schema schema, boolean flag) {
       super("EntityRavagerRenameFix", schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityRenameFix.java
index 311c886c6de7afa4c66459956ddd2fb6e7c44783..4d09e033677dbe8a3759c92fdfbcf8ae78270951 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityRenameFix.java
@@ -18,8 +18,10 @@ public abstract class EntityRenameFix extends DataFix {
    }
 
    public TypeRewriteRule makeRule() {
-      TaggedChoiceType<String> taggedChoiceType = this.getInputSchema().findChoiceType(References.ENTITY);
-      TaggedChoiceType<String> taggedChoiceType2 = this.getOutputSchema().findChoiceType(References.ENTITY);
+       // MagmaCube start - decompile error
+      TaggedChoiceType<String> taggedChoiceType = (TaggedChoiceType<String>) this.getInputSchema().findChoiceType(References.ENTITY);
+      TaggedChoiceType<String> taggedChoiceType2 = (TaggedChoiceType<String>) this.getOutputSchema().findChoiceType(References.ENTITY);
+       // MagmaCube end - decompile error
       return this.fixTypeEverywhere(this.name, taggedChoiceType, taggedChoiceType2, (dynamicOps) -> (pair) -> {
             String s = (String)pair.getFirst();
             Type<?> type = (Type)taggedChoiceType.types().get(s);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityRidingToPassengersFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityRidingToPassengersFix.java
index da0a80f926bff0081068e19f5408b28378fad37c..19e0c56a9ea31e09e91a4a03c73d01c9f54855b2 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityRidingToPassengersFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityRidingToPassengersFix.java
@@ -55,13 +55,13 @@ public class EntityRidingToPassengersFix extends DataFix {
                      NewEntityTree object = (NewEntityTree)typed.set(opticFinder2, pairx).getOptional(opticFinder3).orElseThrow(() -> new IllegalStateException("Should always have an entity tree here"));
                      return Either.left(ImmutableList.of(object));
                   }), Either.right(DSL.unit()));
-                  optional = Optional.of(Pair.of(References.ENTITY_TREE.typeName(), Pair.of(either, ((Pair)pair2.getSecond()).getSecond())));
+                  optional = Optional.of(Pair.of(References.ENTITY_TREE.typeName(), Pair.of(either, (pair2.getSecond()).getSecond()))); // MagmaCube - decompile error
                   Optional<OldEntityTree> optional2 = ((Either)((Pair)pair2.getSecond()).getFirst()).left();
                   if (!optional2.isPresent()) {
                      return (Pair)optional.orElseThrow(() -> new IllegalStateException("Should always have an entity tree here"));
                   }
 
-                  pair2 = (Pair)(new Typed(type, dynamicOps, optional2.get())).getOptional(opticFinder).orElseThrow(() -> new IllegalStateException("Should always have an entity here"));
+                  pair2 = (new Typed<>(type, dynamicOps, optional2.get())).getOptional(opticFinder).orElseThrow(() -> new IllegalStateException("Should always have an entity here")); // MagmaCube - decompile error
                }
             }), this.writeAndRead("player RootVehicle injecter", type8, type9));
       }
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityTheRenameningFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityTheRenameningFix.java
index ed5332a8ec92d1833b06a2d34959337accbf475e..b0f994f19124c8545863bad87d37c5a5e10332f1 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityTheRenameningFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityTheRenameningFix.java
@@ -5,9 +5,11 @@ import com.mojang.datafixers.schemas.Schema;
 import java.util.Map;
 
 public class EntityTheRenameningFix extends SimplestEntityRenameFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:commandblock_minecart", "minecraft:command_block_minecart").put("minecraft:ender_crystal", "minecraft:end_crystal").put("minecraft:snowman", "minecraft:snow_golem").put("minecraft:evocation_illager", "minecraft:evoker").put("minecraft:evocation_fangs", "minecraft:evoker_fangs").put("minecraft:illusion_illager", "minecraft:illusioner").put("minecraft:vindication_illager", "minecraft:vindicator").put("minecraft:villager_golem", "minecraft:iron_golem").put("minecraft:xp_orb", "minecraft:experience_orb").put("minecraft:xp_bottle", "minecraft:experience_bottle").put("minecraft:eye_of_ender_signal", "minecraft:eye_of_ender").put("minecraft:fireworks_rocket", "minecraft:firework_rocket").build();
-   public static final Map<String, String> RENAMED_BLOCKS = ImmutableMap.builder().put("minecraft:portal", "minecraft:nether_portal").put("minecraft:oak_bark", "minecraft:oak_wood").put("minecraft:spruce_bark", "minecraft:spruce_wood").put("minecraft:birch_bark", "minecraft:birch_wood").put("minecraft:jungle_bark", "minecraft:jungle_wood").put("minecraft:acacia_bark", "minecraft:acacia_wood").put("minecraft:dark_oak_bark", "minecraft:dark_oak_wood").put("minecraft:stripped_oak_bark", "minecraft:stripped_oak_wood").put("minecraft:stripped_spruce_bark", "minecraft:stripped_spruce_wood").put("minecraft:stripped_birch_bark", "minecraft:stripped_birch_wood").put("minecraft:stripped_jungle_bark", "minecraft:stripped_jungle_wood").put("minecraft:stripped_acacia_bark", "minecraft:stripped_acacia_wood").put("minecraft:stripped_dark_oak_bark", "minecraft:stripped_dark_oak_wood").put("minecraft:mob_spawner", "minecraft:spawner").build();
-   public static final Map<String, String> RENAMED_ITEMS = ImmutableMap.builder().putAll(RENAMED_BLOCKS).put("minecraft:clownfish", "minecraft:tropical_fish").put("minecraft:chorus_fruit_popped", "minecraft:popped_chorus_fruit").put("minecraft:evocation_illager_spawn_egg", "minecraft:evoker_spawn_egg").put("minecraft:vindication_illager_spawn_egg", "minecraft:vindicator_spawn_egg").build();
+   // MagmaCube start - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:commandblock_minecart", "minecraft:command_block_minecart").put("minecraft:ender_crystal", "minecraft:end_crystal").put("minecraft:snowman", "minecraft:snow_golem").put("minecraft:evocation_illager", "minecraft:evoker").put("minecraft:evocation_fangs", "minecraft:evoker_fangs").put("minecraft:illusion_illager", "minecraft:illusioner").put("minecraft:vindication_illager", "minecraft:vindicator").put("minecraft:villager_golem", "minecraft:iron_golem").put("minecraft:xp_orb", "minecraft:experience_orb").put("minecraft:xp_bottle", "minecraft:experience_bottle").put("minecraft:eye_of_ender_signal", "minecraft:eye_of_ender").put("minecraft:fireworks_rocket", "minecraft:firework_rocket").build();
+   public static final Map<String, String> RENAMED_BLOCKS = (Map) ImmutableMap.builder().put("minecraft:portal", "minecraft:nether_portal").put("minecraft:oak_bark", "minecraft:oak_wood").put("minecraft:spruce_bark", "minecraft:spruce_wood").put("minecraft:birch_bark", "minecraft:birch_wood").put("minecraft:jungle_bark", "minecraft:jungle_wood").put("minecraft:acacia_bark", "minecraft:acacia_wood").put("minecraft:dark_oak_bark", "minecraft:dark_oak_wood").put("minecraft:stripped_oak_bark", "minecraft:stripped_oak_wood").put("minecraft:stripped_spruce_bark", "minecraft:stripped_spruce_wood").put("minecraft:stripped_birch_bark", "minecraft:stripped_birch_wood").put("minecraft:stripped_jungle_bark", "minecraft:stripped_jungle_wood").put("minecraft:stripped_acacia_bark", "minecraft:stripped_acacia_wood").put("minecraft:stripped_dark_oak_bark", "minecraft:stripped_dark_oak_wood").put("minecraft:mob_spawner", "minecraft:spawner").build();
+   public static final Map<String, String> RENAMED_ITEMS = (Map) ImmutableMap.builder().putAll(RENAMED_BLOCKS).put("minecraft:clownfish", "minecraft:tropical_fish").put("minecraft:chorus_fruit_popped", "minecraft:popped_chorus_fruit").put("minecraft:evocation_illager_spawn_egg", "minecraft:evoker_spawn_egg").put("minecraft:vindication_illager_spawn_egg", "minecraft:vindicator_spawn_egg").build();
+   // MagmaCube end - decompile error
 
    public EntityTheRenameningFix(Schema schema, boolean flag) {
       super("EntityTheRenameningBlock", schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityUUIDFix.java
index 89afdbe310f85a61ab5e6dbedae0183c9caa35ea..c34c976f5d2ce974016a20ed3fa14d0fa664a08c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityUUIDFix.java
@@ -62,9 +62,10 @@ public class EntityUUIDFix extends AbstractUUIDFix {
    }
 
    private static Dynamic<?> updatePiglin(Dynamic<?> dynamic) {
-      return dynamic.update("Brain", (dynamicx) -> dynamicx.update("memories", (dynamic) -> dynamic.update("minecraft:angry_at", (dynamicx) -> (Dynamic)replaceUUIDString(dynamicx, "value", "value").orElseGet(() -> {
+      // MagmaCube - decompile error
+      return dynamic.update("Brain", (dynamicx) -> dynamicx.update("memories", (dynamicxxx) -> dynamicxxx.update("minecraft:angry_at", (dynamicxx) -> (Dynamic)replaceUUIDString(dynamicxx, "value", "value").orElseGet(() -> {
                   LOGGER.warn("angry_at has no value.");
-                  return dynamicx;
+                  return dynamicxx;
                }))));
    }
 
@@ -91,7 +92,7 @@ public class EntityUUIDFix extends AbstractUUIDFix {
    }
 
    private static Dynamic<?> updateFox(Dynamic<?> dynamic) {
-      Optional<Dynamic<?>> optional = dynamic.get("TrustedUUIDs").result().map((dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> (Dynamic)createUUIDFromML(dynamicx).orElseGet(() -> {
+      Optional<Dynamic<?>> optional = dynamic.get("TrustedUUIDs").result().map((dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> createUUIDFromML(dynamicx).orElseGet(() -> { // MagmaCube - decompile error
                LOGGER.warn("Trusted contained invalid data.");
                return dynamicx;
             }))));
@@ -117,7 +118,8 @@ public class EntityUUIDFix extends AbstractUUIDFix {
    }
 
    public static Dynamic<?> updateLivingEntity(Dynamic<?> dynamic) {
-      return dynamic.update("Attributes", (dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> dynamicx.update("Modifiers", (dynamic2) -> dynamicx.createList(dynamic2.asStream().map((dynamic) -> (Dynamic)replaceUUIDLeastMost(dynamic, "UUID", "UUID").orElse(dynamic)))))));
+      // MagmaCube - decompile error
+      return dynamic.update("Attributes", (dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> dynamicx.update("Modifiers", (dynamic2x) -> dynamicx.createList(dynamic2x.asStream().map((dynamicxx) -> replaceUUIDLeastMost(dynamicxx, "UUID", "UUID").orElse(dynamicxx))))))); // MagmaCube - decompile error
    }
 
    private static Dynamic<?> updateProjectile(Dynamic<?> dynamic) {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/EntityZombifiedPiglinRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/EntityZombifiedPiglinRenameFix.java
index 0f6eb2098c44a97c4fd3675402c37cbdaca34b71..58aae7e26b5152fd623e4e4650ab27358a3b3d30 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/EntityZombifiedPiglinRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/EntityZombifiedPiglinRenameFix.java
@@ -6,7 +6,8 @@ import java.util.Map;
 import java.util.Objects;
 
 public class EntityZombifiedPiglinRenameFix extends SimplestEntityRenameFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:zombie_pigman_spawn_egg", "minecraft:zombified_piglin_spawn_egg").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:zombie_pigman_spawn_egg", "minecraft:zombified_piglin_spawn_egg").build();
 
    public EntityZombifiedPiglinRenameFix(Schema schema) {
       super("EntityZombifiedPiglinRenameFix", schema, true);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ForcePoiRebuild.java b/src/main/java/net/minecraft/util/datafix/fixes/ForcePoiRebuild.java
index d84b8e77458acab89b25a170d1fcf97635d03af9..b28994a9acf0777e2613811c642c752f56035f9e 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ForcePoiRebuild.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ForcePoiRebuild.java
@@ -24,6 +24,6 @@ public class ForcePoiRebuild extends DataFix {
    }
 
    private static <T> Dynamic<T> cap(Dynamic<T> dynamic) {
-      return dynamic.update("Sections", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamic) -> dynamic.remove("Valid"))));
+      return dynamic.update("Sections", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamicz) -> dynamicz.remove("Valid")))); // MagmaCube - decompile error
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/FurnaceRecipeFix.java b/src/main/java/net/minecraft/util/datafix/fixes/FurnaceRecipeFix.java
index e34988489a7eb08fad5f3de730938f1576ca1f68..07d5552b1cb6d02f76bdb4cb493e8381bd0bff45 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/FurnaceRecipeFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/FurnaceRecipeFix.java
@@ -50,8 +50,10 @@ public class FurnaceRecipeFix extends DataFix {
          int i3 = dynamic.get(s2).asInt(0);
          if (i3 > 0) {
             optional.ifPresent((dynamicx) -> {
-               Optional<? extends Pair<R, ? extends Dynamic<?>>> optional = type.read(dynamicx).result();
-               optional.ifPresent((pair) -> list.add(Pair.of(pair.getFirst(), i3)));
+               // MagmaCube start - decompile error
+               Optional<? extends Pair<R, ? extends Dynamic<?>>> optionalx = type.read(dynamicx).result();
+               optionalx.ifPresent((pair) -> list.add(Pair.of(pair.getFirst(), i3)));
+               // MagmaCube end - decompile error
             });
          }
 
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/GossipUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/GossipUUIDFix.java
index 4eb76706d6386bee940798d1d9edd171b03d242f..9af3d966cf4ce61495682d1e526103e0d3d57560 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/GossipUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/GossipUUIDFix.java
@@ -12,6 +12,6 @@ public class GossipUUIDFix extends NamedEntityFix {
    }
 
    protected Typed<?> fix(Typed<?> typed) {
-      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Gossips", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().result().map((stream) -> stream.map((dynamic) -> (Dynamic)AbstractUUIDFix.replaceUUIDLeastMost(dynamic, "Target", "Target").orElse(dynamic))).map(dynamicx::createList), dynamicx)));
+      return typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Gossips", (dynamicx) -> DataFixUtils.orElse(dynamicx.asStreamOpt().result().map((stream) -> stream.map((dynamicc) -> AbstractUUIDFix.replaceUUIDLeastMost(dynamicc, "Target", "Target").orElse(dynamicc))).map(dynamicx::createList), dynamicx))); // MagmaCube - decompile error
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/IglooMetadataRemovalFix.java b/src/main/java/net/minecraft/util/datafix/fixes/IglooMetadataRemovalFix.java
index 0a1384caa2959b261d213cbee09b4ea511c004af..dedba4284298f06649a6c7ed1dee648f5f870aba 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/IglooMetadataRemovalFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/IglooMetadataRemovalFix.java
@@ -23,7 +23,7 @@ public class IglooMetadataRemovalFix extends DataFix {
    }
 
    private static <T> Dynamic<T> removeIglooPieces(Dynamic<T> dynamic) {
-      return (Dynamic)dynamic.asStreamOpt().map((stream) -> stream.filter((dynamic) -> !isIglooPiece(dynamic))).map(dynamic::createList).result().orElse(dynamic);
+      return (Dynamic)dynamic.asStreamOpt().map((stream) -> stream.filter((dynamicx) -> !isIglooPiece(dynamicx))).map(dynamic::createList).result().orElse(dynamic); // MagmaCube - decompile error
    }
 
    private static boolean isIglooPiece(Dynamic<?> dynamic) {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ItemLoreFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ItemLoreFix.java
index ef2f2a0b8b4a3e37361fb6b460e47f126028cd2d..2c97eb0752d8ab22c385b795bdade135753833f9 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ItemLoreFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ItemLoreFix.java
@@ -20,7 +20,7 @@ public class ItemLoreFix extends DataFix {
    protected TypeRewriteRule makeRule() {
       Type<?> type = this.getInputSchema().getType(References.ITEM_STACK);
       OpticFinder<?> opticFinder = type.findField("tag");
-      return this.fixTypeEverywhereTyped("Item Lore componentize", type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> typedx.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("display", (dynamicx) -> dynamicx.update("Lore", (dynamic) -> (Dynamic)DataFixUtils.orElse(dynamic.asStreamOpt().map(ItemLoreFix::fixLoreList).map(dynamic::createList).result(), dynamic))))));
+      return this.fixTypeEverywhereTyped("Item Lore componentize", type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> typedx.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("display", (dynamicx) -> dynamicx.update("Lore", (dynamicc) -> (Dynamic)DataFixUtils.orElse(dynamicc.asStreamOpt().map(ItemLoreFix::fixLoreList).map(dynamicc::createList).result(), dynamicc)))))); // MagmaCube - decompile error
    }
 
    private static <T> Stream<Dynamic<T>> fixLoreList(Stream<Dynamic<T>> stream) {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ItemStackEnchantmentNamesFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ItemStackEnchantmentNamesFix.java
index 52bcf0beb8253a14b3a74008742826fbf1fcd54c..2244c3be773db61663297a6c06761a7de6f4411a 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ItemStackEnchantmentNamesFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ItemStackEnchantmentNamesFix.java
@@ -61,11 +61,13 @@ public class ItemStackEnchantmentNamesFix extends DataFix {
    }
 
    private Dynamic<?> fixTag(Dynamic<?> dynamic) {
-      Optional<? extends Dynamic<?>> optional = dynamic.get("ench").asStreamOpt().map((stream) -> stream.map((dynamic) -> dynamic.set("id", dynamic.createString((String)MAP.getOrDefault(dynamic.get("id").asInt(0), "null"))))).map(dynamic::createList).result();
+      // MagmaCube - decompile error
+      Optional<? extends Dynamic<?>> optional = dynamic.get("ench").asStreamOpt().map((stream) -> stream.map((dynamicx) -> dynamicx.set("id", dynamicx.createString((String)MAP.getOrDefault(dynamicx.get("id").asInt(0), "null"))))).map(dynamic::createList).result();
       if (optional.isPresent()) {
          dynamic = dynamic.remove("ench").set("Enchantments", (Dynamic)optional.get());
       }
 
-      return dynamic.update("StoredEnchantments", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().map((stream) -> stream.map((dynamic) -> dynamic.set("id", dynamic.createString((String)MAP.getOrDefault(dynamic.get("id").asInt(0), "null"))))).map(dynamicx::createList).result(), dynamicx));
+      // MagmaCube - decompile error
+      return dynamic.update("StoredEnchantments", (dynamicx) -> (Dynamic)DataFixUtils.orElse(dynamicx.asStreamOpt().map((stream) -> stream.map((dynamicxx) -> dynamicxx.set("id", dynamicxx.createString((String)MAP.getOrDefault(dynamicxx.get("id").asInt(0), "null"))))).map(dynamicx::createList).result(), dynamicx));
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ItemStackUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ItemStackUUIDFix.java
index 5e152911fb9f49b78860570fce3bb801bbabc216..d6ea9a018749b3a9a0037c3364dda8df0d5e1b4c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ItemStackUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ItemStackUUIDFix.java
@@ -29,10 +29,10 @@ public class ItemStackUUIDFix extends AbstractUUIDFix {
    }
 
    private Dynamic<?> updateAttributeModifiers(Dynamic<?> dynamic) {
-      return dynamic.update("AttributeModifiers", (dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> (Dynamic)replaceUUIDLeastMost(dynamicx, "UUID", "UUID").orElse(dynamicx))));
+      return dynamic.update("AttributeModifiers", (dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> replaceUUIDLeastMost(dynamicx, "UUID", "UUID").orElse(dynamicx)))); // MagmaCube - decompile error
    }
 
    private Dynamic<?> updateSkullOwner(Dynamic<?> dynamic) {
-      return dynamic.update("SkullOwner", (dynamicx) -> (Dynamic)replaceUUIDString(dynamicx, "Id", "Id").orElse(dynamicx));
+      return dynamic.update("SkullOwner", (dynamicx) -> replaceUUIDString(dynamicx, "Id", "Id").orElse(dynamicx)); // MagmaCube - decompile error
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/ItemWrittenBookPagesStrictJsonFix.java b/src/main/java/net/minecraft/util/datafix/fixes/ItemWrittenBookPagesStrictJsonFix.java
index 6e6645b084e2626b4d80143ea0a7a37560132709..dadb565ca085c0ba09fc688f85ef0a7678c20f7a 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/ItemWrittenBookPagesStrictJsonFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/ItemWrittenBookPagesStrictJsonFix.java
@@ -20,11 +20,13 @@ public class ItemWrittenBookPagesStrictJsonFix extends DataFix {
    }
 
    public Dynamic<?> fixTag(Dynamic<?> dynamic) {
-      return dynamic.update("pages", (dynamic2) -> (Dynamic)DataFixUtils.orElse(dynamic2.asStreamOpt().map((stream) -> stream.map((dynamic) -> {
-               if (!dynamic.asString().result().isPresent()) {
-                  return dynamic;
+      // MagmaCube - decompile error
+      return dynamic.update("pages", (dynamic2) -> (Dynamic)DataFixUtils.orElse(dynamic2.asStreamOpt().map((stream) -> stream.map((dynamicx) -> {
+               if (!dynamicx.asString().result().isPresent()) {
+                  return dynamicx;
+                  // MagmaCube end - decompile error
                } else {
-                  String s = dynamic.asString("");
+                  String s = dynamicx.asString(""); // MagmaCube - decompile error
                   Component component = null;
                   if (!"null".equals(s) && !StringUtils.isEmpty(s)) {
                      if (s.charAt(0) == '"' && s.charAt(s.length() - 1) == '"' || s.charAt(0) == '{' && s.charAt(s.length() - 1) == '}') {
@@ -60,7 +62,7 @@ public class ItemWrittenBookPagesStrictJsonFix extends DataFix {
                      component = TextComponent.EMPTY;
                   }
 
-                  return dynamic.createString(Component.Serializer.toJson(component));
+                  return dynamicx.createString(Component.Serializer.toJson(component));
                }
             })).map(dynamic::createList).result(), dynamic.emptyList()));
    }
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/JigsawRotationFix.java b/src/main/java/net/minecraft/util/datafix/fixes/JigsawRotationFix.java
index d592ed5b67af11612729f9e34a4320ba0bdfde41..45a5c527b4261bb159761be7aa758865ba980336 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/JigsawRotationFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/JigsawRotationFix.java
@@ -10,7 +10,8 @@ import java.util.Map;
 import java.util.Optional;
 
 public class JigsawRotationFix extends DataFix {
-   private static final Map<String, String> renames = ImmutableMap.builder().put("down", "down_south").put("up", "up_north").put("north", "north_up").put("south", "south_up").put("west", "west_up").put("east", "east_up").build();
+   // MagmaCube - decompile error
+   private static final Map<String, String> renames = (Map) ImmutableMap.builder().put("down", "down_south").put("up", "up_north").put("north", "north_up").put("south", "south_up").put("west", "west_up").put("east", "east_up").build();
 
    public JigsawRotationFix(Schema schema, boolean flag) {
       super(schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/LeavesFix.java b/src/main/java/net/minecraft/util/datafix/fixes/LeavesFix.java
index 956fb94646bb8c3748447e80ffd17ee5be4892d8..b04f81eee4984a6730cb2d33211e03adccbd1b91 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/LeavesFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/LeavesFix.java
@@ -62,10 +62,12 @@ public class LeavesFix extends DataFix {
          OpticFinder<?> opticFinder3 = DSL.typeFinder(type3);
          return this.fixTypeEverywhereTyped("Leaves fix", type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> {
                int[] ints = new int[]{0};
-               Typed<?> typed2 = typedx.updateTyped(opticFinder2, (typed) -> {
-                  Int2ObjectMap<LeavesFix.LeavesSection> int2ObjectMap = new Int2ObjectOpenHashMap((Map)typed.getAllTyped(opticFinder3).stream().map((typedx) -> new LeavesFix.LeavesSection(typedx, this.getInputSchema())).collect(Collectors.toMap(LeavesFix.Section::getIndex, (leavesSection) -> leavesSection)));
+               // MagmaCube start - decompile error
+               Typed<?> typed2 = typedx.updateTyped(opticFinder2, (typedxx) -> {
+                  Int2ObjectMap<LeavesFix.LeavesSection> int2ObjectMap = new Int2ObjectOpenHashMap(typedxx.getAllTyped(opticFinder3).stream().map((typedxxx) -> new LeavesFix.LeavesSection(typedxxx, this.getInputSchema())).collect(Collectors.toMap(LeavesFix.Section::getIndex, (leavesSection) -> leavesSection)));
                   if (int2ObjectMap.values().stream().allMatch(LeavesFix.Section::isSkippable)) {
-                     return typed;
+                     return typedxx;
+                     // MagmaCube end - decompile error
                   } else {
                      List<IntSet> list = Lists.newArrayList();
 
@@ -124,7 +126,7 @@ public class LeavesFix extends DataFix {
                         }
                      }
 
-                     return typed.updateTyped(opticFinder3, (typedx) -> ((LeavesFix.LeavesSection)int2ObjectMap.get(((Dynamic)typedx.get(DSL.remainderFinder())).get("Y").asInt(0))).write(typedx));
+                     return typedxx.updateTyped(opticFinder3, (typedxxxxx) -> ((LeavesFix.LeavesSection)int2ObjectMap.get(((Dynamic)typedxxxxx.get(DSL.remainderFinder())).get("Y").asInt(0))).write(typedxxxxx)); // MagmaCube - decompile error
                   }
                });
                if (ints[0] != 0) {
@@ -297,7 +299,7 @@ public class LeavesFix extends DataFix {
       }
 
       public Typed<?> write(Typed<?> typed) {
-         return this.isSkippable() ? typed : typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.set("BlockStates", dynamic.createLongList(Arrays.stream(this.storage.getRaw())))).set(this.paletteFinder, this.palette.stream().map((dynamic) -> Pair.of(References.BLOCK_STATE.typeName(), dynamic)).collect(Collectors.toList()));
+         return this.isSkippable() ? typed : typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.set("BlockStates", dynamic.createLongList(Arrays.stream(this.storage.getRaw())))).set(this.paletteFinder, (List)this.palette.stream().map((dynamic) -> Pair.of(References.BLOCK_STATE.typeName(), dynamic)).collect(Collectors.toList())); // MagmaCube - decompile error
       }
 
       public boolean isSkippable() {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/LevelDataGeneratorOptionsFix.java b/src/main/java/net/minecraft/util/datafix/fixes/LevelDataGeneratorOptionsFix.java
index 5a195cdb6bc9f71d48455197a145c9ea0a9cc7a6..f4312a3a53a292ecb5af085d3426bd93e7a1ab5c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/LevelDataGeneratorOptionsFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/LevelDataGeneratorOptionsFix.java
@@ -168,8 +168,12 @@ public class LevelDataGeneratorOptionsFix extends DataFix {
          map.put("village", Maps.newHashMap());
       }
 
-      T object = (T)dynamicOps.createList(list.stream().map((pair) -> // $FF: Couldn't be decompiled));
-      T object2 = (T)dynamicOps.createMap((Map)map.entrySet().stream().map((entry) -> Pair.of(dynamicOps.createString(((String)entry.getKey()).toLowerCase(Locale.ROOT)), dynamicOps.createMap((Map)((Map)entry.getValue()).entrySet().stream().map((entryx) -> Pair.of(dynamicOps.createString((String)entryx.getKey()), dynamicOps.createString((String)entryx.getValue()))).collect(Collectors.toMap(Pair::getFirst, Pair::getSecond))))).collect(Collectors.toMap(Pair::getFirst, Pair::getSecond)));
+      // MagmaCube start - decompile error
+      T object = (T)dynamicOps.createList(list.stream().map((pair) -> {
+         return dynamicOps.createMap(ImmutableMap.of(dynamicOps.createString("height"), dynamicOps.createInt(pair.getFirst()), dynamicOps.createString("block"), dynamicOps.createString(pair.getSecond())));
+      }));
+      T object2 = (T)dynamicOps.createMap((Map)map.entrySet().stream().map((entry) -> Pair.of(dynamicOps.createString(((String)entry.getKey()).toLowerCase(Locale.ROOT)), dynamicOps.createMap((entry.getValue()).entrySet().stream().map((entryx) -> Pair.of(dynamicOps.createString((String)entryx.getKey()), dynamicOps.createString((String)entryx.getValue()))).collect(Collectors.toMap(Pair::getFirst, Pair::getSecond))))).collect(Collectors.toMap(Pair::getFirst, Pair::getSecond)));
+      // MagmaCube end - decompile error
       return new Dynamic(dynamicOps, dynamicOps.createMap(ImmutableMap.of(dynamicOps.createString("layers"), object, dynamicOps.createString("biome"), dynamicOps.createString(s2), dynamicOps.createString("structures"), object2)));
    }
 
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/LevelFlatGeneratorInfoFix.java b/src/main/java/net/minecraft/util/datafix/fixes/LevelFlatGeneratorInfoFix.java
index 23831634f8ff01ed228958517b299d304e14f6cf..f62c32ea894b3a4aa3d5bc777e0debfb44fb8ad1 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/LevelFlatGeneratorInfoFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/LevelFlatGeneratorInfoFix.java
@@ -56,16 +56,16 @@ public class LevelFlatGeneratorInfoFix extends DataFix {
             stringBuilder.append((String)StreamSupport.stream(LAYER_SPLITTER.split(s3).spliterator(), false).map((sx) -> {
                List<String> list = splitter.splitToList(sx);
                int i2;
-               String s2;
+               String s2x; // MagmaCube - decompile error
                if (list.size() == 2) {
                   i2 = NumberUtils.toInt((String)list.get(0));
-                  s2 = (String)list.get(1);
+                  s2x = (String)list.get(1); // MagmaCube - decompile error
                } else {
                   i2 = 1;
-                  s2 = (String)list.get(0);
+                  s2x = (String)list.get(0); // MagmaCube - decompile error
                }
 
-               List<String> list2 = BLOCK_SPLITTER.splitToList(s2);
+               List<String> list2 = BLOCK_SPLITTER.splitToList(s2x); // MagmaCube - decompile error
                int i4 = ((String)list2.get(0)).equals("minecraft") ? 1 : 0;
                String s4 = (String)list2.get(i4);
                int i5 = i == 3 ? EntityBlockStateFix.getBlockId("minecraft:" + s4) : NumberUtils.toInt(s4, 0);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/LevelUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/LevelUUIDFix.java
index 8ad7dbf7565794780950c22ddd348c7bf6e8b551..b741ab4e146491e31df8de60ba453ca777b6ac11 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/LevelUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/LevelUUIDFix.java
@@ -23,13 +23,13 @@ public class LevelUUIDFix extends AbstractUUIDFix {
    }
 
    private Dynamic<?> updateDragonFight(Dynamic<?> dynamic) {
-      return dynamic.update("DimensionData", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamic) -> dynamic.update("DragonFight", (dynamicx) -> (Dynamic)replaceUUIDLeastMost(dynamicx, "DragonUUID", "Dragon").orElse(dynamicx)))));
+      return dynamic.update("DimensionData", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamicz) -> dynamicz.update("DragonFight", (dynamicxc) -> (Dynamic)replaceUUIDLeastMost(dynamicxc, "DragonUUID", "Dragon").orElse(dynamicxc))))); // MagmaCube - decompile error
    }
 
    private Dynamic<?> updateCustomBossEvents(Dynamic<?> dynamic) {
-      return dynamic.update("CustomBossEvents", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamic) -> dynamic.update("Players", (dynamic2) -> dynamic.createList(dynamic2.asStream().map((dynamicx) -> (Dynamic)createUUIDFromML(dynamicx).orElseGet(() -> {
+      return dynamic.update("CustomBossEvents", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamicz) -> dynamicz.update("Players", (dynamic2) -> dynamicz.createList(dynamic2.asStream().map((dynamicxc) -> createUUIDFromML(dynamicxc).orElseGet(() -> { // MagmaCube - decompile error
                         LOGGER.warn("CustomBossEvents contains invalid UUIDs.");
-                        return dynamicx;
+                        return dynamicxc; // MagmaCube - decompile error
                      })))))));
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/MobSpawnerEntityIdentifiersFix.java b/src/main/java/net/minecraft/util/datafix/fixes/MobSpawnerEntityIdentifiersFix.java
index 26c1e8ab25ca7fea441d24fdde334de6d58b0ea3..9ae448b28936f98ce51af143f376238a4a1bff5f 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/MobSpawnerEntityIdentifiersFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/MobSpawnerEntityIdentifiersFix.java
@@ -32,10 +32,12 @@ public class MobSpawnerEntityIdentifiersFix extends DataFix {
 
          Optional<? extends Stream<? extends Dynamic<?>>> optional2 = dynamic.get("SpawnPotentials").asStreamOpt().result();
          if (optional2.isPresent()) {
-            dynamic = dynamic.set("SpawnPotentials", dynamic.createList(((Stream)optional2.get()).map((dynamicx) -> {
-               Optional<String> optional = dynamicx.get("Type").asString().result();
-               if (optional.isPresent()) {
-                  Dynamic<?> dynamic2 = ((Dynamic)DataFixUtils.orElse(dynamicx.get("Properties").result(), dynamicx.emptyMap())).set("id", dynamicx.createString((String)optional.get()));
+            // MagmaCube start - decompile error
+            dynamic = dynamic.set("SpawnPotentials", dynamic.createList((optional2.get()).map((dynamicx) -> {
+               Optional<String> optionalx = dynamicx.get("Type").asString().result();
+               if (optionalx.isPresent()) {
+                  Dynamic<?> dynamic2 = (DataFixUtils.orElse(dynamicx.get("Properties").result(), dynamicx.emptyMap())).set("id", dynamicx.createString((String)optionalx.get()));
+                  // MagmaCube end - decompile error
                   return dynamicx.set("Entity", dynamic2).remove("Type").remove("Properties");
                } else {
                   return dynamicx;
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/NewVillageFix.java b/src/main/java/net/minecraft/util/datafix/fixes/NewVillageFix.java
index 338495a46e3a0e30debeab9707885059cc2a3c84..0960498b8668060c83e23d7397054aac64063947 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/NewVillageFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/NewVillageFix.java
@@ -34,7 +34,7 @@ public class NewVillageFix extends DataFix {
       OpticFinder<?> opticFinder2 = opticFinder.type().findField("Structures");
       OpticFinder<?> opticFinder3 = opticFinder2.type().findField("Starts");
       OpticFinder<List<Pair<String, SF>>> opticFinder4 = compoundListType.finder();
-      return TypeRewriteRule.seq(this.fixTypeEverywhereTyped("NewVillageFix", type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typed) -> typed.updateTyped(opticFinder3, (typedx) -> typedx.update(opticFinder4, (list) -> (List)list.stream().filter((pair) -> !Objects.equals(pair.getFirst(), "Village")).map((pair) -> pair.mapFirst((s) -> s.equals("New_Village") ? "Village" : s)).collect(Collectors.toList()))).update(DSL.remainderFinder(), (dynamic) -> dynamic.update("References", (dynamicx) -> {
+      return TypeRewriteRule.seq(this.fixTypeEverywhereTyped("NewVillageFix", type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typedz) -> typedz.updateTyped(opticFinder3, (typedxd) -> typedxd.update(opticFinder4, (list) -> list.stream().filter((pair) -> !Objects.equals(pair.getFirst(), "Village")).map((pair) -> pair.mapFirst((s) -> s.equals("New_Village") ? "Village" : s)).collect(Collectors.toList()))).update(DSL.remainderFinder(), (dynamic) -> dynamic.update("References", (dynamicx) -> { // MagmaCube - decompile error
                      Optional<? extends Dynamic<?>> optional = dynamicx.get("New_Village").result();
                      return ((Dynamic)DataFixUtils.orElse(optional.map((dynamic2) -> dynamicx.remove("New_Village").set("Village", dynamic2)), dynamicx)).remove("Village");
                   }))))), this.fixTypeEverywhereTyped("NewVillageStartFix", type2, (typed) -> typed.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("id", (dynamicx) -> Objects.equals(NamespacedSchema.ensureNamespaced(dynamicx.asString("")), "minecraft:new_village") ? dynamicx.createString("minecraft:village") : dynamicx))));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/PoiTypeRename.java b/src/main/java/net/minecraft/util/datafix/fixes/PoiTypeRename.java
index 46621b69a5e869d49b6d22bc9770664e12998295..2d253bbd0a2e07b18a80c6a76b1f63a182c0ea31 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/PoiTypeRename.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/PoiTypeRename.java
@@ -26,11 +26,11 @@ public abstract class PoiTypeRename extends DataFix {
    }
 
    private <T> Dynamic<T> cap(Dynamic<T> dynamic) {
-      return dynamic.update("Sections", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamic) -> dynamic.update("Records", (dynamicx) -> (Dynamic)DataFixUtils.orElse(this.renameRecords(dynamicx), dynamicx)))));
+      return dynamic.update("Sections", (dynamicx) -> dynamicx.updateMapValues((pair) -> pair.mapSecond((dynamicxxx) -> dynamicxxx.update("Records", (dynamicxx) -> (Dynamic)DataFixUtils.orElse(this.renameRecords(dynamicxx), dynamicxx))))); // MagmaCube - decompile error
    }
 
    private <T> Optional<Dynamic<T>> renameRecords(Dynamic<T> dynamic) {
-      return dynamic.asStreamOpt().map((stream) -> dynamic.createList(stream.map((dynamicx) -> dynamicx.update("type", (dynamic) -> (Dynamic)DataFixUtils.orElse(dynamic.asString().map(this::rename).map(dynamic::createString).result(), dynamic))))).result();
+      return dynamic.asStreamOpt().map((stream) -> dynamic.createList(stream.map((dynamicx) -> dynamicx.update("type", (dynamicxxx) -> (Dynamic)DataFixUtils.orElse(dynamicxxx.asString().map(this::rename).map(dynamicxxx::createString).result(), dynamicxxx))))).result(); // MagmaCube - decompile error
    }
 
    protected abstract String rename(String var1);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/RecipesFix.java b/src/main/java/net/minecraft/util/datafix/fixes/RecipesFix.java
index f85e8176ca0f04248919d84a26411df88bc48bfb..6dc08319f678c081e3868780bd5273b86e73cd25 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/RecipesFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/RecipesFix.java
@@ -5,7 +5,8 @@ import com.mojang.datafixers.schemas.Schema;
 import java.util.Map;
 
 public class RecipesFix extends RecipesRenameFix {
-   private static final Map<String, String> RECIPES = ImmutableMap.builder().put("minecraft:acacia_wooden_slab", "minecraft:acacia_slab").put("minecraft:birch_wooden_slab", "minecraft:birch_slab").put("minecraft:black_stained_hardened_clay", "minecraft:black_terracotta").put("minecraft:blue_stained_hardened_clay", "minecraft:blue_terracotta").put("minecraft:boat", "minecraft:oak_boat").put("minecraft:bone_meal_from_block", "minecraft:bone_meal_from_bone_block").put("minecraft:bone_meal_from_bone", "minecraft:bone_meal").put("minecraft:brick_block", "minecraft:bricks").put("minecraft:brown_stained_hardened_clay", "minecraft:brown_terracotta").put("minecraft:chiseled_stonebrick", "minecraft:chiseled_stone_bricks").put("minecraft:cyan_stained_hardened_clay", "minecraft:cyan_terracotta").put("minecraft:dark_oak_wooden_slab", "minecraft:dark_oak_slab").put("minecraft:end_bricks", "minecraft:end_stone_bricks").put("minecraft:fence_gate", "minecraft:oak_fence_gate").put("minecraft:fence", "minecraft:oak_fence").put("minecraft:golden_rail", "minecraft:powered_rail").put("minecraft:gold_ingot_from_block", "minecraft:gold_ingot_from_gold_block").put("minecraft:gray_stained_hardened_clay", "minecraft:gray_terracotta").put("minecraft:green_stained_hardened_clay", "minecraft:green_terracotta").put("minecraft:iron_ingot_from_block", "minecraft:iron_ingot_from_iron_block").put("minecraft:jungle_wooden_slab", "minecraft:jungle_slab").put("minecraft:light_blue_stained_hardened_clay", "minecraft:light_blue_terracotta").put("minecraft:light_gray_stained_hardened_clay", "minecraft:light_gray_terracotta").put("minecraft:lime_stained_hardened_clay", "minecraft:lime_terracotta").put("minecraft:lit_pumpkin", "minecraft:jack_o_lantern").put("minecraft:magenta_stained_hardened_clay", "minecraft:magenta_terracotta").put("minecraft:magma", "minecraft:magma_block").put("minecraft:melon_block", "minecraft:melon").put("minecraft:mossy_stonebrick", "minecraft:mossy_stone_bricks").put("minecraft:noteblock", "minecraft:note_block").put("minecraft:oak_wooden_slab", "minecraft:oak_slab").put("minecraft:orange_stained_hardened_clay", "minecraft:orange_terracotta").put("minecraft:pillar_quartz_block", "minecraft:quartz_pillar").put("minecraft:pink_stained_hardened_clay", "minecraft:pink_terracotta").put("minecraft:purple_shulker_box", "minecraft:shulker_box").put("minecraft:purple_stained_hardened_clay", "minecraft:purple_terracotta").put("minecraft:red_nether_brick", "minecraft:red_nether_bricks").put("minecraft:red_stained_hardened_clay", "minecraft:red_terracotta").put("minecraft:slime", "minecraft:slime_block").put("minecraft:smooth_red_sandstone", "minecraft:cut_red_sandstone").put("minecraft:smooth_sandstone", "minecraft:cut_sandstone").put("minecraft:snow_layer", "minecraft:snow").put("minecraft:snow", "minecraft:snow_block").put("minecraft:speckled_melon", "minecraft:glistering_melon_slice").put("minecraft:spruce_wooden_slab", "minecraft:spruce_slab").put("minecraft:stonebrick", "minecraft:stone_bricks").put("minecraft:stone_stairs", "minecraft:cobblestone_stairs").put("minecraft:string_to_wool", "minecraft:white_wool_from_string").put("minecraft:trapdoor", "minecraft:oak_trapdoor").put("minecraft:white_stained_hardened_clay", "minecraft:white_terracotta").put("minecraft:wooden_button", "minecraft:oak_button").put("minecraft:wooden_door", "minecraft:oak_door").put("minecraft:wooden_pressure_plate", "minecraft:oak_pressure_plate").put("minecraft:yellow_stained_hardened_clay", "minecraft:yellow_terracotta").build();
+   // MagmaCube - decompile error
+   private static final Map<String, String> RECIPES = (Map) ImmutableMap.builder().put("minecraft:acacia_wooden_slab", "minecraft:acacia_slab").put("minecraft:birch_wooden_slab", "minecraft:birch_slab").put("minecraft:black_stained_hardened_clay", "minecraft:black_terracotta").put("minecraft:blue_stained_hardened_clay", "minecraft:blue_terracotta").put("minecraft:boat", "minecraft:oak_boat").put("minecraft:bone_meal_from_block", "minecraft:bone_meal_from_bone_block").put("minecraft:bone_meal_from_bone", "minecraft:bone_meal").put("minecraft:brick_block", "minecraft:bricks").put("minecraft:brown_stained_hardened_clay", "minecraft:brown_terracotta").put("minecraft:chiseled_stonebrick", "minecraft:chiseled_stone_bricks").put("minecraft:cyan_stained_hardened_clay", "minecraft:cyan_terracotta").put("minecraft:dark_oak_wooden_slab", "minecraft:dark_oak_slab").put("minecraft:end_bricks", "minecraft:end_stone_bricks").put("minecraft:fence_gate", "minecraft:oak_fence_gate").put("minecraft:fence", "minecraft:oak_fence").put("minecraft:golden_rail", "minecraft:powered_rail").put("minecraft:gold_ingot_from_block", "minecraft:gold_ingot_from_gold_block").put("minecraft:gray_stained_hardened_clay", "minecraft:gray_terracotta").put("minecraft:green_stained_hardened_clay", "minecraft:green_terracotta").put("minecraft:iron_ingot_from_block", "minecraft:iron_ingot_from_iron_block").put("minecraft:jungle_wooden_slab", "minecraft:jungle_slab").put("minecraft:light_blue_stained_hardened_clay", "minecraft:light_blue_terracotta").put("minecraft:light_gray_stained_hardened_clay", "minecraft:light_gray_terracotta").put("minecraft:lime_stained_hardened_clay", "minecraft:lime_terracotta").put("minecraft:lit_pumpkin", "minecraft:jack_o_lantern").put("minecraft:magenta_stained_hardened_clay", "minecraft:magenta_terracotta").put("minecraft:magma", "minecraft:magma_block").put("minecraft:melon_block", "minecraft:melon").put("minecraft:mossy_stonebrick", "minecraft:mossy_stone_bricks").put("minecraft:noteblock", "minecraft:note_block").put("minecraft:oak_wooden_slab", "minecraft:oak_slab").put("minecraft:orange_stained_hardened_clay", "minecraft:orange_terracotta").put("minecraft:pillar_quartz_block", "minecraft:quartz_pillar").put("minecraft:pink_stained_hardened_clay", "minecraft:pink_terracotta").put("minecraft:purple_shulker_box", "minecraft:shulker_box").put("minecraft:purple_stained_hardened_clay", "minecraft:purple_terracotta").put("minecraft:red_nether_brick", "minecraft:red_nether_bricks").put("minecraft:red_stained_hardened_clay", "minecraft:red_terracotta").put("minecraft:slime", "minecraft:slime_block").put("minecraft:smooth_red_sandstone", "minecraft:cut_red_sandstone").put("minecraft:smooth_sandstone", "minecraft:cut_sandstone").put("minecraft:snow_layer", "minecraft:snow").put("minecraft:snow", "minecraft:snow_block").put("minecraft:speckled_melon", "minecraft:glistering_melon_slice").put("minecraft:spruce_wooden_slab", "minecraft:spruce_slab").put("minecraft:stonebrick", "minecraft:stone_bricks").put("minecraft:stone_stairs", "minecraft:cobblestone_stairs").put("minecraft:string_to_wool", "minecraft:white_wool_from_string").put("minecraft:trapdoor", "minecraft:oak_trapdoor").put("minecraft:white_stained_hardened_clay", "minecraft:white_terracotta").put("minecraft:wooden_button", "minecraft:oak_button").put("minecraft:wooden_door", "minecraft:oak_door").put("minecraft:wooden_pressure_plate", "minecraft:oak_pressure_plate").put("minecraft:yellow_stained_hardened_clay", "minecraft:yellow_terracotta").build();
 
    public RecipesFix(Schema schema, boolean flag) {
       super(schema, flag, "Recipes fix", (s) -> (String)RECIPES.getOrDefault(s, s));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/RecipesRenameningFix.java b/src/main/java/net/minecraft/util/datafix/fixes/RecipesRenameningFix.java
index fe8f9ddd5ff0a82f2ea2383dcfc146dc1900a22a..d2537536b4a6e4956b18d97b3ab837644a0b657c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/RecipesRenameningFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/RecipesRenameningFix.java
@@ -5,7 +5,8 @@ import com.mojang.datafixers.schemas.Schema;
 import java.util.Map;
 
 public class RecipesRenameningFix extends RecipesRenameFix {
-   private static final Map<String, String> RECIPES = ImmutableMap.builder().put("minecraft:acacia_bark", "minecraft:acacia_wood").put("minecraft:birch_bark", "minecraft:birch_wood").put("minecraft:dark_oak_bark", "minecraft:dark_oak_wood").put("minecraft:jungle_bark", "minecraft:jungle_wood").put("minecraft:oak_bark", "minecraft:oak_wood").put("minecraft:spruce_bark", "minecraft:spruce_wood").build();
+   // MagmaCube - decompile error
+   private static final Map<String, String> RECIPES = (Map) ImmutableMap.builder().put("minecraft:acacia_bark", "minecraft:acacia_wood").put("minecraft:birch_bark", "minecraft:birch_wood").put("minecraft:dark_oak_bark", "minecraft:dark_oak_wood").put("minecraft:jungle_bark", "minecraft:jungle_wood").put("minecraft:oak_bark", "minecraft:oak_wood").put("minecraft:spruce_bark", "minecraft:spruce_wood").build();
 
    public RecipesRenameningFix(Schema schema, boolean flag) {
       super(schema, flag, "Recipes renamening fix", (s) -> (String)RECIPES.getOrDefault(s, s));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/RedstoneWireConnectionsFix.java b/src/main/java/net/minecraft/util/datafix/fixes/RedstoneWireConnectionsFix.java
index 48446f3bdd3ec221085e35ae9f39f6e7895621e9..91b7e1a73dacc6275c34b2d0a7c55c11c8d6ae12 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/RedstoneWireConnectionsFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/RedstoneWireConnectionsFix.java
@@ -23,13 +23,15 @@ public class RedstoneWireConnectionsFix extends DataFix {
          String s2 = dynamicx.get("west").asString("none");
          String s3 = dynamicx.get("north").asString("none");
          String s4 = dynamicx.get("south").asString("none");
-         boolean flag = isConnected(s) || isConnected(s2);
+         boolean flagx = isConnected(s) || isConnected(s2); // MagmaCube - decompile error
          boolean flag2 = isConnected(s3) || isConnected(s4);
          String s5 = !isConnected(s) && !flag2 ? "side" : s;
          String s6 = !isConnected(s2) && !flag2 ? "side" : s2;
-         String s7 = !isConnected(s3) && !flag ? "side" : s3;
-         String s8 = !isConnected(s4) && !flag ? "side" : s4;
-         return dynamicx.update("east", (dynamic) -> dynamic.createString(s5)).update("west", (dynamic) -> dynamic.createString(s6)).update("north", (dynamic) -> dynamic.createString(s7)).update("south", (dynamic) -> dynamic.createString(s8));
+         // MagmaCube start - decompile error
+         String s7 = !isConnected(s3) && !flagx ? "side" : s3;
+         String s8 = !isConnected(s4) && !flagx ? "side" : s4;
+         // MagmaCube end - decompile error
+         return dynamicx.update("east", (dynamicxx) -> dynamicxx.createString(s5)).update("west", (dynamicxxx) -> dynamicxxx.createString(s6)).update("north", (dynamicxxxx) -> dynamicxxxx.createString(s7)).update("south", (dynamicz) -> dynamicz.createString(s8)); // MagmaCube - decompile error
       });
    }
 
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFansFix.java b/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFansFix.java
index 841b13607f9f3b2a357af1ab5de1ebb7c64f460a..6f4ada71e2dae32290557e2a0daf4ac96062e583 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFansFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFansFix.java
@@ -4,5 +4,6 @@ import com.google.common.collect.ImmutableMap;
 import java.util.Map;
 
 public class RenamedCoralFansFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:tube_coral_fan", "minecraft:tube_coral_wall_fan").put("minecraft:brain_coral_fan", "minecraft:brain_coral_wall_fan").put("minecraft:bubble_coral_fan", "minecraft:bubble_coral_wall_fan").put("minecraft:fire_coral_fan", "minecraft:fire_coral_wall_fan").put("minecraft:horn_coral_fan", "minecraft:horn_coral_wall_fan").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:tube_coral_fan", "minecraft:tube_coral_wall_fan").put("minecraft:brain_coral_fan", "minecraft:brain_coral_wall_fan").put("minecraft:bubble_coral_fan", "minecraft:bubble_coral_wall_fan").put("minecraft:fire_coral_fan", "minecraft:fire_coral_wall_fan").put("minecraft:horn_coral_fan", "minecraft:horn_coral_wall_fan").build();
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFix.java b/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFix.java
index 9c5c2d02b62f1c9a34fa5760921a8f4aeb5848e9..59fd37819244c7065a24b1b00f466422b8c418e6 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/RenamedCoralFix.java
@@ -4,5 +4,6 @@ import com.google.common.collect.ImmutableMap;
 import java.util.Map;
 
 public class RenamedCoralFix {
-   public static final Map<String, String> RENAMED_IDS = ImmutableMap.builder().put("minecraft:blue_coral", "minecraft:tube_coral_block").put("minecraft:pink_coral", "minecraft:brain_coral_block").put("minecraft:purple_coral", "minecraft:bubble_coral_block").put("minecraft:red_coral", "minecraft:fire_coral_block").put("minecraft:yellow_coral", "minecraft:horn_coral_block").put("minecraft:blue_coral_plant", "minecraft:tube_coral").put("minecraft:pink_coral_plant", "minecraft:brain_coral").put("minecraft:purple_coral_plant", "minecraft:bubble_coral").put("minecraft:red_coral_plant", "minecraft:fire_coral").put("minecraft:yellow_coral_plant", "minecraft:horn_coral").put("minecraft:blue_coral_fan", "minecraft:tube_coral_fan").put("minecraft:pink_coral_fan", "minecraft:brain_coral_fan").put("minecraft:purple_coral_fan", "minecraft:bubble_coral_fan").put("minecraft:red_coral_fan", "minecraft:fire_coral_fan").put("minecraft:yellow_coral_fan", "minecraft:horn_coral_fan").put("minecraft:blue_dead_coral", "minecraft:dead_tube_coral").put("minecraft:pink_dead_coral", "minecraft:dead_brain_coral").put("minecraft:purple_dead_coral", "minecraft:dead_bubble_coral").put("minecraft:red_dead_coral", "minecraft:dead_fire_coral").put("minecraft:yellow_dead_coral", "minecraft:dead_horn_coral").build();
+   // MagmaCube - decompile error
+   public static final Map<String, String> RENAMED_IDS = (Map) ImmutableMap.builder().put("minecraft:blue_coral", "minecraft:tube_coral_block").put("minecraft:pink_coral", "minecraft:brain_coral_block").put("minecraft:purple_coral", "minecraft:bubble_coral_block").put("minecraft:red_coral", "minecraft:fire_coral_block").put("minecraft:yellow_coral", "minecraft:horn_coral_block").put("minecraft:blue_coral_plant", "minecraft:tube_coral").put("minecraft:pink_coral_plant", "minecraft:brain_coral").put("minecraft:purple_coral_plant", "minecraft:bubble_coral").put("minecraft:red_coral_plant", "minecraft:fire_coral").put("minecraft:yellow_coral_plant", "minecraft:horn_coral").put("minecraft:blue_coral_fan", "minecraft:tube_coral_fan").put("minecraft:pink_coral_fan", "minecraft:brain_coral_fan").put("minecraft:purple_coral_fan", "minecraft:bubble_coral_fan").put("minecraft:red_coral_fan", "minecraft:fire_coral_fan").put("minecraft:yellow_coral_fan", "minecraft:horn_coral_fan").put("minecraft:blue_dead_coral", "minecraft:dead_tube_coral").put("minecraft:pink_dead_coral", "minecraft:dead_brain_coral").put("minecraft:purple_dead_coral", "minecraft:dead_bubble_coral").put("minecraft:red_dead_coral", "minecraft:dead_fire_coral").put("minecraft:yellow_dead_coral", "minecraft:dead_horn_coral").build();
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/SavedDataUUIDFix.java b/src/main/java/net/minecraft/util/datafix/fixes/SavedDataUUIDFix.java
index 8429a1bc9932dfcecd81fda59f750218f641e5e5..b9c7f553b5b1467ede78229d45124e6b69d1d6ec 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/SavedDataUUIDFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/SavedDataUUIDFix.java
@@ -11,9 +11,10 @@ public class SavedDataUUIDFix extends AbstractUUIDFix {
    }
 
    protected TypeRewriteRule makeRule() {
-      return this.fixTypeEverywhereTyped("SavedDataUUIDFix", this.getInputSchema().getType(this.typeReference), (typed) -> typed.updateTyped(typed.getType().findField("data"), (typedx) -> typedx.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Raids", (dynamicx) -> dynamicx.createList(dynamicx.asStream().map((dynamic) -> dynamic.update("HeroesOfTheVillage", (dynamicx) -> dynamicx.createList(dynamicx.asStream().map((dynamic) -> (Dynamic)createUUIDFromLongs(dynamic, "UUIDMost", "UUIDLeast").orElseGet(() -> {
+       // MagmaCube - decompile error
+      return this.fixTypeEverywhereTyped("SavedDataUUIDFix", this.getInputSchema().getType(this.typeReference), (typed) -> typed.updateTyped(typed.getType().findField("data"), (typedx) -> typedx.update(DSL.remainderFinder(), (dynamic) -> dynamic.update("Raids", (dynamicx) -> dynamicx.createList(dynamicx.asStream().map((dynamicxx) -> dynamicxx.update("HeroesOfTheVillage", (dynamicxxxxx) -> dynamicxxxxx.createList(dynamicxxxxx.asStream().map((dynamicxxx) -> createUUIDFromLongs(dynamicxxx, "UUIDMost", "UUIDLeast").orElseGet(() -> {
                               LOGGER.warn("HeroesOfTheVillage contained invalid UUIDs.");
-                              return dynamic;
+                              return dynamicxxx; // MagmaCube - decompile error
                            }))))))))));
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/SimplestEntityRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/SimplestEntityRenameFix.java
index cc0e938ff7ece95e1137d8cba1961daff47059e6..b10df31cd4749337bbbd53421b8c12ce83d2190c 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/SimplestEntityRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/SimplestEntityRenameFix.java
@@ -19,18 +19,22 @@ public abstract class SimplestEntityRenameFix extends DataFix {
    }
 
    public TypeRewriteRule makeRule() {
-      TaggedChoiceType<String> taggedChoiceType = this.getInputSchema().findChoiceType(References.ENTITY);
-      TaggedChoiceType<String> taggedChoiceType2 = this.getOutputSchema().findChoiceType(References.ENTITY);
+       // MagmaCube start - decompile error
+      TaggedChoiceType<String> taggedChoiceType = (TaggedChoiceType<String>) this.getInputSchema().findChoiceType(References.ENTITY);
+      TaggedChoiceType<String> taggedChoiceType2 = (TaggedChoiceType<String>) this.getOutputSchema().findChoiceType(References.ENTITY);
+       // MagmaCube end - decompile error
       Type<Pair<String, String>> type = DSL.named(References.ENTITY_NAME.typeName(), NamespacedSchema.namespacedString());
       if (!Objects.equals(this.getOutputSchema().getType(References.ENTITY_NAME), type)) {
          throw new IllegalStateException("Entity name type is not what was expected.");
       } else {
          return TypeRewriteRule.seq(this.fixTypeEverywhere(this.name, taggedChoiceType, taggedChoiceType2, (dynamicOps) -> (pair) -> pair.mapFirst((s) -> {
                   String s2 = this.rename(s);
-                  Type<?> type = (Type)taggedChoiceType.types().get(s);
+                  Type<?> typel = (Type)taggedChoiceType.types().get(s); // MagmaCube - decompile error
                   Type<?> type2 = (Type)taggedChoiceType2.types().get(s2);
-                  if (!type2.equals(type, true, true)) {
-                     throw new IllegalStateException(String.format("Dynamic type check failed: %s not equal to %s", type2, type));
+                  // MagmaCube start - decompile error
+                  if (!type2.equals(typel, true, true)) {
+                     throw new IllegalStateException(String.format("Dynamic type check failed: %s not equal to %s", type2, typel));
+                      // MagmaCube end - decompile error
                   } else {
                      return s2;
                   }
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/StatsCounterFix.java b/src/main/java/net/minecraft/util/datafix/fixes/StatsCounterFix.java
index e9e4fb7276930c68174a88888f55edd8e8c155a2..9b125cd45524bf9744e158e48234c7a64a6182c7 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/StatsCounterFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/StatsCounterFix.java
@@ -20,11 +20,13 @@ import javax.annotation.Nullable;
 import org.apache.commons.lang3.StringUtils;
 
 public class StatsCounterFix extends DataFix {
-   private static final Set<String> SKIP = ImmutableSet.builder().add("stat.craftItem.minecraft.spawn_egg").add("stat.useItem.minecraft.spawn_egg").add("stat.breakItem.minecraft.spawn_egg").add("stat.pickup.minecraft.spawn_egg").add("stat.drop.minecraft.spawn_egg").build();
-   private static final Map<String, String> CUSTOM_MAP = ImmutableMap.builder().put("stat.leaveGame", "minecraft:leave_game").put("stat.playOneMinute", "minecraft:play_one_minute").put("stat.timeSinceDeath", "minecraft:time_since_death").put("stat.sneakTime", "minecraft:sneak_time").put("stat.walkOneCm", "minecraft:walk_one_cm").put("stat.crouchOneCm", "minecraft:crouch_one_cm").put("stat.sprintOneCm", "minecraft:sprint_one_cm").put("stat.swimOneCm", "minecraft:swim_one_cm").put("stat.fallOneCm", "minecraft:fall_one_cm").put("stat.climbOneCm", "minecraft:climb_one_cm").put("stat.flyOneCm", "minecraft:fly_one_cm").put("stat.diveOneCm", "minecraft:dive_one_cm").put("stat.minecartOneCm", "minecraft:minecart_one_cm").put("stat.boatOneCm", "minecraft:boat_one_cm").put("stat.pigOneCm", "minecraft:pig_one_cm").put("stat.horseOneCm", "minecraft:horse_one_cm").put("stat.aviateOneCm", "minecraft:aviate_one_cm").put("stat.jump", "minecraft:jump").put("stat.drop", "minecraft:drop").put("stat.damageDealt", "minecraft:damage_dealt").put("stat.damageTaken", "minecraft:damage_taken").put("stat.deaths", "minecraft:deaths").put("stat.mobKills", "minecraft:mob_kills").put("stat.animalsBred", "minecraft:animals_bred").put("stat.playerKills", "minecraft:player_kills").put("stat.fishCaught", "minecraft:fish_caught").put("stat.talkedToVillager", "minecraft:talked_to_villager").put("stat.tradedWithVillager", "minecraft:traded_with_villager").put("stat.cakeSlicesEaten", "minecraft:eat_cake_slice").put("stat.cauldronFilled", "minecraft:fill_cauldron").put("stat.cauldronUsed", "minecraft:use_cauldron").put("stat.armorCleaned", "minecraft:clean_armor").put("stat.bannerCleaned", "minecraft:clean_banner").put("stat.brewingstandInteraction", "minecraft:interact_with_brewingstand").put("stat.beaconInteraction", "minecraft:interact_with_beacon").put("stat.dropperInspected", "minecraft:inspect_dropper").put("stat.hopperInspected", "minecraft:inspect_hopper").put("stat.dispenserInspected", "minecraft:inspect_dispenser").put("stat.noteblockPlayed", "minecraft:play_noteblock").put("stat.noteblockTuned", "minecraft:tune_noteblock").put("stat.flowerPotted", "minecraft:pot_flower").put("stat.trappedChestTriggered", "minecraft:trigger_trapped_chest").put("stat.enderchestOpened", "minecraft:open_enderchest").put("stat.itemEnchanted", "minecraft:enchant_item").put("stat.recordPlayed", "minecraft:play_record").put("stat.furnaceInteraction", "minecraft:interact_with_furnace").put("stat.craftingTableInteraction", "minecraft:interact_with_crafting_table").put("stat.chestOpened", "minecraft:open_chest").put("stat.sleepInBed", "minecraft:sleep_in_bed").put("stat.shulkerBoxOpened", "minecraft:open_shulker_box").build();
-   private static final Map<String, String> ITEM_KEYS = ImmutableMap.builder().put("stat.craftItem", "minecraft:crafted").put("stat.useItem", "minecraft:used").put("stat.breakItem", "minecraft:broken").put("stat.pickup", "minecraft:picked_up").put("stat.drop", "minecraft:dropped").build();
-   private static final Map<String, String> ENTITY_KEYS = ImmutableMap.builder().put("stat.entityKilledBy", "minecraft:killed_by").put("stat.killEntity", "minecraft:killed").build();
-   private static final Map<String, String> ENTITIES = ImmutableMap.builder().put("Bat", "minecraft:bat").put("Blaze", "minecraft:blaze").put("CaveSpider", "minecraft:cave_spider").put("Chicken", "minecraft:chicken").put("Cow", "minecraft:cow").put("Creeper", "minecraft:creeper").put("Donkey", "minecraft:donkey").put("ElderGuardian", "minecraft:elder_guardian").put("Enderman", "minecraft:enderman").put("Endermite", "minecraft:endermite").put("EvocationIllager", "minecraft:evocation_illager").put("Ghast", "minecraft:ghast").put("Guardian", "minecraft:guardian").put("Horse", "minecraft:horse").put("Husk", "minecraft:husk").put("Llama", "minecraft:llama").put("LavaSlime", "minecraft:magma_cube").put("MushroomCow", "minecraft:mooshroom").put("Mule", "minecraft:mule").put("Ozelot", "minecraft:ocelot").put("Parrot", "minecraft:parrot").put("Pig", "minecraft:pig").put("PolarBear", "minecraft:polar_bear").put("Rabbit", "minecraft:rabbit").put("Sheep", "minecraft:sheep").put("Shulker", "minecraft:shulker").put("Silverfish", "minecraft:silverfish").put("SkeletonHorse", "minecraft:skeleton_horse").put("Skeleton", "minecraft:skeleton").put("Slime", "minecraft:slime").put("Spider", "minecraft:spider").put("Squid", "minecraft:squid").put("Stray", "minecraft:stray").put("Vex", "minecraft:vex").put("Villager", "minecraft:villager").put("VindicationIllager", "minecraft:vindication_illager").put("Witch", "minecraft:witch").put("WitherSkeleton", "minecraft:wither_skeleton").put("Wolf", "minecraft:wolf").put("ZombieHorse", "minecraft:zombie_horse").put("PigZombie", "minecraft:zombie_pigman").put("ZombieVillager", "minecraft:zombie_villager").put("Zombie", "minecraft:zombie").build();
+   // MagmaCube start - decompile error
+   private static final Set<String> SKIP = (Set) ImmutableSet.builder().add("stat.craftItem.minecraft.spawn_egg").add("stat.useItem.minecraft.spawn_egg").add("stat.breakItem.minecraft.spawn_egg").add("stat.pickup.minecraft.spawn_egg").add("stat.drop.minecraft.spawn_egg").build();
+   private static final Map<String, String> CUSTOM_MAP = (Map) ImmutableMap.builder().put("stat.leaveGame", "minecraft:leave_game").put("stat.playOneMinute", "minecraft:play_one_minute").put("stat.timeSinceDeath", "minecraft:time_since_death").put("stat.sneakTime", "minecraft:sneak_time").put("stat.walkOneCm", "minecraft:walk_one_cm").put("stat.crouchOneCm", "minecraft:crouch_one_cm").put("stat.sprintOneCm", "minecraft:sprint_one_cm").put("stat.swimOneCm", "minecraft:swim_one_cm").put("stat.fallOneCm", "minecraft:fall_one_cm").put("stat.climbOneCm", "minecraft:climb_one_cm").put("stat.flyOneCm", "minecraft:fly_one_cm").put("stat.diveOneCm", "minecraft:dive_one_cm").put("stat.minecartOneCm", "minecraft:minecart_one_cm").put("stat.boatOneCm", "minecraft:boat_one_cm").put("stat.pigOneCm", "minecraft:pig_one_cm").put("stat.horseOneCm", "minecraft:horse_one_cm").put("stat.aviateOneCm", "minecraft:aviate_one_cm").put("stat.jump", "minecraft:jump").put("stat.drop", "minecraft:drop").put("stat.damageDealt", "minecraft:damage_dealt").put("stat.damageTaken", "minecraft:damage_taken").put("stat.deaths", "minecraft:deaths").put("stat.mobKills", "minecraft:mob_kills").put("stat.animalsBred", "minecraft:animals_bred").put("stat.playerKills", "minecraft:player_kills").put("stat.fishCaught", "minecraft:fish_caught").put("stat.talkedToVillager", "minecraft:talked_to_villager").put("stat.tradedWithVillager", "minecraft:traded_with_villager").put("stat.cakeSlicesEaten", "minecraft:eat_cake_slice").put("stat.cauldronFilled", "minecraft:fill_cauldron").put("stat.cauldronUsed", "minecraft:use_cauldron").put("stat.armorCleaned", "minecraft:clean_armor").put("stat.bannerCleaned", "minecraft:clean_banner").put("stat.brewingstandInteraction", "minecraft:interact_with_brewingstand").put("stat.beaconInteraction", "minecraft:interact_with_beacon").put("stat.dropperInspected", "minecraft:inspect_dropper").put("stat.hopperInspected", "minecraft:inspect_hopper").put("stat.dispenserInspected", "minecraft:inspect_dispenser").put("stat.noteblockPlayed", "minecraft:play_noteblock").put("stat.noteblockTuned", "minecraft:tune_noteblock").put("stat.flowerPotted", "minecraft:pot_flower").put("stat.trappedChestTriggered", "minecraft:trigger_trapped_chest").put("stat.enderchestOpened", "minecraft:open_enderchest").put("stat.itemEnchanted", "minecraft:enchant_item").put("stat.recordPlayed", "minecraft:play_record").put("stat.furnaceInteraction", "minecraft:interact_with_furnace").put("stat.craftingTableInteraction", "minecraft:interact_with_crafting_table").put("stat.chestOpened", "minecraft:open_chest").put("stat.sleepInBed", "minecraft:sleep_in_bed").put("stat.shulkerBoxOpened", "minecraft:open_shulker_box").build();
+   private static final Map<String, String> ITEM_KEYS = (Map) ImmutableMap.builder().put("stat.craftItem", "minecraft:crafted").put("stat.useItem", "minecraft:used").put("stat.breakItem", "minecraft:broken").put("stat.pickup", "minecraft:picked_up").put("stat.drop", "minecraft:dropped").build();
+   private static final Map<String, String> ENTITY_KEYS = (Map) ImmutableMap.builder().put("stat.entityKilledBy", "minecraft:killed_by").put("stat.killEntity", "minecraft:killed").build();
+   private static final Map<String, String> ENTITIES = (Map) ImmutableMap.builder().put("Bat", "minecraft:bat").put("Blaze", "minecraft:blaze").put("CaveSpider", "minecraft:cave_spider").put("Chicken", "minecraft:chicken").put("Cow", "minecraft:cow").put("Creeper", "minecraft:creeper").put("Donkey", "minecraft:donkey").put("ElderGuardian", "minecraft:elder_guardian").put("Enderman", "minecraft:enderman").put("Endermite", "minecraft:endermite").put("EvocationIllager", "minecraft:evocation_illager").put("Ghast", "minecraft:ghast").put("Guardian", "minecraft:guardian").put("Horse", "minecraft:horse").put("Husk", "minecraft:husk").put("Llama", "minecraft:llama").put("LavaSlime", "minecraft:magma_cube").put("MushroomCow", "minecraft:mooshroom").put("Mule", "minecraft:mule").put("Ozelot", "minecraft:ocelot").put("Parrot", "minecraft:parrot").put("Pig", "minecraft:pig").put("PolarBear", "minecraft:polar_bear").put("Rabbit", "minecraft:rabbit").put("Sheep", "minecraft:sheep").put("Shulker", "minecraft:shulker").put("Silverfish", "minecraft:silverfish").put("SkeletonHorse", "minecraft:skeleton_horse").put("Skeleton", "minecraft:skeleton").put("Slime", "minecraft:slime").put("Spider", "minecraft:spider").put("Squid", "minecraft:squid").put("Stray", "minecraft:stray").put("Vex", "minecraft:vex").put("Villager", "minecraft:villager").put("VindicationIllager", "minecraft:vindication_illager").put("Witch", "minecraft:witch").put("WitherSkeleton", "minecraft:wither_skeleton").put("Wolf", "minecraft:wolf").put("ZombieHorse", "minecraft:zombie_horse").put("PigZombie", "minecraft:zombie_pigman").put("ZombieVillager", "minecraft:zombie_villager").put("Zombie", "minecraft:zombie").build();
+   // MagmaCube end - decompile error
 
    public StatsCounterFix(Schema schema, boolean flag) {
       super(schema, flag);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/StructureReferenceCountFix.java b/src/main/java/net/minecraft/util/datafix/fixes/StructureReferenceCountFix.java
index a23c990d1bfb051cf95d938830256d790b1e75c4..78c1ba11e6da17e1ca464aba25af7d5606223ef7 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/StructureReferenceCountFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/StructureReferenceCountFix.java
@@ -18,6 +18,12 @@ public class StructureReferenceCountFix extends DataFix {
    }
 
    private static <T> Dynamic<T> setCountToAtLeastOne(Dynamic<T> dynamic) {
-      return dynamic.update("references", (dynamicx) -> // $FF: Couldn't be decompiled);
+      // MagmaCube start - decompile error
+      return dynamic.update("references", (dynamicx) -> {
+         return dynamicx.createInt(dynamicx.asNumber().map(Number::intValue).result().filter((p_226214_0_) -> {
+            return p_226214_0_ > 0;
+         }).orElse(1));
+      });
+      // MagmaCube end - decompile error
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/SwimStatsRenameFix.java b/src/main/java/net/minecraft/util/datafix/fixes/SwimStatsRenameFix.java
index b195a7e40d3e818101e4b0e64468d47439f2ae63..08ee08e9bc2256ba5f307645ee7554f7a39d0235 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/SwimStatsRenameFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/SwimStatsRenameFix.java
@@ -18,7 +18,7 @@ public class SwimStatsRenameFix extends DataFix {
       OpticFinder<?> opticFinder = type2.findField("stats");
       OpticFinder<?> opticFinder2 = opticFinder.type().findField("minecraft:custom");
       OpticFinder<String> opticFinder3 = NamespacedSchema.namespacedString().finder();
-      return this.fixTypeEverywhereTyped("SwimStatsRenameFix", type2, type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typed) -> typed.update(opticFinder3, (s) -> {
+      return this.fixTypeEverywhereTyped("SwimStatsRenameFix", type2, type, (typed) -> typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typedxx) -> typedxx.update(opticFinder3, (s) -> { // MagmaCube - decompile error
                   if (s.equals("minecraft:swim_one_cm")) {
                      return "minecraft:walk_on_water_one_cm";
                   } else {
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/TrappedChestBlockEntityFix.java b/src/main/java/net/minecraft/util/datafix/fixes/TrappedChestBlockEntityFix.java
index f00733e5c5601863996fab17d253c0dbb18335af..1e2a787ff3e539c30f5aff568c3f034fd20d14c2 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/TrappedChestBlockEntityFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/TrappedChestBlockEntityFix.java
@@ -67,19 +67,21 @@ public class TrappedChestBlockEntityFix extends DataFix {
                      Dynamic<?> dynamic = (Dynamic)typedx.get(DSL.remainderFinder());
                      int i3 = dynamic.get("xPos").asInt(0);
                      int i4 = dynamic.get("zPos").asInt(0);
-                     TaggedChoiceType<String> taggedChoiceType = this.getInputSchema().findChoiceType(References.BLOCK_ENTITY);
-                     return typedx.updateTyped(opticFinder, (typed) -> typed.updateTyped(taggedChoiceType.finder(), (typedx) -> {
-                           Dynamic<?> dynamic = (Dynamic)typedx.getOrCreate(DSL.remainderFinder());
-                           int i3 = dynamic.get("x").asInt(0) - (i3 << 4);
-                           int i4 = dynamic.get("y").asInt(0);
-                           int i5 = dynamic.get("z").asInt(0) - (i4 << 4);
-                           return intSet.contains(LeavesFix.getIndex(i3, i4, i5)) ? typedx.update(taggedChoiceType.finder(), (pair) -> pair.mapFirst((s) -> {
+                     // MagmaCube start - decompile error
+                     TaggedChoiceType<String> taggedChoiceType = (TaggedChoiceType<String>) this.getInputSchema().findChoiceType(References.BLOCK_ENTITY); // MagmaCube - decompile error
+                     return typedx.updateTyped(opticFinder, (typedxz) -> typedxz.updateTyped(taggedChoiceType.finder(), (typedxc) -> {
+                           Dynamic<?> dynamicd = (Dynamic)typedxc.getOrCreate(DSL.remainderFinder());
+                           int i3re = dynamicd.get("x").asInt(0) - (i3 << 4);
+                           int i4rf = dynamicd.get("y").asInt(0);
+                           int i5 = dynamicd.get("z").asInt(0) - (i4 << 4);
+                           return intSet.contains(LeavesFix.getIndex(i3re, i4rf, i5)) ? typedxc.update(taggedChoiceType.finder(), (pair) -> pair.mapFirst((s) -> {
+                              // MagmaCube end - decompile error
                                  if (!Objects.equals(s, "minecraft:chest")) {
                                     LOGGER.warn("Block Entity was expected to be a chest");
                                  }
 
                                  return "minecraft:trapped_chest";
-                              })) : typedx;
+                              })) : typedxc;
                         }));
                   }
                })));
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/VillagerRebuildLevelAndXpFix.java b/src/main/java/net/minecraft/util/datafix/fixes/VillagerRebuildLevelAndXpFix.java
index 39aaa9459fcc9fa9501ac6d07afc7a9f4ab9a7f0..765d4790c4a1688048d800460fbe4fe5a621a15a 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/VillagerRebuildLevelAndXpFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/VillagerRebuildLevelAndXpFix.java
@@ -36,7 +36,8 @@ public class VillagerRebuildLevelAndXpFix extends DataFix {
             int i = dynamic.get("VillagerData").get("level").asInt(0);
             Typed<?> typed2 = typedx;
             if (i == 0 || i == 1) {
-               int i2 = typedx.getOptionalTyped(opticFinder2).flatMap((typed) -> typed.getOptionalTyped(opticFinder3)).map((typed) -> typed.getAllTyped(opticFinder4).size()).orElse(0);
+                // MagmaCube - decompile error
+               int i2 = typedx.getOptionalTyped(opticFinder2).flatMap((typedxx) -> typedxx.getOptionalTyped(opticFinder3)).map((typedxxx) -> typedxxx.getAllTyped(opticFinder4).size()).orElse(0);
                i = Mth.clamp(i2 / 2, 1, 5);
                if (i > 1) {
                   typed2 = addLevel(typedx, i);
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/VillagerTradeFix.java b/src/main/java/net/minecraft/util/datafix/fixes/VillagerTradeFix.java
index 2944abe4bfd10027e67935413c46107c9f91bc58..7e8e35b35d87ee920b35d9c27c2a18910653eeb7 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/VillagerTradeFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/VillagerTradeFix.java
@@ -31,7 +31,7 @@ public class VillagerTradeFix extends NamedEntityFix {
          OpticFinder<?> opticFinder6 = type2.findField("sell");
          OpticFinder<Pair<String, String>> opticFinder7 = DSL.fieldFinder("id", DSL.named(References.ITEM_NAME.typeName(), NamespacedSchema.namespacedString()));
          Function<Typed<?>, Typed<?>> function = (typedx) -> this.updateItemStack(opticFinder7, typedx);
-         return typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typed) -> typed.updateTyped(opticFinder3, (typedx) -> typedx.updateTyped(opticFinder4, function).updateTyped(opticFinder5, function).updateTyped(opticFinder6, function))));
+         return typed.updateTyped(opticFinder, (typedx) -> typedx.updateTyped(opticFinder2, (typedxxx) -> typedxxx.updateTyped(opticFinder3, (typedxz) -> typedxz.updateTyped(opticFinder4, function).updateTyped(opticFinder5, function).updateTyped(opticFinder6, function)))); // MagmaCube - decompile error
       }
    }
 
diff --git a/src/main/java/net/minecraft/util/datafix/fixes/WorldGenSettingsFix.java b/src/main/java/net/minecraft/util/datafix/fixes/WorldGenSettingsFix.java
index 02a0379d97d8b5b94ab3ffa4f32b0747c35ef9ef..6ba8e8f4d627d8feeeda7fcfa558b90f8f697856 100644
--- a/src/main/java/net/minecraft/util/datafix/fixes/WorldGenSettingsFix.java
+++ b/src/main/java/net/minecraft/util/datafix/fixes/WorldGenSettingsFix.java
@@ -19,12 +19,15 @@ import java.util.Objects;
 import java.util.Optional;
 import java.util.stream.Collectors;
 import java.util.stream.Stream;
+
+import net.minecraft.world.level.levelgen.WorldGenSettings;
 import org.apache.commons.lang3.math.NumberUtils;
 import org.apache.commons.lang3.mutable.MutableBoolean;
 import org.apache.commons.lang3.mutable.MutableInt;
 
 public class WorldGenSettingsFix extends DataFix {
-   private static final ImmutableMap<String, WorldGenSettingsFix.StructureFeatureConfiguration> DEFAULTS = ImmutableMap.builder().put("minecraft:village", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 10387312)).put("minecraft:desert_pyramid", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357617)).put("minecraft:igloo", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357618)).put("minecraft:jungle_pyramid", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357619)).put("minecraft:swamp_hut", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357620)).put("minecraft:pillager_outpost", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 165745296)).put("minecraft:monument", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 5, 10387313)).put("minecraft:endcity", new WorldGenSettingsFix.StructureFeatureConfiguration(20, 11, 10387313)).put("minecraft:mansion", new WorldGenSettingsFix.StructureFeatureConfiguration(80, 20, 10387319)).build();
+   // MagmaCube - decompile error
+   private static final ImmutableMap<String, WorldGenSettingsFix.StructureFeatureConfiguration> DEFAULTS = (ImmutableMap) ImmutableMap.builder().put("minecraft:village", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 10387312)).put("minecraft:desert_pyramid", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357617)).put("minecraft:igloo", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357618)).put("minecraft:jungle_pyramid", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357619)).put("minecraft:swamp_hut", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 14357620)).put("minecraft:pillager_outpost", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 8, 165745296)).put("minecraft:monument", new WorldGenSettingsFix.StructureFeatureConfiguration(32, 5, 10387313)).put("minecraft:endcity", new WorldGenSettingsFix.StructureFeatureConfiguration(20, 11, 10387313)).put("minecraft:mansion", new WorldGenSettingsFix.StructureFeatureConfiguration(80, 20, 10387319)).build();
 
    public WorldGenSettingsFix(Schema schema) {
       super(schema, true);
@@ -39,7 +42,7 @@ public class WorldGenSettingsFix extends DataFix {
    }
 
    private static <T> Dynamic<T> vanillaBiomeSource(Dynamic<T> dynamic, long l, boolean flag, boolean flag2) {
-      Builder<Dynamic<T>, Dynamic<T>> builder = ImmutableMap.builder().put(dynamic.createString("type"), dynamic.createString("minecraft:vanilla_layered")).put(dynamic.createString("seed"), dynamic.createLong(l)).put(dynamic.createString("large_biomes"), dynamic.createBoolean(flag2));
+      Builder<Dynamic<T>, Dynamic<T>> builder = (Builder) ImmutableMap.builder().put(dynamic.createString("type"), dynamic.createString("minecraft:vanilla_layered")).put(dynamic.createString("seed"), dynamic.createLong(l)).put(dynamic.createString("large_biomes"), dynamic.createBoolean(flag2)); // MagmaCube - decompile error
       if (flag) {
          builder.put(dynamic.createString("legacy_biome_init_layer"), dynamic.createBoolean(flag));
       }
@@ -124,7 +127,93 @@ public class WorldGenSettingsFix extends DataFix {
    }
 
    private static <T> Map<Dynamic<T>, Dynamic<T>> fixFlatStructures(DynamicOps<T> dynamicOps, OptionalDynamic<T> optionalDynamic) {
-      // $FF: Couldn't be decompiled
+      // MagmaCube start - decompile error
+      MutableInt mutableint = new MutableInt(32);
+      MutableInt mutableint1 = new MutableInt(3);
+      MutableInt mutableint2 = new MutableInt(128);
+      MutableBoolean mutableboolean = new MutableBoolean(false);
+      Map<String, WorldGenSettingsFix.StructureFeatureConfiguration> map = Maps.newHashMap();
+      if (!optionalDynamic.result().isPresent()) {
+         mutableboolean.setTrue();
+         map.put("minecraft:village", DEFAULTS.get("minecraft:village"));
+      }
+
+      optionalDynamic.get("structures").flatMap(Dynamic::getMapValues).result().ifPresent((p_233439_5_) -> {
+         p_233439_5_.forEach((p_233438_5_, p_233438_6_) -> {
+            p_233438_6_.getMapValues().result().ifPresent((p_233429_6_) -> {
+               p_233429_6_.forEach((p_233428_6_, p_233428_7_) -> {
+                  String s = p_233438_5_.asString("");
+                  String s1 = p_233428_6_.asString("");
+                  String s2 = p_233428_7_.asString("");
+                  if ("stronghold".equals(s)) {
+                     mutableboolean.setTrue();
+                     switch(s1) {
+                        case "distance":
+                           mutableint.setValue(getInt(s2, mutableint.getValue(), 1));
+                           return;
+                        case "spread":
+                           mutableint1.setValue(getInt(s2, mutableint1.getValue(), 1));
+                           return;
+                        case "count":
+                           mutableint2.setValue(getInt(s2, mutableint2.getValue(), 1));
+                           return;
+                        default:
+                     }
+                  } else {
+                     switch(s1) {
+                        case "distance":
+                           switch(s) {
+                              case "village":
+                                 setSpacing(map, "minecraft:village", s2, 9);
+                                 return;
+                              case "biome_1":
+                                 setSpacing(map, "minecraft:desert_pyramid", s2, 9);
+                                 setSpacing(map, "minecraft:igloo", s2, 9);
+                                 setSpacing(map, "minecraft:jungle_pyramid", s2, 9);
+                                 setSpacing(map, "minecraft:swamp_hut", s2, 9);
+                                 setSpacing(map, "minecraft:pillager_outpost", s2, 9);
+                                 return;
+                              case "endcity":
+                                 setSpacing(map, "minecraft:endcity", s2, 1);
+                                 return;
+                              case "mansion":
+                                 setSpacing(map, "minecraft:mansion", s2, 1);
+                                 return;
+                              default:
+                                 return;
+                           }
+                        case "separation":
+                           if ("oceanmonument".equals(s)) {
+                              WorldGenSettingsFix.StructureFeatureConfiguration worldgensettings$structureseparationsettingscodec = map.getOrDefault("minecraft:monument", DEFAULTS.get("minecraft:monument"));
+                              int i = getInt(s2, worldgensettings$structureseparationsettingscodec.separation, 1);
+                              map.put("minecraft:monument", new WorldGenSettingsFix.StructureFeatureConfiguration(i, worldgensettings$structureseparationsettingscodec.separation, worldgensettings$structureseparationsettingscodec.salt));
+                           }
+
+                           return;
+                        case "spacing":
+                           if ("oceanmonument".equals(s)) {
+                              setSpacing(map, "minecraft:monument", s2, 1);
+                           }
+                           return;
+                        default:
+                     }
+                  }
+               });
+            });
+         });
+      });
+      Builder<Dynamic<T>, Dynamic<T>> builder = ImmutableMap.builder();
+      builder.put(optionalDynamic.createString("structures"), optionalDynamic.createMap(map.entrySet().stream().collect(Collectors.toMap((p_233432_1_) -> {
+         return optionalDynamic.createString(p_233432_1_.getKey());
+      }, (p_233431_1_) -> {
+         return p_233431_1_.getValue().serialize(dynamicOps);
+      }))));
+      if (mutableboolean.isTrue()) {
+         builder.put(optionalDynamic.createString("stronghold"), optionalDynamic.createMap(ImmutableMap.of(optionalDynamic.createString("distance"), optionalDynamic.createInt(mutableint.getValue()), optionalDynamic.createString("spread"), optionalDynamic.createInt(mutableint1.getValue()), optionalDynamic.createString("count"), optionalDynamic.createInt(mutableint2.getValue()))));
+      }
+
+      return builder.build();
+      // MagmaCube end - decompile error
    }
 
    private static int getInt(String s, int i) {
diff --git a/src/main/java/net/minecraft/util/datafix/schemas/V704.java b/src/main/java/net/minecraft/util/datafix/schemas/V704.java
index ad5766d3b5405c97701ae08c8061f2bd309a528e..c39de738a48591f9bbea2b8be55db4d700746135 100644
--- a/src/main/java/net/minecraft/util/datafix/schemas/V704.java
+++ b/src/main/java/net/minecraft/util/datafix/schemas/V704.java
@@ -91,7 +91,7 @@ public class V704 extends Schema {
    });
    protected static final HookFunction ADD_NAMES = new HookFunction() {
       public <T> T apply(DynamicOps<T> dynamicOps, T object) {
-         return V99.addNames(new Dynamic(dynamicOps, object), V704.ITEM_TO_BLOCKENTITY, "ArmorStand");
+         return V99.addNames(new Dynamic<>(dynamicOps, object), V704.ITEM_TO_BLOCKENTITY, "ArmorStand"); // MagmaCube - decompile error
       }
    };
 
diff --git a/src/main/java/net/minecraft/util/datafix/schemas/V705.java b/src/main/java/net/minecraft/util/datafix/schemas/V705.java
index 4ecc60b925bed27d678d8e6be66b6e573494f7ee..c0edcfd1e9928657b7db1769b11b1d80257eaf25 100644
--- a/src/main/java/net/minecraft/util/datafix/schemas/V705.java
+++ b/src/main/java/net/minecraft/util/datafix/schemas/V705.java
@@ -14,7 +14,7 @@ import net.minecraft.util.datafix.fixes.References;
 public class V705 extends NamespacedSchema {
    protected static final HookFunction ADD_NAMES = new HookFunction() {
       public <T> T apply(DynamicOps<T> dynamicOps, T object) {
-         return V99.addNames(new Dynamic(dynamicOps, object), V704.ITEM_TO_BLOCKENTITY, "minecraft:armor_stand");
+         return V99.addNames(new Dynamic<>(dynamicOps, object), V704.ITEM_TO_BLOCKENTITY, "minecraft:armor_stand"); // MagmaCube - decompile error
       }
    };
 
diff --git a/src/main/java/net/minecraft/util/datafix/schemas/V99.java b/src/main/java/net/minecraft/util/datafix/schemas/V99.java
index e28795280be0ddfd5a9028883bb4d70ab76ff53e..258135d1da3e43b87b93b827fd47217436cd9f88 100644
--- a/src/main/java/net/minecraft/util/datafix/schemas/V99.java
+++ b/src/main/java/net/minecraft/util/datafix/schemas/V99.java
@@ -55,7 +55,7 @@ public class V99 extends Schema {
    });
    protected static final HookFunction ADD_NAMES = new HookFunction() {
       public <T> T apply(DynamicOps<T> dynamicOps, T object) {
-         return V99.addNames(new Dynamic(dynamicOps, object), V99.ITEM_TO_BLOCKENTITY, "ArmorStand");
+         return V99.addNames(new Dynamic<>(dynamicOps, object), V99.ITEM_TO_BLOCKENTITY, "ArmorStand"); // MagmaCube - decompile error
       }
    };
 
@@ -206,10 +206,12 @@ public class V99 extends Schema {
 
    protected static <T> T addNames(Dynamic<T> dynamic, Map<String, String> map, String s) {
       return (T)dynamic.update("tag", (dynamic2) -> dynamic2.update("BlockEntityTag", (dynamic2x) -> {
-            String s = dynamic.get("id").asString("");
-            String s2 = (String)map.get(NamespacedSchema.ensureNamespaced(s));
+            // MagmaCube start - decompile error
+            String sx = dynamic.get("id").asString("");
+            String s2 = (String)map.get(NamespacedSchema.ensureNamespaced(sx));
             if (s2 == null) {
-               LOGGER.warn("Unable to resolve BlockEntity for ItemStack: {}", s);
+               LOGGER.warn("Unable to resolve BlockEntity for ItemStack: {}", sx);
+               // MagmaCube end - decompile error
                return dynamic2x;
             } else {
                return dynamic2x.set("id", dynamic.createString(s2));
diff --git a/src/main/java/net/minecraft/util/profiling/FilledProfileResults.java b/src/main/java/net/minecraft/util/profiling/FilledProfileResults.java
index 8e4f8cb8bd09cd49abdecb368b0b0ad13e6a7792..3d614ce714d02036787fa79a52af20200f6cd81d 100644
--- a/src/main/java/net/minecraft/util/profiling/FilledProfileResults.java
+++ b/src/main/java/net/minecraft/util/profiling/FilledProfileResults.java
@@ -40,7 +40,7 @@ public class FilledProfileResults implements ProfileResults {
       }
    };
    private static final Splitter SPLITTER = Splitter.on('\u001e');
-   private static final Comparator<Entry<String, FilledProfileResults.CounterCollector>> COUNTER_ENTRY_COMPARATOR = Entry.comparingByValue(Comparator.comparingLong((counterCollector) -> counterCollector.totalValue)).reversed();
+   private static final Comparator<Entry<String, FilledProfileResults.CounterCollector>> COUNTER_ENTRY_COMPARATOR = Entry.<String, CounterCollector>comparingByValue(Comparator.comparingLong((counterCollector) -> counterCollector.totalValue)).reversed(); // MagmaCube - decompile error
    private final Map<String, ? extends ProfilerPathEntry> entries;
    private final long startTimeNano;
    private final int startTimeTicks;
@@ -121,7 +121,7 @@ public class FilledProfileResults implements ProfileResults {
          Object2LongMap<String> object2LongMap = profilerPathEntry.getCounters();
          if (!object2LongMap.isEmpty()) {
             List<String> list = SPLITTER.splitToList(s);
-            object2LongMap.forEach((sx, l) -> ((FilledProfileResults.CounterCollector)map.computeIfAbsent(sx, (s) -> new FilledProfileResults.CounterCollector())).addValue(list.iterator(), l));
+            object2LongMap.forEach((sx, l) -> ((FilledProfileResults.CounterCollector)map.computeIfAbsent(sx, (s1) -> new FilledProfileResults.CounterCollector())).addValue(list.iterator(), l)); // MagmaCube - decompile error
          }
 
       });
diff --git a/src/main/java/net/minecraft/util/profiling/SingleTickProfiler.java b/src/main/java/net/minecraft/util/profiling/SingleTickProfiler.java
index 7d9a1485ebd8fc10a12a4a8eadc25754441eedbb..1bff1d3326b575f3295093cad79a66c1a47c4a39 100644
--- a/src/main/java/net/minecraft/util/profiling/SingleTickProfiler.java
+++ b/src/main/java/net/minecraft/util/profiling/SingleTickProfiler.java
@@ -10,10 +10,10 @@ import org.apache.logging.log4j.Logger;
 
 public class SingleTickProfiler {
    private static final Logger LOGGER = LogManager.getLogger();
-   private final LongSupplier realTime;
-   private final long saveThreshold;
+   private final LongSupplier realTime = null; // MagmaCube - decompile error
+   private final long saveThreshold = 0L; // MagmaCube - decompile error
    private int tick;
-   private final File location;
+   private final File location = null; // MagmaCube - decompile error
    private ProfileCollector profiler;
 
    public ProfilerFiller startTick() {
diff --git a/src/main/java/net/minecraft/util/worldupdate/WorldUpgrader.java b/src/main/java/net/minecraft/util/worldupdate/WorldUpgrader.java
index 022a0338631b8194d17e1416306b95b893877f53..7e6d69ca7670a55e09b9f05dc52408a68151091c 100644
--- a/src/main/java/net/minecraft/util/worldupdate/WorldUpgrader.java
+++ b/src/main/java/net/minecraft/util/worldupdate/WorldUpgrader.java
@@ -103,7 +103,7 @@ public class WorldUpgrader {
             builder2.put(resourceKey2, new ChunkStorage(new File(file, "region"), this.dataFixer, true));
          }
 
-         ImmutableMap<ResourceKey<Level>, ChunkStorage> immutableMap2 = builder2.build();
+         ImmutableMap<ResourceKey<Level>, ChunkStorage> immutableMap2xz = builder2.build(); // MagmaCube - decompile error
          long l = Util.getMillis();
          this.status = new TranslatableComponent("optimizeWorld.stage.upgrading");
 
@@ -115,7 +115,7 @@ public class WorldUpgrader {
             for(UnmodifiableIterator iOException2 = this.levels.iterator(); iOException2.hasNext(); f2 += f3) {
                ResourceKey<Level> resourceKey3 = (ResourceKey)iOException2.next();
                ListIterator<ChunkPos> listIterator = (ListIterator)immutableMap.get(resourceKey3);
-               ChunkStorage chunkStorage = (ChunkStorage)immutableMap2.get(resourceKey3);
+               ChunkStorage chunkStorage = (ChunkStorage)immutableMap2xz.get(resourceKey3); // MagmaCube - decompile error
                if (listIterator.hasNext()) {
                   ChunkPos chunkPos = (ChunkPos)listIterator.next();
                   boolean flag2 = false;
@@ -175,7 +175,7 @@ public class WorldUpgrader {
          }
 
          this.status = new TranslatableComponent("optimizeWorld.stage.finished");
-         UnmodifiableIterator var31 = immutableMap2.values().iterator();
+         UnmodifiableIterator var31 = immutableMap2xz.values().iterator(); // MagmaCube - decompile error
 
          while(var31.hasNext()) {
             ChunkStorage chunkStorage2 = (ChunkStorage)var31.next();
diff --git a/src/main/java/net/minecraft/world/entity/Mob.java b/src/main/java/net/minecraft/world/entity/Mob.java
index 5517a9a6aa18890fe19722fdcf75f97a9840cd73..7a517eb1154085410ecc265f548213e5c8bfb5f6 100644
--- a/src/main/java/net/minecraft/world/entity/Mob.java
+++ b/src/main/java/net/minecraft/world/entity/Mob.java
@@ -1049,7 +1049,7 @@ public abstract class Mob extends LivingEntity {
          if (itemStack.getItem() instanceof SpawnEggItem) {
             if (this.level instanceof ServerLevel) {
                SpawnEggItem spawnEggItem = (SpawnEggItem)itemStack.getItem();
-               Optional<Mob> optional = spawnEggItem.spawnOffspringFromSpawnEgg(player, this, this.getType(), (ServerLevel)this.level, this.position(), itemStack);
+               Optional<Mob> optional = spawnEggItem.spawnOffspringFromSpawnEgg(player, this, (EntityType<? extends Mob>) this.getType(), (ServerLevel)this.level, this.position(), itemStack); // MagmaCube - decompile error
                optional.ifPresent((mob) -> this.onOffspringSpawnedFromEgg(player, mob));
                return optional.isPresent() ? InteractionResult.SUCCESS : InteractionResult.PASS;
             } else {
diff --git a/src/main/java/net/minecraft/world/entity/SpawnPlacements.java b/src/main/java/net/minecraft/world/entity/SpawnPlacements.java
index 2847b0b6757c63714e4237553de52f5f81833b57..1e93184f74ab9393ce0b51334dced468f1980eef 100644
--- a/src/main/java/net/minecraft/world/entity/SpawnPlacements.java
+++ b/src/main/java/net/minecraft/world/entity/SpawnPlacements.java
@@ -57,7 +57,7 @@ public class SpawnPlacements {
 
    public static <T extends Entity> boolean checkSpawnRules(EntityType<T> entityType, ServerLevelAccessor serverLevelAccessor, MobSpawnType mobSpawnType, BlockPos blockPos, Random random) {
       SpawnPlacements.Data data = (SpawnPlacements.Data)DATA_BY_TYPE.get(entityType);
-      return data == null || data.predicate.test(entityType, serverLevelAccessor, mobSpawnType, blockPos, random);
+      return data == null || data.predicate.test((EntityType) entityType, serverLevelAccessor, mobSpawnType, blockPos, random); // MagmaCube - decompile error
    }
 
    static {
diff --git a/src/main/java/net/minecraft/world/entity/ai/Brain.java b/src/main/java/net/minecraft/world/entity/ai/Brain.java
index b381c4a64b608276d645799802a46cda3c70fefc..6839257084cc09d81425e36848a29fae5d4b7e7b 100644
--- a/src/main/java/net/minecraft/world/entity/ai/Brain.java
+++ b/src/main/java/net/minecraft/world/entity/ai/Brain.java
@@ -59,8 +59,8 @@ public class Brain<E extends LivingEntity> {
    }
 
    public static <E extends LivingEntity> Codec<Brain<E>> codec(final Collection<? extends MemoryModuleType<?>> collection, final Collection<? extends SensorType<? extends Sensor<? super E>>> collection2) {
-      final MutableObject<Codec<Brain<E>>> mutableObject = new MutableObject();
-      mutableObject.setValue((new MapCodec<Brain<E>>() {
+      final MutableObject<Codec<Brain<E>>> mutableObjectx = new MutableObject(); // MagmaCube - decompile error
+      mutableObjectx.setValue((new MapCodec<Brain<E>>() { // MagmaCube - decompile error
          public <T> Stream<T> keys(DynamicOps<T> dynamicOps) {
             return collection.stream().flatMap((memoryModuleType) -> Util.toStream(memoryModuleType.getCodec().map((codec) -> Registry.MEMORY_MODULE_TYPE.getKey(memoryModuleType)))).map((resourceLocation) -> dynamicOps.createString(resourceLocation.toString()));
          }
@@ -70,14 +70,14 @@ public class Brain<E extends LivingEntity> {
             mapLike.entries().forEach((pair) -> {
                DataResult<MemoryModuleType<?>> dataResult = Registry.MEMORY_MODULE_TYPE.parse(dynamicOps, pair.getFirst());
                DataResult<? extends Brain.MemoryValue<?>> dataResult2 = dataResult.flatMap((memoryModuleType) -> this.captureRead(memoryModuleType, dynamicOps, (T)pair.getSecond()));
-               mutableObject.setValue(((DataResult)mutableObject.getValue()).apply2(Builder::add, dataResult2));
+               mutableObject.setValue((mutableObject.getValue()).apply2(Builder::add, dataResult2)); // MagmaCube - decompile error
             });
-            ImmutableList<Brain.MemoryValue<?>> immutableList = (ImmutableList)((DataResult)mutableObject.getValue()).resultOrPartial(Brain.LOGGER::error).map(Builder::build).orElseGet(ImmutableList::of);
-            return DataResult.success(new Brain(collection, collection2, immutableList, mutableObject::getValue));
+            ImmutableList<Brain.MemoryValue<?>> immutableList = (ImmutableList)(mutableObject.getValue()).resultOrPartial(Brain.LOGGER::error).map(Builder::build).orElseGet(ImmutableList::of); // MagmaCube - decompile error
+            return DataResult.success(new Brain<>(collection, collection2, immutableList, mutableObjectx::getValue)); // MagmaCube - decompile error
          }
 
          private <T, U> DataResult<Brain.MemoryValue<U>> captureRead(MemoryModuleType<U> memoryModuleType, DynamicOps<T> dynamicOps, T object) {
-            return ((DataResult)memoryModuleType.getCodec().map(DataResult::success).orElseGet(() -> DataResult.error("No codec for memory: " + memoryModuleType))).flatMap((codec) -> codec.parse(dynamicOps, object)).map((expirableValue) -> new Brain.MemoryValue(memoryModuleType, Optional.of(expirableValue)));
+            return (memoryModuleType.getCodec().map(DataResult::success).orElseGet(() -> DataResult.error("No codec for memory: " + memoryModuleType))).flatMap((codec) -> codec.parse(dynamicOps, object)).map((expirableValue) -> new Brain.MemoryValue(memoryModuleType, Optional.of(expirableValue))); // MagmaCube - decompile error
          }
 
          public <T> RecordBuilder<T> encode(Brain<E> brain, DynamicOps<T> dynamicOps, RecordBuilder<T> recordBuilder) {
@@ -85,7 +85,7 @@ public class Brain<E extends LivingEntity> {
             return recordBuilder;
          }
       }).fieldOf("memories").codec());
-      return (Codec)mutableObject.getValue();
+      return (Codec)mutableObjectx.getValue();
    }
 
    public Brain(Collection<? extends MemoryModuleType<?>> collection, Collection<? extends SensorType<? extends Sensor<? super E>>> collection2, ImmutableList<Brain.MemoryValue<?>> immutableList, Supplier<Codec<Brain<E>>> supplier) {
@@ -115,7 +115,7 @@ public class Brain<E extends LivingEntity> {
    }
 
    public <T> DataResult<T> serializeStart(DynamicOps<T> dynamicOps) {
-      return ((Codec)this.codec.get()).encodeStart(dynamicOps, this);
+      return this.codec.get().encodeStart(dynamicOps, this); // MagmaCube - decompile error
    }
 
    private Stream<Brain.MemoryValue<?>> memories() {
@@ -154,7 +154,7 @@ public class Brain<E extends LivingEntity> {
    }
 
    public <U> Optional<U> getMemory(MemoryModuleType<U> memoryModuleType) {
-      return ((Optional)this.memories.get(memoryModuleType)).map(ExpirableValue::getValue);
+      return (Optional) (this.memories.get(memoryModuleType)).map(ExpirableValue::getValue); // MagmaCube - decompile error
    }
 
    public <U> boolean isMemoryValue(MemoryModuleType<U> memoryModuleType, U object) {
@@ -363,7 +363,7 @@ public class Brain<E extends LivingEntity> {
          for(Entry<Activity, Set<Behavior<? super E>>> entry : map.entrySet()) {
             Activity activity = (Activity)entry.getKey();
             if (this.activeActivities.contains(activity)) {
-               for(Behavior<? super E> behavior : (Set)entry.getValue()) {
+               for(Behavior<? super E> behavior : entry.getValue()) { // MagmaCube - decompile error
                   if (behavior.getStatus() == Behavior.Status.STOPPED) {
                      behavior.tryStart(serverLevel, livingEntity, l);
                   }
@@ -387,7 +387,7 @@ public class Brain<E extends LivingEntity> {
       if (!this.activityRequirements.containsKey(activity)) {
          return false;
       } else {
-         for(Pair<MemoryModuleType<?>, MemoryStatus> pair : (Set)this.activityRequirements.get(activity)) {
+         for(Pair<MemoryModuleType<?>, MemoryStatus> pair : this.activityRequirements.get(activity)) { // MagmaCube - decompile error
             MemoryModuleType<?> memoryModuleType = (MemoryModuleType)pair.getFirst();
             MemoryStatus memoryStatus = (MemoryStatus)pair.getSecond();
             if (!this.checkMemory(memoryModuleType, memoryStatus)) {
@@ -421,7 +421,7 @@ public class Brain<E extends LivingEntity> {
       private final Optional<? extends ExpirableValue<U>> value;
 
       private static <U> Brain.MemoryValue<U> createUnchecked(MemoryModuleType<U> memoryModuleType, Optional<? extends ExpirableValue<?>> optional) {
-         return new Brain.MemoryValue<>(memoryModuleType, optional);
+         return new Brain.MemoryValue(memoryModuleType, optional); // MagmaCube - decompile error
       }
 
       private MemoryValue(MemoryModuleType<U> memoryModuleType, Optional<? extends ExpirableValue<U>> optional) {
diff --git a/src/main/java/net/minecraft/world/entity/ai/attributes/DefaultAttributes.java b/src/main/java/net/minecraft/world/entity/ai/attributes/DefaultAttributes.java
index 6ad8e89168460eec1aa70cc165c60d5dc420cbd3..ab9a7d21a6e74f1b0334ff204d18a55de078b07d 100644
--- a/src/main/java/net/minecraft/world/entity/ai/attributes/DefaultAttributes.java
+++ b/src/main/java/net/minecraft/world/entity/ai/attributes/DefaultAttributes.java
@@ -71,7 +71,8 @@ import org.apache.logging.log4j.Logger;
 
 public class DefaultAttributes {
    private static final Logger LOGGER = LogManager.getLogger();
-   private static final Map<EntityType<? extends LivingEntity>, AttributeSupplier> SUPPLIERS = ImmutableMap.builder().put(EntityType.ARMOR_STAND, LivingEntity.createLivingAttributes().build()).put(EntityType.BAT, Bat.createAttributes().build()).put(EntityType.BEE, Bee.createAttributes().build()).put(EntityType.BLAZE, Blaze.createAttributes().build()).put(EntityType.CAT, Cat.createAttributes().build()).put(EntityType.CAVE_SPIDER, CaveSpider.createCaveSpider().build()).put(EntityType.CHICKEN, Chicken.createAttributes().build()).put(EntityType.COD, AbstractFish.createAttributes().build()).put(EntityType.COW, Cow.createAttributes().build()).put(EntityType.CREEPER, Creeper.createAttributes().build()).put(EntityType.DOLPHIN, Dolphin.createAttributes().build()).put(EntityType.DONKEY, AbstractChestedHorse.createBaseChestedHorseAttributes().build()).put(EntityType.DROWNED, Zombie.createAttributes().build()).put(EntityType.ELDER_GUARDIAN, ElderGuardian.createAttributes().build()).put(EntityType.ENDERMAN, EnderMan.createAttributes().build()).put(EntityType.ENDERMITE, Endermite.createAttributes().build()).put(EntityType.ENDER_DRAGON, EnderDragon.createAttributes().build()).put(EntityType.EVOKER, Evoker.createAttributes().build()).put(EntityType.FOX, Fox.createAttributes().build()).put(EntityType.GHAST, Ghast.createAttributes().build()).put(EntityType.GIANT, Giant.createAttributes().build()).put(EntityType.GUARDIAN, Guardian.createAttributes().build()).put(EntityType.HOGLIN, Hoglin.createAttributes().build()).put(EntityType.HORSE, AbstractHorse.createBaseHorseAttributes().build()).put(EntityType.HUSK, Zombie.createAttributes().build()).put(EntityType.ILLUSIONER, Illusioner.createAttributes().build()).put(EntityType.IRON_GOLEM, IronGolem.createAttributes().build()).put(EntityType.LLAMA, Llama.createAttributes().build()).put(EntityType.MAGMA_CUBE, MagmaCube.createAttributes().build()).put(EntityType.MOOSHROOM, Cow.createAttributes().build()).put(EntityType.MULE, AbstractChestedHorse.createBaseChestedHorseAttributes().build()).put(EntityType.OCELOT, Ocelot.createAttributes().build()).put(EntityType.PANDA, Panda.createAttributes().build()).put(EntityType.PARROT, Parrot.createAttributes().build()).put(EntityType.PHANTOM, Monster.createMonsterAttributes().build()).put(EntityType.PIG, Pig.createAttributes().build()).put(EntityType.PIGLIN, Piglin.createAttributes().build()).put(EntityType.PIGLIN_BRUTE, PiglinBrute.createAttributes().build()).put(EntityType.PILLAGER, Pillager.createAttributes().build()).put(EntityType.PLAYER, Player.createAttributes().build()).put(EntityType.POLAR_BEAR, PolarBear.createAttributes().build()).put(EntityType.PUFFERFISH, AbstractFish.createAttributes().build()).put(EntityType.RABBIT, Rabbit.createAttributes().build()).put(EntityType.RAVAGER, Ravager.createAttributes().build()).put(EntityType.SALMON, AbstractFish.createAttributes().build()).put(EntityType.SHEEP, Sheep.createAttributes().build()).put(EntityType.SHULKER, Shulker.createAttributes().build()).put(EntityType.SILVERFISH, Silverfish.createAttributes().build()).put(EntityType.SKELETON, AbstractSkeleton.createAttributes().build()).put(EntityType.SKELETON_HORSE, SkeletonHorse.createAttributes().build()).put(EntityType.SLIME, Monster.createMonsterAttributes().build()).put(EntityType.SNOW_GOLEM, SnowGolem.createAttributes().build()).put(EntityType.SPIDER, Spider.createAttributes().build()).put(EntityType.SQUID, Squid.createAttributes().build()).put(EntityType.STRAY, AbstractSkeleton.createAttributes().build()).put(EntityType.STRIDER, Strider.createAttributes().build()).put(EntityType.TRADER_LLAMA, Llama.createAttributes().build()).put(EntityType.TROPICAL_FISH, AbstractFish.createAttributes().build()).put(EntityType.TURTLE, Turtle.createAttributes().build()).put(EntityType.VEX, Vex.createAttributes().build()).put(EntityType.VILLAGER, Villager.createAttributes().build()).put(EntityType.VINDICATOR, Vindicator.createAttributes().build()).put(EntityType.WANDERING_TRADER, Mob.createMobAttributes().build()).put(EntityType.WITCH, Witch.createAttributes().build()).put(EntityType.WITHER, WitherBoss.createAttributes().build()).put(EntityType.WITHER_SKELETON, AbstractSkeleton.createAttributes().build()).put(EntityType.WOLF, Wolf.createAttributes().build()).put(EntityType.ZOGLIN, Zoglin.createAttributes().build()).put(EntityType.ZOMBIE, Zombie.createAttributes().build()).put(EntityType.ZOMBIE_HORSE, ZombieHorse.createAttributes().build()).put(EntityType.ZOMBIE_VILLAGER, Zombie.createAttributes().build()).put(EntityType.ZOMBIFIED_PIGLIN, ZombifiedPiglin.createAttributes().build()).build();
+   // MagmaCube - decompile error
+   private static final Map<EntityType<? extends LivingEntity>, AttributeSupplier> SUPPLIERS = (Map) ImmutableMap.builder().put(EntityType.ARMOR_STAND, LivingEntity.createLivingAttributes().build()).put(EntityType.BAT, Bat.createAttributes().build()).put(EntityType.BEE, Bee.createAttributes().build()).put(EntityType.BLAZE, Blaze.createAttributes().build()).put(EntityType.CAT, Cat.createAttributes().build()).put(EntityType.CAVE_SPIDER, CaveSpider.createCaveSpider().build()).put(EntityType.CHICKEN, Chicken.createAttributes().build()).put(EntityType.COD, AbstractFish.createAttributes().build()).put(EntityType.COW, Cow.createAttributes().build()).put(EntityType.CREEPER, Creeper.createAttributes().build()).put(EntityType.DOLPHIN, Dolphin.createAttributes().build()).put(EntityType.DONKEY, AbstractChestedHorse.createBaseChestedHorseAttributes().build()).put(EntityType.DROWNED, Zombie.createAttributes().build()).put(EntityType.ELDER_GUARDIAN, ElderGuardian.createAttributes().build()).put(EntityType.ENDERMAN, EnderMan.createAttributes().build()).put(EntityType.ENDERMITE, Endermite.createAttributes().build()).put(EntityType.ENDER_DRAGON, EnderDragon.createAttributes().build()).put(EntityType.EVOKER, Evoker.createAttributes().build()).put(EntityType.FOX, Fox.createAttributes().build()).put(EntityType.GHAST, Ghast.createAttributes().build()).put(EntityType.GIANT, Giant.createAttributes().build()).put(EntityType.GUARDIAN, Guardian.createAttributes().build()).put(EntityType.HOGLIN, Hoglin.createAttributes().build()).put(EntityType.HORSE, AbstractHorse.createBaseHorseAttributes().build()).put(EntityType.HUSK, Zombie.createAttributes().build()).put(EntityType.ILLUSIONER, Illusioner.createAttributes().build()).put(EntityType.IRON_GOLEM, IronGolem.createAttributes().build()).put(EntityType.LLAMA, Llama.createAttributes().build()).put(EntityType.MAGMA_CUBE, MagmaCube.createAttributes().build()).put(EntityType.MOOSHROOM, Cow.createAttributes().build()).put(EntityType.MULE, AbstractChestedHorse.createBaseChestedHorseAttributes().build()).put(EntityType.OCELOT, Ocelot.createAttributes().build()).put(EntityType.PANDA, Panda.createAttributes().build()).put(EntityType.PARROT, Parrot.createAttributes().build()).put(EntityType.PHANTOM, Monster.createMonsterAttributes().build()).put(EntityType.PIG, Pig.createAttributes().build()).put(EntityType.PIGLIN, Piglin.createAttributes().build()).put(EntityType.PIGLIN_BRUTE, PiglinBrute.createAttributes().build()).put(EntityType.PILLAGER, Pillager.createAttributes().build()).put(EntityType.PLAYER, Player.createAttributes().build()).put(EntityType.POLAR_BEAR, PolarBear.createAttributes().build()).put(EntityType.PUFFERFISH, AbstractFish.createAttributes().build()).put(EntityType.RABBIT, Rabbit.createAttributes().build()).put(EntityType.RAVAGER, Ravager.createAttributes().build()).put(EntityType.SALMON, AbstractFish.createAttributes().build()).put(EntityType.SHEEP, Sheep.createAttributes().build()).put(EntityType.SHULKER, Shulker.createAttributes().build()).put(EntityType.SILVERFISH, Silverfish.createAttributes().build()).put(EntityType.SKELETON, AbstractSkeleton.createAttributes().build()).put(EntityType.SKELETON_HORSE, SkeletonHorse.createAttributes().build()).put(EntityType.SLIME, Monster.createMonsterAttributes().build()).put(EntityType.SNOW_GOLEM, SnowGolem.createAttributes().build()).put(EntityType.SPIDER, Spider.createAttributes().build()).put(EntityType.SQUID, Squid.createAttributes().build()).put(EntityType.STRAY, AbstractSkeleton.createAttributes().build()).put(EntityType.STRIDER, Strider.createAttributes().build()).put(EntityType.TRADER_LLAMA, Llama.createAttributes().build()).put(EntityType.TROPICAL_FISH, AbstractFish.createAttributes().build()).put(EntityType.TURTLE, Turtle.createAttributes().build()).put(EntityType.VEX, Vex.createAttributes().build()).put(EntityType.VILLAGER, Villager.createAttributes().build()).put(EntityType.VINDICATOR, Vindicator.createAttributes().build()).put(EntityType.WANDERING_TRADER, Mob.createMobAttributes().build()).put(EntityType.WITCH, Witch.createAttributes().build()).put(EntityType.WITHER, WitherBoss.createAttributes().build()).put(EntityType.WITHER_SKELETON, AbstractSkeleton.createAttributes().build()).put(EntityType.WOLF, Wolf.createAttributes().build()).put(EntityType.ZOGLIN, Zoglin.createAttributes().build()).put(EntityType.ZOMBIE, Zombie.createAttributes().build()).put(EntityType.ZOMBIE_HORSE, ZombieHorse.createAttributes().build()).put(EntityType.ZOMBIE_VILLAGER, Zombie.createAttributes().build()).put(EntityType.ZOMBIFIED_PIGLIN, ZombifiedPiglin.createAttributes().build()).build();
 
    public static AttributeSupplier getSupplier(EntityType<? extends LivingEntity> entityType) {
       return (AttributeSupplier)SUPPLIERS.get(entityType);
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/AnimalMakeLove.java b/src/main/java/net/minecraft/world/entity/ai/behavior/AnimalMakeLove.java
index a675d145ad031217f4f313c4d0028bd9159976f8..cad80bef2eb766b7e9ab5c024a8fccfb7ce9c108 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/AnimalMakeLove.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/AnimalMakeLove.java
@@ -74,6 +74,7 @@ public class AnimalMakeLove extends Behavior<Animal> {
    }
 
    private Optional<? extends Animal> findValidBreedPartner(Animal animal) {
-      return ((List)animal.getBrain().getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).get()).stream().filter((livingEntity) -> livingEntity.getType() == this.partnerType).map((livingEntity) -> (Animal)livingEntity).filter(animal::canMate).findFirst();
+      // MagmaCube - decompile error
+      return (animal.getBrain().getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).get()).stream().filter((livingEntity) -> livingEntity.getType() == this.partnerType).map((livingEntity) -> (Animal)livingEntity).filter(animal::canMate).findFirst();
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWith.java b/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWith.java
index 390aa4ef59adfd97ddfc71ea1f46967c4758b9e3..86538e1fcaa31445c2cfbdefa45b9b1cdc17b8cb 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWith.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWith.java
@@ -45,12 +45,12 @@ public class InteractWith<E extends LivingEntity, T extends LivingEntity> extend
    }
 
    private boolean isTargetValid(LivingEntity livingEntity) {
-      return this.type.equals(livingEntity.getType()) && this.targetFilter.test(livingEntity);
+      return this.type.equals(livingEntity.getType()) && this.targetFilter.test((T) livingEntity); // MagmaCube - decompile error
    }
 
    protected void start(ServerLevel serverLevel, E livingEntity, long l) {
       Brain<?> brain = livingEntity.getBrain();
-      brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).ifPresent((list) -> list.stream().filter((livingEntityx) -> this.type.equals(livingEntityx.getType())).map((livingEntityx) -> livingEntityx).filter((livingEntity2) -> livingEntity2.distanceToSqr(livingEntity) <= (double)this.interactionRangeSqr).filter(this.targetFilter).findFirst().ifPresent((livingEntityx) -> {
+      brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).ifPresent((list) -> list.stream().filter((livingEntityx) -> this.type.equals(livingEntityx.getType())).map((livingEntityx) -> (T) livingEntityx).filter((livingEntity2) -> livingEntity2.distanceToSqr(livingEntity) <= (double)this.interactionRangeSqr).filter(this.targetFilter).findFirst().ifPresent((livingEntityx) -> { // MagmaCube - decompile error
             brain.setMemory(this.memory, (T)livingEntityx);
             brain.setMemory(MemoryModuleType.LOOK_TARGET, new EntityTracker(livingEntityx, true));
             brain.setMemory(MemoryModuleType.WALK_TARGET, new WalkTarget(new EntityTracker(livingEntityx, false), this.speedModifier, this.maxDist));
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWithDoor.java b/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWithDoor.java
index 03d7a1da929b1d8f88cf4203c018ddd67a12ca26..e43cb7ccab465b1027f77ed2767c1bbb11f008ee 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWithDoor.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/InteractWithDoor.java
@@ -111,7 +111,8 @@ public class InteractWithDoor extends Behavior<LivingEntity> {
 
    private static boolean areOtherMobsComingThroughDoor(ServerLevel serverLevel, LivingEntity livingEntity, BlockPos blockPos) {
       Brain<?> brain = livingEntity.getBrain();
-      return !brain.hasMemoryValue(MemoryModuleType.LIVING_ENTITIES) ? false : ((List)brain.getMemory(MemoryModuleType.LIVING_ENTITIES).get()).stream().filter((livingEntity2) -> livingEntity2.getType() == livingEntity.getType()).filter((livingEntityx) -> blockPos.closerThan(livingEntityx.position(), 2.0D)).anyMatch((livingEntityx) -> isMobComingThroughDoor(serverLevel, livingEntityx, blockPos));
+      // MagmaCube - decompile error
+      return !brain.hasMemoryValue(MemoryModuleType.LIVING_ENTITIES) ? false : (brain.getMemory(MemoryModuleType.LIVING_ENTITIES).get()).stream().filter((livingEntity2) -> livingEntity2.getType() == livingEntity.getType()).filter((livingEntityx) -> blockPos.closerThan(livingEntityx.position(), 2.0D)).anyMatch((livingEntityx) -> isMobComingThroughDoor(serverLevel, livingEntityx, blockPos));
    }
 
    private static boolean isMobComingThroughDoor(ServerLevel serverLevel, LivingEntity livingEntity, BlockPos blockPos) {
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/PlayTagWithOtherKids.java b/src/main/java/net/minecraft/world/entity/ai/behavior/PlayTagWithOtherKids.java
index bfeb21911fecd9b9d38a084e94286804986dbcf6..eff3d0938547c6639d137bd51ae99aae5c7cb4a5 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/PlayTagWithOtherKids.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/PlayTagWithOtherKids.java
@@ -87,7 +87,7 @@ public class PlayTagWithOtherKids extends Behavior<PathfinderMob> {
 
    @Nullable
    private LivingEntity seeIfSomeoneIsChasingMe(LivingEntity livingEntity) {
-      return (LivingEntity)((List)livingEntity.getBrain().getMemory(MemoryModuleType.VISIBLE_VILLAGER_BABIES).get()).stream().filter((livingEntity2) -> this.isFriendChasingMe(livingEntity, livingEntity2)).findAny().orElse(null);
+      return (LivingEntity)(livingEntity.getBrain().getMemory(MemoryModuleType.VISIBLE_VILLAGER_BABIES).get()).stream().filter((livingEntity2) -> this.isFriendChasingMe(livingEntity, livingEntity2)).findAny().orElse(null); // MagmaCube - decompile error
    }
 
    private boolean isChasingSomeone(LivingEntity livingEntity) {
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/SetClosestHomeAsWalkTarget.java b/src/main/java/net/minecraft/world/entity/ai/behavior/SetClosestHomeAsWalkTarget.java
index acab74e86b2629ff6881e8cd06ed3732aee9c21f..30dce5a7047dc0097893348ba1e632bac04061aa 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/SetClosestHomeAsWalkTarget.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/SetClosestHomeAsWalkTarget.java
@@ -46,13 +46,15 @@ public class SetClosestHomeAsWalkTarget extends Behavior<LivingEntity> {
       PathfinderMob pathfinderMob = (PathfinderMob)livingEntity;
       PoiManager poiManager = serverLevel.getPoiManager();
       Predicate<BlockPos> predicate = (blockPosx) -> {
-         long l = blockPosx.asLong();
-         if (this.batchCache.containsKey(l)) {
+         // MagmaCube start - decompile error
+         long lx = blockPosx.asLong();
+         if (this.batchCache.containsKey(lx)) {
+            // MagmaCube end - decompile error
             return false;
          } else if (++this.triedCount >= 5) {
             return false;
          } else {
-            this.batchCache.put(l, this.lastUpdate + 40L);
+            this.batchCache.put(lx, this.lastUpdate + 40L); // MagmaCube - decompile error
             return true;
          }
       };
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/SocializeAtBell.java b/src/main/java/net/minecraft/world/entity/ai/behavior/SocializeAtBell.java
index 8b05339cac36e5676a9e1cde21825dc7e4a63acf..1e3b3e3dec268f32f99924c70d00b85ad33ca1d5 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/SocializeAtBell.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/SocializeAtBell.java
@@ -20,7 +20,8 @@ public class SocializeAtBell extends Behavior<LivingEntity> {
    protected boolean checkExtraStartConditions(ServerLevel serverLevel, LivingEntity livingEntity) {
       Brain<?> brain = livingEntity.getBrain();
       Optional<GlobalPos> optional = brain.getMemory(MemoryModuleType.MEETING_POINT);
-      return serverLevel.getRandom().nextInt(100) == 0 && optional.isPresent() && serverLevel.dimension() == ((GlobalPos)optional.get()).dimension() && ((GlobalPos)optional.get()).pos().closerThan(livingEntity.position(), 4.0D) && ((List)brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).get()).stream().anyMatch((livingEntityx) -> EntityType.VILLAGER.equals(livingEntityx.getType()));
+      // MagmaCube - decompile error
+      return serverLevel.getRandom().nextInt(100) == 0 && optional.isPresent() && serverLevel.dimension() == ((GlobalPos)optional.get()).dimension() && ((GlobalPos)optional.get()).pos().closerThan(livingEntity.position(), 4.0D) && (brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).get()).stream().anyMatch((livingEntityx) -> EntityType.VILLAGER.equals(livingEntityx.getType()));
    }
 
    protected void start(ServerLevel serverLevel, LivingEntity livingEntity, long l) {
diff --git a/src/main/java/net/minecraft/world/entity/ai/behavior/StartAttacking.java b/src/main/java/net/minecraft/world/entity/ai/behavior/StartAttacking.java
index 5f9c16c56daa7ec200f52e9622c8044700567192..1d23c9cdc6afe9ef18928d3fba709efe2b09896c 100644
--- a/src/main/java/net/minecraft/world/entity/ai/behavior/StartAttacking.java
+++ b/src/main/java/net/minecraft/world/entity/ai/behavior/StartAttacking.java
@@ -34,7 +34,7 @@ public class StartAttacking<E extends Mob> extends Behavior<E> {
    }
 
    protected void start(ServerLevel serverLevel, E mob, long l) {
-      ((Optional)this.targetFinderFunction.apply(mob)).ifPresent((livingEntity) -> this.setAttackTarget(mob, livingEntity));
+      (this.targetFinderFunction.apply(mob)).ifPresent((livingEntity) -> this.setAttackTarget(mob, livingEntity)); // MagmaCube - decompile error
    }
 
    private void setAttackTarget(E mob, LivingEntity livingEntity) {
diff --git a/src/main/java/net/minecraft/world/entity/ai/gossip/GossipContainer.java b/src/main/java/net/minecraft/world/entity/ai/gossip/GossipContainer.java
index d97b1833a50a2120bcc0835fb8b635d91f7dc63a..4f0c2ea77c328b026a8b49f23d113d36268cde4f 100644
--- a/src/main/java/net/minecraft/world/entity/ai/gossip/GossipContainer.java
+++ b/src/main/java/net/minecraft/world/entity/ai/gossip/GossipContainer.java
@@ -78,10 +78,12 @@ public class GossipContainer {
    public void transferFrom(GossipContainer gossipContainer, Random random, int i) {
       Collection<GossipContainer.GossipEntry> collection = gossipContainer.selectGossipsForTransfer(random, i);
       collection.forEach((gossipEntry) -> {
-         int i = gossipEntry.value - gossipEntry.type.decayPerTransfer;
-         if (i >= 2) {
-            this.getOrCreate(gossipEntry.target).entries.mergeInt(gossipEntry.type, i, GossipContainer::mergeValuesForTransfer);
+         // MagmaCube start - decompile error
+         int i1 = gossipEntry.value - gossipEntry.type.decayPerTransfer;
+         if (i1 >= 2) {
+            this.getOrCreate(gossipEntry.target).entries.mergeInt(gossipEntry.type, i1, GossipContainer::mergeValuesForTransfer);
          }
+         // MagmaCube end - decompile error
 
       });
    }
diff --git a/src/main/java/net/minecraft/world/entity/ai/sensing/GolemSensor.java b/src/main/java/net/minecraft/world/entity/ai/sensing/GolemSensor.java
index b46eeb4663e371998203ad903098897d677e2dde..e0d67b9bd0a59e4cd6a215c8de86b507d5455c85 100644
--- a/src/main/java/net/minecraft/world/entity/ai/sensing/GolemSensor.java
+++ b/src/main/java/net/minecraft/world/entity/ai/sensing/GolemSensor.java
@@ -29,7 +29,7 @@ public class GolemSensor extends Sensor<LivingEntity> {
    public static void checkForNearbyGolem(LivingEntity livingEntity) {
       Optional<List<LivingEntity>> optional = livingEntity.getBrain().getMemory(MemoryModuleType.LIVING_ENTITIES);
       if (optional.isPresent()) {
-         boolean flag = ((List)optional.get()).stream().anyMatch((livingEntityx) -> livingEntityx.getType().equals(EntityType.IRON_GOLEM));
+         boolean flag = (optional.get()).stream().anyMatch((livingEntityx) -> livingEntityx.getType().equals(EntityType.IRON_GOLEM)); // MagmaCube - decompile error
          if (flag) {
             golemDetected(livingEntity);
          }
diff --git a/src/main/java/net/minecraft/world/entity/ai/sensing/HoglinSpecificSensor.java b/src/main/java/net/minecraft/world/entity/ai/sensing/HoglinSpecificSensor.java
index 16a07f64f999835a1d1a13ebe700320610dd3d8f..b9343c2714d12327facbd0694fe0c197ddb77bdf 100644
--- a/src/main/java/net/minecraft/world/entity/ai/sensing/HoglinSpecificSensor.java
+++ b/src/main/java/net/minecraft/world/entity/ai/sensing/HoglinSpecificSensor.java
@@ -26,7 +26,7 @@ public class HoglinSpecificSensor extends Sensor<Hoglin> {
       int i = 0;
       List<Hoglin> list = Lists.newArrayList();
 
-      for(LivingEntity livingEntity : (List)brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(Lists.newArrayList())) {
+      for(LivingEntity livingEntity : brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(Lists.newArrayList())) { // MagmaCube - decompile error
          if (livingEntity instanceof Piglin && !livingEntity.isBaby()) {
             ++i;
             if (!optional.isPresent()) {
diff --git a/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinBruteSpecificSensor.java b/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinBruteSpecificSensor.java
index f629b5ffea094dd5b1e99d00c2b9306ee981a42f..1b74af1e9ed58b3fa227e7911d12a4ffe846fa09 100644
--- a/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinBruteSpecificSensor.java
+++ b/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinBruteSpecificSensor.java
@@ -25,14 +25,14 @@ public class PiglinBruteSpecificSensor extends Sensor<LivingEntity> {
       Optional<Mob> optional = Optional.empty();
       List<AbstractPiglin> list = Lists.newArrayList();
 
-      for(LivingEntity livingEntity2 : (List)brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(ImmutableList.of())) {
+      for(LivingEntity livingEntity2 : brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(ImmutableList.of())) { // MagmaCube - decompile error
          if (livingEntity2 instanceof WitherSkeleton || livingEntity2 instanceof WitherBoss) {
             optional = Optional.of((Mob)livingEntity2);
             break;
          }
       }
 
-      for(LivingEntity livingEntity3 : (List)brain.getMemory(MemoryModuleType.LIVING_ENTITIES).orElse(ImmutableList.of())) {
+      for(LivingEntity livingEntity3 : brain.getMemory(MemoryModuleType.LIVING_ENTITIES).orElse(ImmutableList.of())) { // MagmaCube - decompile error
          if (livingEntity3 instanceof AbstractPiglin && ((AbstractPiglin)livingEntity3).isAdult()) {
             list.add((AbstractPiglin)livingEntity3);
          }
diff --git a/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinSpecificSensor.java b/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinSpecificSensor.java
index 81b77ee9757883b2137470c962e42af19eb8e962..11c30e258df871f53a6269ff2d6b8940a80c4ae7 100644
--- a/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinSpecificSensor.java
+++ b/src/main/java/net/minecraft/world/entity/ai/sensing/PiglinSpecificSensor.java
@@ -45,7 +45,7 @@ public class PiglinSpecificSensor extends Sensor<LivingEntity> {
       List<AbstractPiglin> list = Lists.newArrayList();
       List<AbstractPiglin> list2 = Lists.newArrayList();
 
-      for(LivingEntity livingEntity2 : (List)brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(ImmutableList.of())) {
+      for(LivingEntity livingEntity2 : brain.getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(ImmutableList.of())) { // MagmaCube - decompile error
          if (livingEntity2 instanceof Hoglin) {
             Hoglin hoglin = (Hoglin)livingEntity2;
             if (hoglin.isBaby() && !optional3.isPresent()) {
@@ -83,7 +83,7 @@ public class PiglinSpecificSensor extends Sensor<LivingEntity> {
          }
       }
 
-      for(LivingEntity livingEntity3 : (List)brain.getMemory(MemoryModuleType.LIVING_ENTITIES).orElse(ImmutableList.of())) {
+      for(LivingEntity livingEntity3 : brain.getMemory(MemoryModuleType.LIVING_ENTITIES).orElse(ImmutableList.of())) { // MagmaCube - decompile error
          if (livingEntity3 instanceof AbstractPiglin && ((AbstractPiglin)livingEntity3).isAdult()) {
             list2.add((AbstractPiglin)livingEntity3);
          }
diff --git a/src/main/java/net/minecraft/world/entity/ai/sensing/VillagerHostilesSensor.java b/src/main/java/net/minecraft/world/entity/ai/sensing/VillagerHostilesSensor.java
index abe7d99d07ff5769e446279f1f587294d3e78712..ae24f0a219a61f9dc3287691f10fb674ede68786 100644
--- a/src/main/java/net/minecraft/world/entity/ai/sensing/VillagerHostilesSensor.java
+++ b/src/main/java/net/minecraft/world/entity/ai/sensing/VillagerHostilesSensor.java
@@ -12,7 +12,8 @@ import net.minecraft.world.entity.LivingEntity;
 import net.minecraft.world.entity.ai.memory.MemoryModuleType;
 
 public class VillagerHostilesSensor extends Sensor<LivingEntity> {
-   private static final ImmutableMap<EntityType<?>, Float> ACCEPTABLE_DISTANCE_FROM_HOSTILES = ImmutableMap.builder().put(EntityType.DROWNED, 8.0F).put(EntityType.EVOKER, 12.0F).put(EntityType.HUSK, 8.0F).put(EntityType.ILLUSIONER, 12.0F).put(EntityType.PILLAGER, 15.0F).put(EntityType.RAVAGER, 12.0F).put(EntityType.VEX, 8.0F).put(EntityType.VINDICATOR, 10.0F).put(EntityType.ZOGLIN, 10.0F).put(EntityType.ZOMBIE, 8.0F).put(EntityType.ZOMBIE_VILLAGER, 8.0F).build();
+   // MagmaCube - decompile error
+   private static final ImmutableMap<EntityType<?>, Float> ACCEPTABLE_DISTANCE_FROM_HOSTILES = (ImmutableMap) ImmutableMap.builder().put(EntityType.DROWNED, 8.0F).put(EntityType.EVOKER, 12.0F).put(EntityType.HUSK, 8.0F).put(EntityType.ILLUSIONER, 12.0F).put(EntityType.PILLAGER, 15.0F).put(EntityType.RAVAGER, 12.0F).put(EntityType.VEX, 8.0F).put(EntityType.VINDICATOR, 10.0F).put(EntityType.ZOGLIN, 10.0F).put(EntityType.ZOMBIE, 8.0F).put(EntityType.ZOMBIE_VILLAGER, 8.0F).build();
 
    public Set<MemoryModuleType<?>> requires() {
       return ImmutableSet.of(MemoryModuleType.NEAREST_HOSTILE);
diff --git a/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiManager.java b/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiManager.java
index 7d5ae86c13026c802410bfc9b03da8007bd360fd..5abc7381fbc2913f26d0fea76ad0b3e96c51b197 100644
--- a/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiManager.java
+++ b/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiManager.java
@@ -167,7 +167,7 @@ public class PoiManager extends SectionStorage<PoiSection> {
    }
 
    public void ensureLoadedAndValid(LevelReader levelReader, BlockPos blockPos, int i) {
-      SectionPos.aroundChunk(new ChunkPos(blockPos), Math.floorDiv(i, 16)).map((sectionPos) -> Pair.of(sectionPos, this.getOrLoad(sectionPos.asLong()))).filter((pair) -> !((Optional)pair.getSecond()).map(PoiSection::isValid).orElse(false)).map((pair) -> ((SectionPos)pair.getFirst()).chunk()).filter((chunkPos) -> this.loadedChunks.add(chunkPos.toLong())).forEach((chunkPos) -> levelReader.getChunk(chunkPos.x, chunkPos.z, ChunkStatus.EMPTY));
+      SectionPos.aroundChunk(new ChunkPos(blockPos), Math.floorDiv(i, 16)).map((sectionPos) -> Pair.of(sectionPos, this.getOrLoad(sectionPos.asLong()))).filter((pair) -> !(pair.getSecond()).map(PoiSection::isValid).orElse(false)).map((pair) -> ((SectionPos)pair.getFirst()).chunk()).filter((chunkPos) -> this.loadedChunks.add(chunkPos.toLong())).forEach((chunkPos) -> levelReader.getChunk(chunkPos.x, chunkPos.z, ChunkStatus.EMPTY)); // MagmaCube - decompile error
    }
 
    final class DistanceTracker extends SectionTracker {
diff --git a/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiSection.java b/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiSection.java
index 5556726001a8a2b26e76fdad64e6e55c75af116d..51fb3250b949a82ac8f713b01786eb75c9b77bbe 100644
--- a/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiSection.java
+++ b/src/main/java/net/minecraft/world/entity/ai/village/poi/PoiSection.java
@@ -30,7 +30,8 @@ public class PoiSection {
    private boolean isValid;
 
    public static Codec<PoiSection> codec(Runnable runnable) {
-      return RecordCodecBuilder.create((instance) -> instance.group(RecordCodecBuilder.point(runnable), Codec.BOOL.optionalFieldOf("Valid", false).forGetter((poiSection) -> poiSection.isValid), PoiRecord.codec(runnable).listOf().fieldOf("Records").forGetter((poiSection) -> ImmutableList.copyOf(poiSection.records.values()))).apply(instance, PoiSection::new)).orElseGet(Util.prefix("Failed to read POI section: ", LOGGER::error), () -> new PoiSection(runnable, false, ImmutableList.of()));
+      // MagmaCube - decompile error
+      return RecordCodecBuilder.<PoiSection>create((instance) -> instance.group(RecordCodecBuilder.point(runnable), Codec.BOOL.optionalFieldOf("Valid", false).forGetter((poiSection) -> poiSection.isValid), PoiRecord.codec(runnable).listOf().fieldOf("Records").forGetter((poiSection) -> ImmutableList.copyOf(poiSection.records.values()))).apply(instance, PoiSection::new)).orElseGet(Util.prefix("Failed to read POI section: ", LOGGER::error), () -> new PoiSection(runnable, false, ImmutableList.of()));
    }
 
    public PoiSection(Runnable runnable) {
@@ -111,7 +112,7 @@ public class PoiSection {
       if (!this.isValid) {
          Short2ObjectMap<PoiRecord> short2ObjectMap = new Short2ObjectOpenHashMap(this.records);
          this.clear();
-         consumer.accept((BiConsumer)(blockPos, poiType) -> {
+         consumer.accept((blockPos, poiType) -> { // MagmaCube - decompile error
             short s = SectionPos.sectionRelativePos(blockPos);
             PoiRecord poiRecord = (PoiRecord)short2ObjectMap.computeIfAbsent(s, (i) -> new PoiRecord(blockPos, poiType, this.setDirty));
             this.add(poiRecord);
diff --git a/src/main/java/net/minecraft/world/entity/animal/AbstractFish.java b/src/main/java/net/minecraft/world/entity/animal/AbstractFish.java
index ef87008953dc5b150dba91bf1ff8edced272c547..ddbfab07249ba0b704180114ad25f66f8fe9a7dc 100644
--- a/src/main/java/net/minecraft/world/entity/animal/AbstractFish.java
+++ b/src/main/java/net/minecraft/world/entity/animal/AbstractFish.java
@@ -96,7 +96,7 @@ public abstract class AbstractFish extends WaterAnimal {
    protected void registerGoals() {
       super.registerGoals();
       this.goalSelector.addGoal(0, new PanicGoal(this, 1.25D));
-      this.goalSelector.addGoal(2, new AvoidEntityGoal(this, Player.class, 8.0F, 1.6D, 1.4D, EntitySelector.NO_SPECTATORS::test));
+      this.goalSelector.addGoal(2, new AvoidEntityGoal<>(this, Player.class, 8.0F, 1.6D, 1.4D, EntitySelector.NO_SPECTATORS::test)); // MagmaCube - decompile error
       this.goalSelector.addGoal(4, new AbstractFish.FishSwimGoal(this));
    }
 
diff --git a/src/main/java/net/minecraft/world/entity/animal/Fox.java b/src/main/java/net/minecraft/world/entity/animal/Fox.java
index 2956f3f2228e33e03936fbf21a3932c0c1e77d89..288c4d4f4956b9bc78cb9f4e959173ecfc4b836a 100644
--- a/src/main/java/net/minecraft/world/entity/animal/Fox.java
+++ b/src/main/java/net/minecraft/world/entity/animal/Fox.java
@@ -133,9 +133,11 @@ public class Fox extends Animal {
       this.goalSelector.addGoal(1, new Fox.FaceplantGoal());
       this.goalSelector.addGoal(2, new Fox.FoxPanicGoal(2.2D));
       this.goalSelector.addGoal(3, new Fox.FoxBreedGoal(1.0D));
-      this.goalSelector.addGoal(4, new AvoidEntityGoal(this, Player.class, 16.0F, 1.6D, 1.4D, (livingEntity) -> AVOID_PLAYERS.test(livingEntity) && !this.trusts(livingEntity.getUUID()) && !this.isDefending()));
-      this.goalSelector.addGoal(4, new AvoidEntityGoal(this, Wolf.class, 8.0F, 1.6D, 1.4D, (livingEntity) -> !((Wolf)livingEntity).isTame() && !this.isDefending()));
-      this.goalSelector.addGoal(4, new AvoidEntityGoal(this, PolarBear.class, 8.0F, 1.6D, 1.4D, (livingEntity) -> !this.isDefending()));
+      // MagmaCube start - decompile error
+      this.goalSelector.addGoal(4, new AvoidEntityGoal<>(this, Player.class, 16.0F, 1.6D, 1.4D, (livingEntity) -> AVOID_PLAYERS.test(livingEntity) && !this.trusts(livingEntity.getUUID()) && !this.isDefending()));
+      this.goalSelector.addGoal(4, new AvoidEntityGoal<>(this, Wolf.class, 8.0F, 1.6D, 1.4D, (livingEntity) -> !((Wolf)livingEntity).isTame() && !this.isDefending()));
+      this.goalSelector.addGoal(4, new AvoidEntityGoal<>(this, PolarBear.class, 8.0F, 1.6D, 1.4D, (livingEntity) -> !this.isDefending()));
+      // MagmaCube end - decompile error
       this.goalSelector.addGoal(5, new Fox.StalkPreyGoal());
       this.goalSelector.addGoal(6, new Fox.FoxPounceGoal());
       this.goalSelector.addGoal(6, new Fox.SeekShelterGoal(1.25D));
@@ -312,8 +314,10 @@ public class Fox extends Animal {
 
    private List<UUID> getTrustedUUIDs() {
       List<UUID> list = Lists.newArrayList();
-      list.add(((Optional)this.entityData.get(DATA_TRUSTED_ID_0)).orElse(null));
-      list.add(((Optional)this.entityData.get(DATA_TRUSTED_ID_1)).orElse(null));
+      // MagmaCube start - decompile error
+      list.add((this.entityData.get(DATA_TRUSTED_ID_0)).orElse(null));
+      list.add((this.entityData.get(DATA_TRUSTED_ID_1)).orElse(null));
+      // MagmaCube end - decompile error
       return list;
    }
 
diff --git a/src/main/java/net/minecraft/world/entity/animal/IronGolem.java b/src/main/java/net/minecraft/world/entity/animal/IronGolem.java
index 68c23a41543442283707a60bd83c9f603f1776dc..33392497993e71a06291628011aa1d88127c807e 100644
--- a/src/main/java/net/minecraft/world/entity/animal/IronGolem.java
+++ b/src/main/java/net/minecraft/world/entity/animal/IronGolem.java
@@ -76,8 +76,8 @@ public class IronGolem extends AbstractGolem implements NeutralMob {
       this.goalSelector.addGoal(8, new RandomLookAroundGoal(this));
       this.targetSelector.addGoal(1, new DefendVillageTargetGoal(this));
       this.targetSelector.addGoal(2, new HurtByTargetGoal(this));
-      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, this::isAngryAt));
-      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal(this, Mob.class, 5, false, false, (livingEntity) -> livingEntity instanceof Enemy && !(livingEntity instanceof Creeper)));
+      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, this::isAngryAt)); // MagmaCube - decompile error
+      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, Mob.class, 5, false, false, (livingEntity) -> livingEntity instanceof Enemy && !(livingEntity instanceof Creeper))); // MagmaCube - decompile error
       this.targetSelector.addGoal(4, new ResetUniversalAngerTargetGoal<>(this, false));
    }
 
diff --git a/src/main/java/net/minecraft/world/entity/animal/PolarBear.java b/src/main/java/net/minecraft/world/entity/animal/PolarBear.java
index 7c3f894bb320fe0fcd0d1eb7e8b15b41a59379ca..9f390317d4cb587a32b3e005e6e706c9235e097a 100644
--- a/src/main/java/net/minecraft/world/entity/animal/PolarBear.java
+++ b/src/main/java/net/minecraft/world/entity/animal/PolarBear.java
@@ -84,8 +84,8 @@ public class PolarBear extends Animal implements NeutralMob {
       this.goalSelector.addGoal(7, new RandomLookAroundGoal(this));
       this.targetSelector.addGoal(1, new PolarBear.PolarBearHurtByTargetGoal());
       this.targetSelector.addGoal(2, new PolarBear.PolarBearAttackPlayersGoal());
-      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, this::isAngryAt));
-      this.targetSelector.addGoal(4, new NearestAttackableTargetGoal(this, Fox.class, 10, true, true, (Predicate<LivingEntity>)null));
+      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, this::isAngryAt)); // MagmaCube - decompile error
+      this.targetSelector.addGoal(4, new NearestAttackableTargetGoal<>(this, Fox.class, 10, true, true, (Predicate<LivingEntity>)null)); // MagmaCube - decompile error
       this.targetSelector.addGoal(5, new ResetUniversalAngerTargetGoal<>(this, false));
    }
 
diff --git a/src/main/java/net/minecraft/world/entity/animal/Wolf.java b/src/main/java/net/minecraft/world/entity/animal/Wolf.java
index 6f6c808eb37dfba9c914752ed4ef95f84a6253bc..462ac02c051779dd22f91d981b8ebb9637b19c40 100644
--- a/src/main/java/net/minecraft/world/entity/animal/Wolf.java
+++ b/src/main/java/net/minecraft/world/entity/animal/Wolf.java
@@ -99,10 +99,12 @@ public class Wolf extends TamableAnimal implements NeutralMob {
       this.targetSelector.addGoal(1, new OwnerHurtByTargetGoal(this));
       this.targetSelector.addGoal(2, new OwnerHurtTargetGoal(this));
       this.targetSelector.addGoal(3, (new HurtByTargetGoal(this)).setAlertOthers());
-      this.targetSelector.addGoal(4, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, this::isAngryAt));
-      this.targetSelector.addGoal(5, new NonTameRandomTargetGoal(this, Animal.class, false, PREY_SELECTOR));
-      this.targetSelector.addGoal(6, new NonTameRandomTargetGoal(this, Turtle.class, false, Turtle.BABY_ON_LAND_SELECTOR));
-      this.targetSelector.addGoal(7, new NearestAttackableTargetGoal(this, AbstractSkeleton.class, false));
+      // MagmaCube start - decompile error
+      this.targetSelector.addGoal(4, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, this::isAngryAt));
+      this.targetSelector.addGoal(5, new NonTameRandomTargetGoal<>(this, Animal.class, false, PREY_SELECTOR));
+      this.targetSelector.addGoal(6, new NonTameRandomTargetGoal<>(this, Turtle.class, false, Turtle.BABY_ON_LAND_SELECTOR));
+      this.targetSelector.addGoal(7, new NearestAttackableTargetGoal<>(this, AbstractSkeleton.class, false));
+      // MagmaCube end - decompile error
       this.targetSelector.addGoal(8, new ResetUniversalAngerTargetGoal<>(this, true));
    }
 
diff --git a/src/main/java/net/minecraft/world/entity/boss/wither/WitherBoss.java b/src/main/java/net/minecraft/world/entity/boss/wither/WitherBoss.java
index cb2d1b003fa7d72c242638100cd0b077895081b9..bcc0746ea2dc4d00141115b9d08fa827dd8ab330 100644
--- a/src/main/java/net/minecraft/world/entity/boss/wither/WitherBoss.java
+++ b/src/main/java/net/minecraft/world/entity/boss/wither/WitherBoss.java
@@ -485,11 +485,11 @@ public class WitherBoss extends Monster implements PowerableMob, RangedAttackMob
    }
 
    public int getAlternativeTarget(int i) {
-      return this.entityData.get((EntityDataAccessor)DATA_TARGETS.get(i));
+      return this.entityData.get(DATA_TARGETS.get(i)); // MagmaCube - decompile error
    }
 
    public void setAlternativeTarget(int i, int i2) {
-      this.entityData.set((EntityDataAccessor)DATA_TARGETS.get(i), i2);
+      this.entityData.set(DATA_TARGETS.get(i), i2); // MagmaCube - decompile error
    }
 
    public boolean isPowered() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/Drowned.java b/src/main/java/net/minecraft/world/entity/monster/Drowned.java
index 697035b12843fa2cceb20b576de44f6ca2601d37..3dd96012a1abb266b86861c9e70b50a6a4d34bc1 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Drowned.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Drowned.java
@@ -75,10 +75,12 @@ public class Drowned extends Zombie implements RangedAttackMob {
       this.goalSelector.addGoal(6, new Drowned.DrownedSwimUpGoal(this, 1.0D, this.level.getSeaLevel()));
       this.goalSelector.addGoal(7, new RandomStrollGoal(this, 1.0D));
       this.targetSelector.addGoal(1, (new HurtByTargetGoal(this, Drowned.class)).setAlertOthers(ZombifiedPiglin.class));
-      this.targetSelector.addGoal(2, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, this::okTarget));
-      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal(this, AbstractVillager.class, false));
-      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal(this, IronGolem.class, true));
-      this.targetSelector.addGoal(5, new NearestAttackableTargetGoal(this, Turtle.class, 10, true, false, Turtle.BABY_ON_LAND_SELECTOR));
+      // MagmaCube start - decompile error
+      this.targetSelector.addGoal(2, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, this::okTarget));
+      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, AbstractVillager.class, false));
+      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, IronGolem.class, true));
+      this.targetSelector.addGoal(5, new NearestAttackableTargetGoal<>(this, Turtle.class, 10, true, false, Turtle.BABY_ON_LAND_SELECTOR));
+      // MagmaCube end - decompile error
    }
 
    public SpawnGroupData finalizeSpawn(ServerLevelAccessor serverLevelAccessor, DifficultyInstance difficultyInstance, MobSpawnType mobSpawnType, @Nullable SpawnGroupData spawnGroupData, @Nullable CompoundTag compoundTag) {
diff --git a/src/main/java/net/minecraft/world/entity/monster/Ghast.java b/src/main/java/net/minecraft/world/entity/monster/Ghast.java
index 059cb828ce623dc5c35cc7a5d70aaefa642333e7..77d6ea3a85d4970ea6bc9faaebee550e9a5bd3f4 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Ghast.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Ghast.java
@@ -46,7 +46,7 @@ public class Ghast extends FlyingMob implements Enemy {
       this.goalSelector.addGoal(5, new Ghast.RandomFloatAroundGoal(this));
       this.goalSelector.addGoal(7, new Ghast.GhastLookGoal(this));
       this.goalSelector.addGoal(7, new Ghast.GhastShootFireballGoal(this));
-      this.targetSelector.addGoal(1, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, (livingEntity) -> Math.abs(livingEntity.getY() - this.getY()) <= 4.0D));
+      this.targetSelector.addGoal(1, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, (livingEntity) -> Math.abs(livingEntity.getY() - this.getY()) <= 4.0D)); // MagmaCube - decompile error
    }
 
    public boolean isCharging() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/Phantom.java b/src/main/java/net/minecraft/world/entity/monster/Phantom.java
index c9099d54ba75898960b085b614ccfb652cfd5796..04029116ce3dc8e6936326845b37e43e10700317 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Phantom.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Phantom.java
@@ -211,7 +211,7 @@ public class Phantom extends FlyingMob implements Enemy {
             this.nextScanTick = 60;
             List<Player> list = Phantom.this.level.getNearbyPlayers(this.attackTargeting, Phantom.this, Phantom.this.getBoundingBox().inflate(16.0D, 64.0D, 16.0D));
             if (!list.isEmpty()) {
-               list.sort(Comparator.comparing(Entity::getY).reversed());
+               list.sort(Comparator.<Entity, Double>comparing(Entity::getY).reversed()); // MagmaCube - decompile error
 
                for(Player player : list) {
                   if (Phantom.this.canAttack(player, TargetingConditions.DEFAULT)) {
diff --git a/src/main/java/net/minecraft/world/entity/monster/Slime.java b/src/main/java/net/minecraft/world/entity/monster/Slime.java
index 665e6cd649d3ba7695e65b1778c3906e836c52cf..39e70ae5c5bbae85bb810b6979f7aabc9355f01a 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Slime.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Slime.java
@@ -62,8 +62,8 @@ public class Slime extends Mob implements Enemy {
       this.goalSelector.addGoal(2, new Slime.SlimeAttackGoal(this));
       this.goalSelector.addGoal(3, new Slime.SlimeRandomDirectionGoal(this));
       this.goalSelector.addGoal(5, new Slime.SlimeKeepOnJumpingGoal(this));
-      this.targetSelector.addGoal(1, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, (livingEntity) -> Math.abs(livingEntity.getY() - this.getY()) <= 4.0D));
-      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal(this, IronGolem.class, true));
+      this.targetSelector.addGoal(1, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, (livingEntity) -> Math.abs(livingEntity.getY() - this.getY()) <= 4.0D)); // MagmaCube - decompile error
+      this.targetSelector.addGoal(3, new NearestAttackableTargetGoal<>(this, IronGolem.class, true)); // MagmaCube - decompile error
    }
 
    protected void defineSynchedData() {
@@ -173,7 +173,7 @@ public class Slime extends Mob implements Enemy {
    }
 
    public EntityType<? extends Slime> getType() {
-      return super.getType();
+      return (EntityType<? extends Slime>) super.getType(); // MagmaCube - decompile error
    }
 
    public void remove() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/Zoglin.java b/src/main/java/net/minecraft/world/entity/monster/Zoglin.java
index af927423fb435b2554b45d2c4462312b557d52c9..6de137268e4b5636ffe4e4046aa70bfb80650502 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Zoglin.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Zoglin.java
@@ -79,15 +79,15 @@ public class Zoglin extends Monster implements Enemy, HoglinBase {
    }
 
    private static void initIdleActivity(Brain<Zoglin> brain) {
-      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new StartAttacking(Zoglin::findNearestValidAttackTarget), new RunSometimes<>(new SetEntityLookTarget(8.0F), IntRange.of(30, 60)), new RunOne(ImmutableList.of(Pair.of(new RandomStroll(0.4F), 2), Pair.of(new SetWalkTargetFromLookTarget(0.4F, 3), 2), Pair.of(new DoNothing(30, 60), 1)))));
+      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new StartAttacking<>(Zoglin::findNearestValidAttackTarget), new RunSometimes<>(new SetEntityLookTarget(8.0F), IntRange.of(30, 60)), new RunOne<>(ImmutableList.of(Pair.of(new RandomStroll(0.4F), 2), Pair.of(new SetWalkTargetFromLookTarget(0.4F, 3), 2), Pair.of(new DoNothing(30, 60), 1))))); // MagmaCube - decompile error
    }
 
    private static void initFightActivity(Brain<Zoglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new RunIf<>(Zoglin::isAdult, new MeleeAttack(40)), new RunIf<>(Zoglin::isBaby, new MeleeAttack(15)), new StopAttackingIfTargetInvalid()), MemoryModuleType.ATTACK_TARGET);
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new RunIf<>(Zoglin::isAdult, new MeleeAttack(40)), new RunIf<>(Zoglin::isBaby, new MeleeAttack(15)), new StopAttackingIfTargetInvalid<>()), MemoryModuleType.ATTACK_TARGET); // MagmaCube - decompile error
    }
 
    private Optional<? extends LivingEntity> findNearestValidAttackTarget() {
-      return ((List)this.getBrain().getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(ImmutableList.of())).stream().filter(Zoglin::isTargetable).findFirst();
+      return (this.getBrain().getMemory(MemoryModuleType.VISIBLE_LIVING_ENTITIES).orElse(ImmutableList.of())).stream().filter(Zoglin::isTargetable).findFirst();
    }
 
    private static boolean isTargetable(LivingEntity livingEntity) {
@@ -164,7 +164,7 @@ public class Zoglin extends Monster implements Enemy, HoglinBase {
    }
 
    public Brain<Zoglin> getBrain() {
-      return super.getBrain();
+      return (Brain<Zoglin>) super.getBrain(); // MagmaCube - decompile error
    }
 
    protected void updateActivity() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/ZombifiedPiglin.java b/src/main/java/net/minecraft/world/entity/monster/ZombifiedPiglin.java
index a4c65d280412d4e21fdc57cee5a83fceacd18658..e4d8e403566d63438ae04f81dc5a859525c61f4b 100644
--- a/src/main/java/net/minecraft/world/entity/monster/ZombifiedPiglin.java
+++ b/src/main/java/net/minecraft/world/entity/monster/ZombifiedPiglin.java
@@ -65,7 +65,7 @@ public class ZombifiedPiglin extends Zombie implements NeutralMob {
       this.goalSelector.addGoal(2, new ZombieAttackGoal(this, 1.0D, false));
       this.goalSelector.addGoal(7, new WaterAvoidingRandomStrollGoal(this, 1.0D));
       this.targetSelector.addGoal(1, (new HurtByTargetGoal(this)).setAlertOthers());
-      this.targetSelector.addGoal(2, new NearestAttackableTargetGoal(this, Player.class, 10, true, false, this::isAngryAt));
+      this.targetSelector.addGoal(2, new NearestAttackableTargetGoal<>(this, Player.class, 10, true, false, this::isAngryAt)); // MagmaCube - decompile error
       this.targetSelector.addGoal(3, new ResetUniversalAngerTargetGoal<>(this, true));
    }
 
diff --git a/src/main/java/net/minecraft/world/entity/monster/hoglin/Hoglin.java b/src/main/java/net/minecraft/world/entity/monster/hoglin/Hoglin.java
index 41910d91f2683b807feb4b972ecd3d2bfd187dc1..2aaae2111d9a5399e2a4051e43c2e071728cbf3a 100644
--- a/src/main/java/net/minecraft/world/entity/monster/hoglin/Hoglin.java
+++ b/src/main/java/net/minecraft/world/entity/monster/hoglin/Hoglin.java
@@ -52,7 +52,8 @@ public class Hoglin extends Animal implements Enemy, HoglinBase {
    private int timeInOverworld = 0;
    private boolean cannotBeHunted = false;
    protected static final ImmutableList<? extends SensorType<? extends Sensor<? super Hoglin>>> SENSOR_TYPES = ImmutableList.of(SensorType.NEAREST_LIVING_ENTITIES, SensorType.NEAREST_PLAYERS, SensorType.NEAREST_ADULT, SensorType.HOGLIN_SPECIFIC_SENSOR);
-   protected static final ImmutableList<? extends MemoryModuleType<?>> MEMORY_TYPES = ImmutableList.of(MemoryModuleType.BREED_TARGET, MemoryModuleType.LIVING_ENTITIES, MemoryModuleType.VISIBLE_LIVING_ENTITIES, MemoryModuleType.NEAREST_VISIBLE_PLAYER, MemoryModuleType.NEAREST_VISIBLE_TARGETABLE_PLAYER, MemoryModuleType.LOOK_TARGET, MemoryModuleType.WALK_TARGET, MemoryModuleType.CANT_REACH_WALK_TARGET_SINCE, MemoryModuleType.PATH, MemoryModuleType.ATTACK_TARGET, MemoryModuleType.ATTACK_COOLING_DOWN, MemoryModuleType.NEAREST_VISIBLE_ADULT_PIGLIN, new MemoryModuleType[]{MemoryModuleType.AVOID_TARGET, MemoryModuleType.VISIBLE_ADULT_PIGLIN_COUNT, MemoryModuleType.VISIBLE_ADULT_HOGLIN_COUNT, MemoryModuleType.NEAREST_VISIBLE_ADULT_HOGLINS, MemoryModuleType.NEAREST_VISIBLE_ADULT, MemoryModuleType.NEAREST_REPELLENT, MemoryModuleType.PACIFIED});
+   // MagmaCube - decompile error
+   protected static final ImmutableList<? extends MemoryModuleType<?>> MEMORY_TYPES = (ImmutableList) ImmutableList.of(MemoryModuleType.BREED_TARGET, MemoryModuleType.LIVING_ENTITIES, MemoryModuleType.VISIBLE_LIVING_ENTITIES, MemoryModuleType.NEAREST_VISIBLE_PLAYER, MemoryModuleType.NEAREST_VISIBLE_TARGETABLE_PLAYER, MemoryModuleType.LOOK_TARGET, MemoryModuleType.WALK_TARGET, MemoryModuleType.CANT_REACH_WALK_TARGET_SINCE, MemoryModuleType.PATH, MemoryModuleType.ATTACK_TARGET, MemoryModuleType.ATTACK_COOLING_DOWN, MemoryModuleType.NEAREST_VISIBLE_ADULT_PIGLIN, new MemoryModuleType[]{MemoryModuleType.AVOID_TARGET, MemoryModuleType.VISIBLE_ADULT_PIGLIN_COUNT, MemoryModuleType.VISIBLE_ADULT_HOGLIN_COUNT, MemoryModuleType.NEAREST_VISIBLE_ADULT_HOGLINS, MemoryModuleType.NEAREST_VISIBLE_ADULT, MemoryModuleType.NEAREST_REPELLENT, MemoryModuleType.PACIFIED});
 
    public Hoglin(EntityType<? extends Hoglin> entityType, Level level) {
       super(entityType, level);
@@ -108,7 +109,7 @@ public class Hoglin extends Animal implements Enemy, HoglinBase {
    }
 
    public Brain<Hoglin> getBrain() {
-      return super.getBrain();
+      return (Brain<Hoglin>) super.getBrain(); // MagmaCube - decompile error
    }
 
    protected void customServerAiStep() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/hoglin/HoglinAi.java b/src/main/java/net/minecraft/world/entity/monster/hoglin/HoglinAi.java
index 520eab40d210fed741d310cf7bf35e5a80944845..9b9d9ed8d69d5252cd34fb0f442148a180c63fe2 100644
--- a/src/main/java/net/minecraft/world/entity/monster/hoglin/HoglinAi.java
+++ b/src/main/java/net/minecraft/world/entity/monster/hoglin/HoglinAi.java
@@ -57,15 +57,18 @@ public class HoglinAi {
    }
 
    private static void initIdleActivity(Brain<Hoglin> brain) {
-      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new BecomePassiveIfMemoryPresent(MemoryModuleType.NEAREST_REPELLENT, 200), new AnimalMakeLove(EntityType.HOGLIN, 0.6F), SetWalkTargetAwayFrom.pos(MemoryModuleType.NEAREST_REPELLENT, 1.0F, 8, true), new StartAttacking(HoglinAi::findNearestValidAttackTarget), new RunIf<>(Hoglin::isAdult, SetWalkTargetAwayFrom.entity(MemoryModuleType.NEAREST_VISIBLE_ADULT_PIGLIN, 0.4F, 8, false)), new RunSometimes<>(new SetEntityLookTarget(8.0F), IntRange.of(30, 60)), new BabyFollowAdult(ADULT_FOLLOW_RANGE, 0.6F), createIdleMovementBehaviors()));
+      // MagmaCube - decompile error
+      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new BecomePassiveIfMemoryPresent(MemoryModuleType.NEAREST_REPELLENT, 200), new AnimalMakeLove(EntityType.HOGLIN, 0.6F), SetWalkTargetAwayFrom.pos(MemoryModuleType.NEAREST_REPELLENT, 1.0F, 8, true), new StartAttacking<>(HoglinAi::findNearestValidAttackTarget), new RunIf<>(Hoglin::isAdult, SetWalkTargetAwayFrom.entity(MemoryModuleType.NEAREST_VISIBLE_ADULT_PIGLIN, 0.4F, 8, false)), new RunSometimes<>(new SetEntityLookTarget(8.0F), IntRange.of(30, 60)), new BabyFollowAdult<>(ADULT_FOLLOW_RANGE, 0.6F), createIdleMovementBehaviors()));
    }
 
    private static void initFightActivity(Brain<Hoglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new BecomePassiveIfMemoryPresent(MemoryModuleType.NEAREST_REPELLENT, 200), new AnimalMakeLove(EntityType.HOGLIN, 0.6F), new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new RunIf<>(Hoglin::isAdult, new MeleeAttack(40)), new RunIf<>(AgableMob::isBaby, new MeleeAttack(15)), new StopAttackingIfTargetInvalid(), new EraseMemoryIf(HoglinAi::isBreeding, MemoryModuleType.ATTACK_TARGET)), MemoryModuleType.ATTACK_TARGET);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new BecomePassiveIfMemoryPresent(MemoryModuleType.NEAREST_REPELLENT, 200), new AnimalMakeLove(EntityType.HOGLIN, 0.6F), new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new RunIf<>(Hoglin::isAdult, new MeleeAttack(40)), new RunIf<>(AgableMob::isBaby, new MeleeAttack(15)), new StopAttackingIfTargetInvalid<>(), new EraseMemoryIf<>(HoglinAi::isBreeding, MemoryModuleType.ATTACK_TARGET)), MemoryModuleType.ATTACK_TARGET);
    }
 
    private static void initRetreatActivity(Brain<Hoglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.AVOID, 10, ImmutableList.of(SetWalkTargetAwayFrom.entity(MemoryModuleType.AVOID_TARGET, 1.3F, 15, false), createIdleMovementBehaviors(), new RunSometimes<>(new SetEntityLookTarget(8.0F), IntRange.of(30, 60)), new EraseMemoryIf(HoglinAi::wantsToStopFleeing, MemoryModuleType.AVOID_TARGET)), MemoryModuleType.AVOID_TARGET);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.AVOID, 10, ImmutableList.of(SetWalkTargetAwayFrom.entity(MemoryModuleType.AVOID_TARGET, 1.3F, 15, false), createIdleMovementBehaviors(), new RunSometimes<>(new SetEntityLookTarget(8.0F), IntRange.of(30, 60)), new EraseMemoryIf<>(HoglinAi::wantsToStopFleeing, MemoryModuleType.AVOID_TARGET)), MemoryModuleType.AVOID_TARGET);
    }
 
    private static RunOne<Hoglin> createIdleMovementBehaviors() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java b/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java
index b35d1170d40300bfde5ec92c0faa7e9a31c6f4a2..472ae18c220d8ac8e1ae43406f3e25c68e321899 100644
--- a/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java
+++ b/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java
@@ -174,7 +174,7 @@ public class Piglin extends AbstractPiglin implements CrossbowAttackMob {
    }
 
    public Brain<Piglin> getBrain() {
-      return super.getBrain();
+      return (Brain<Piglin>) super.getBrain(); // MagmaCube - decompile error
    }
 
    public InteractionResult mobInteract(Player player, InteractionHand interactionHand) {
diff --git a/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinAi.java b/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinAi.java
index ff346550dcc4c7758d7a6a11402b58a19bcc4c80..169442af6e4a2fc5aa2c328f94960e709f108e67 100644
--- a/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinAi.java
+++ b/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinAi.java
@@ -100,31 +100,38 @@ public class PiglinAi {
    }
 
    private static void initCoreActivity(Brain<Piglin> brain) {
-      brain.addActivity(Activity.CORE, 0, ImmutableList.of(new LookAtTargetSink(45, 90), new MoveToTargetSink(), new InteractWithDoor(), babyAvoidNemesis(), avoidZombified(), new StopHoldingItemIfNoLongerAdmiring(), new StartAdmiringItemIfSeen(120), new StartCelebratingIfTargetDead(300, PiglinAi::wantsToDance), new StopBeingAngryIfTargetDead()));
+      // MagmaCube - decompile error
+      brain.addActivity(Activity.CORE, 0, ImmutableList.of(new LookAtTargetSink(45, 90), new MoveToTargetSink(), new InteractWithDoor(), babyAvoidNemesis(), avoidZombified(), new StopHoldingItemIfNoLongerAdmiring<>(), new StartAdmiringItemIfSeen<>(120), new StartCelebratingIfTargetDead(300, PiglinAi::wantsToDance), new StopBeingAngryIfTargetDead<>()));
    }
 
    private static void initIdleActivity(Brain<Piglin> brain) {
-      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new SetEntityLookTarget(PiglinAi::isPlayerHoldingLovedItem, 14.0F), new StartAttacking(AbstractPiglin::isAdult, PiglinAi::findNearestValidAttackTarget), new RunIf(Piglin::canHunt, new StartHuntingHoglin()), avoidRepellent(), babySometimesRideBabyHoglin(), createIdleLookBehaviors(), createIdleMovementBehaviors(), new SetLookAndInteract(EntityType.PLAYER, 4)));
+      // MagmaCube - decompile error
+      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new SetEntityLookTarget(PiglinAi::isPlayerHoldingLovedItem, 14.0F), new StartAttacking<>(AbstractPiglin::isAdult, PiglinAi::findNearestValidAttackTarget), new RunIf<>(Piglin::canHunt, new StartHuntingHoglin<>()), avoidRepellent(), babySometimesRideBabyHoglin(), createIdleLookBehaviors(), createIdleMovementBehaviors(), new SetLookAndInteract(EntityType.PLAYER, 4)));
    }
 
    private static void initFightActivity(Piglin piglin, Brain<Piglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new StopAttackingIfTargetInvalid((livingEntity) -> !isNearestValidAttackTarget(piglin, livingEntity)), new RunIf(PiglinAi::hasCrossbow, new BackUpIfTooClose(5, 0.75F)), new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new MeleeAttack(20), new CrossbowAttack(), new RememberIfHoglinWasKilled(), new EraseMemoryIf(PiglinAi::isNearZombified, MemoryModuleType.ATTACK_TARGET)), MemoryModuleType.ATTACK_TARGET);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new StopAttackingIfTargetInvalid<>((livingEntity) -> !isNearestValidAttackTarget(piglin, livingEntity)), new RunIf<>(PiglinAi::hasCrossbow, new BackUpIfTooClose<>(5, 0.75F)), new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new MeleeAttack(20), new CrossbowAttack<>(), new RememberIfHoglinWasKilled<>(), new EraseMemoryIf<>(PiglinAi::isNearZombified, MemoryModuleType.ATTACK_TARGET)), MemoryModuleType.ATTACK_TARGET);
    }
 
    private static void initCelebrateActivity(Brain<Piglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.CELEBRATE, 10, ImmutableList.of(avoidRepellent(), new SetEntityLookTarget(PiglinAi::isPlayerHoldingLovedItem, 14.0F), new StartAttacking(AbstractPiglin::isAdult, PiglinAi::findNearestValidAttackTarget), new RunIf((piglin) -> !piglin.isDancing(), new GoToCelebrateLocation(2, 1.0F)), new RunIf(Piglin::isDancing, new GoToCelebrateLocation(4, 0.6F)), new RunOne(ImmutableList.of(Pair.of(new SetEntityLookTarget(EntityType.PIGLIN, 8.0F), 1), Pair.of(new RandomStroll(0.6F, 2, 1), 1), Pair.of(new DoNothing(10, 20), 1)))), MemoryModuleType.CELEBRATE_LOCATION);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.CELEBRATE, 10, ImmutableList.of(avoidRepellent(), new SetEntityLookTarget(PiglinAi::isPlayerHoldingLovedItem, 14.0F), new StartAttacking<>(AbstractPiglin::isAdult, PiglinAi::findNearestValidAttackTarget), new RunIf<>((piglin) -> !piglin.isDancing(), new GoToCelebrateLocation<>(2, 1.0F)), new RunIf<>(Piglin::isDancing, new GoToCelebrateLocation<>(4, 0.6F)), new RunOne<>(ImmutableList.of(Pair.of(new SetEntityLookTarget(EntityType.PIGLIN, 8.0F), 1), Pair.of(new RandomStroll(0.6F, 2, 1), 1), Pair.of(new DoNothing(10, 20), 1)))), MemoryModuleType.CELEBRATE_LOCATION);
    }
 
    private static void initAdmireItemActivity(Brain<Piglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.ADMIRE_ITEM, 10, ImmutableList.of(new GoToWantedItem(PiglinAi::isNotHoldingLovedItemInOffHand, 1.0F, true, 9), new StopAdmiringIfItemTooFarAway(9), new StopAdmiringIfTiredOfTryingToReachItem(200, 200)), MemoryModuleType.ADMIRING_ITEM);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.ADMIRE_ITEM, 10, ImmutableList.of(new GoToWantedItem<>(PiglinAi::isNotHoldingLovedItemInOffHand, 1.0F, true, 9), new StopAdmiringIfItemTooFarAway<>(9), new StopAdmiringIfTiredOfTryingToReachItem<>(200, 200)), MemoryModuleType.ADMIRING_ITEM);
    }
 
    private static void initRetreatActivity(Brain<Piglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.AVOID, 10, ImmutableList.of(SetWalkTargetAwayFrom.entity(MemoryModuleType.AVOID_TARGET, 1.0F, 12, true), createIdleLookBehaviors(), createIdleMovementBehaviors(), new EraseMemoryIf(PiglinAi::wantsToStopFleeing, MemoryModuleType.AVOID_TARGET)), MemoryModuleType.AVOID_TARGET);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.AVOID, 10, ImmutableList.of(SetWalkTargetAwayFrom.entity(MemoryModuleType.AVOID_TARGET, 1.0F, 12, true), createIdleLookBehaviors(), createIdleMovementBehaviors(), new EraseMemoryIf<>(PiglinAi::wantsToStopFleeing, MemoryModuleType.AVOID_TARGET)), MemoryModuleType.AVOID_TARGET);
    }
 
    private static void initRideHoglinActivity(Brain<Piglin> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.RIDE, 10, ImmutableList.of(new Mount(0.8F), new SetEntityLookTarget(PiglinAi::isPlayerHoldingLovedItem, 8.0F), new RunIf<>(Entity::isPassenger, createIdleLookBehaviors()), new DismountOrSkipMounting(8, PiglinAi::wantsToStopRiding)), MemoryModuleType.RIDE_TARGET);
+      // MagmaCube - decompile error
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.RIDE, 10, ImmutableList.of(new Mount<>(0.8F), new SetEntityLookTarget(PiglinAi::isPlayerHoldingLovedItem, 8.0F), new RunIf<>(Entity::isPassenger, createIdleLookBehaviors()), new DismountOrSkipMounting<>(8, PiglinAi::wantsToStopRiding)), MemoryModuleType.RIDE_TARGET);
    }
 
    private static RunOne<Piglin> createIdleLookBehaviors() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBrute.java b/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBrute.java
index e83a9d7522184e33a590e3b515a6fd2e9f8d5bbf..7538219393e0cb30a18a7bc5a57f25df1636109a 100644
--- a/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBrute.java
+++ b/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBrute.java
@@ -61,7 +61,7 @@ public class PiglinBrute extends AbstractPiglin {
    }
 
    public Brain<PiglinBrute> getBrain() {
-      return super.getBrain();
+      return (Brain<PiglinBrute>) super.getBrain(); // MagmaCube - decompile error
    }
 
    public boolean canHunt() {
diff --git a/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBruteAi.java b/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBruteAi.java
index 02430fab659d2ba801635f74daa65c5a4c560149..26ce38e8051befd745d86c45daa52b083ee6fc69 100644
--- a/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBruteAi.java
+++ b/src/main/java/net/minecraft/world/entity/monster/piglin/PiglinBruteAi.java
@@ -46,15 +46,15 @@ public class PiglinBruteAi {
    }
 
    private static void initCoreActivity(PiglinBrute piglinBrute, Brain<PiglinBrute> brain) {
-      brain.addActivity(Activity.CORE, 0, ImmutableList.of(new LookAtTargetSink(45, 90), new MoveToTargetSink(), new InteractWithDoor(), new StopBeingAngryIfTargetDead()));
+      brain.addActivity(Activity.CORE, 0, ImmutableList.of(new LookAtTargetSink(45, 90), new MoveToTargetSink(), new InteractWithDoor(), new StopBeingAngryIfTargetDead<>())); // MagmaCube - decompile error
    }
 
    private static void initIdleActivity(PiglinBrute piglinBrute, Brain<PiglinBrute> brain) {
-      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new StartAttacking(PiglinBruteAi::findNearestValidAttackTarget), createIdleLookBehaviors(), createIdleMovementBehaviors(), new SetLookAndInteract(EntityType.PLAYER, 4)));
+      brain.addActivity(Activity.IDLE, 10, ImmutableList.of(new StartAttacking<>(PiglinBruteAi::findNearestValidAttackTarget), createIdleLookBehaviors(), createIdleMovementBehaviors(), new SetLookAndInteract(EntityType.PLAYER, 4))); // MagmaCube - decompile error
    }
 
    private static void initFightActivity(PiglinBrute piglinBrute, Brain<PiglinBrute> brain) {
-      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new StopAttackingIfTargetInvalid((livingEntity) -> !isNearestValidAttackTarget(piglinBrute, livingEntity)), new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new MeleeAttack(20)), MemoryModuleType.ATTACK_TARGET);
+      brain.addActivityAndRemoveMemoryWhenStopped(Activity.FIGHT, 10, ImmutableList.of(new StopAttackingIfTargetInvalid<>((livingEntity) -> !isNearestValidAttackTarget(piglinBrute, livingEntity)), new SetWalkTargetFromAttackTargetIfTargetOutOfReach(1.0F), new MeleeAttack(20)), MemoryModuleType.ATTACK_TARGET); // MagmaCube - decompile error
    }
 
    private static RunOne<PiglinBrute> createIdleLookBehaviors() {
diff --git a/src/main/java/net/minecraft/world/entity/npc/Villager.java b/src/main/java/net/minecraft/world/entity/npc/Villager.java
index aa858e3dfbbd0ab19a702cf97589afeccece96a0..591c7fe628e065ec51ff12502cd96adecd4e718e 100644
--- a/src/main/java/net/minecraft/world/entity/npc/Villager.java
+++ b/src/main/java/net/minecraft/world/entity/npc/Villager.java
@@ -103,7 +103,7 @@ public class Villager extends AbstractVillager implements ReputationEventHandler
    private boolean assignProfessionWhenSpawned;
    private static final ImmutableList<MemoryModuleType<?>> MEMORY_TYPES = ImmutableList.of(MemoryModuleType.HOME, MemoryModuleType.JOB_SITE, MemoryModuleType.POTENTIAL_JOB_SITE, MemoryModuleType.MEETING_POINT, MemoryModuleType.LIVING_ENTITIES, MemoryModuleType.VISIBLE_LIVING_ENTITIES, MemoryModuleType.VISIBLE_VILLAGER_BABIES, MemoryModuleType.NEAREST_PLAYERS, MemoryModuleType.NEAREST_VISIBLE_PLAYER, MemoryModuleType.NEAREST_VISIBLE_TARGETABLE_PLAYER, MemoryModuleType.NEAREST_VISIBLE_WANTED_ITEM, MemoryModuleType.WALK_TARGET, new MemoryModuleType[]{MemoryModuleType.LOOK_TARGET, MemoryModuleType.INTERACTION_TARGET, MemoryModuleType.BREED_TARGET, MemoryModuleType.PATH, MemoryModuleType.DOORS_TO_CLOSE, MemoryModuleType.NEAREST_BED, MemoryModuleType.HURT_BY, MemoryModuleType.HURT_BY_ENTITY, MemoryModuleType.NEAREST_HOSTILE, MemoryModuleType.SECONDARY_JOB_SITE, MemoryModuleType.HIDING_PLACE, MemoryModuleType.HEARD_BELL_TIME, MemoryModuleType.CANT_REACH_WALK_TARGET_SINCE, MemoryModuleType.LAST_SLEPT, MemoryModuleType.LAST_WOKEN, MemoryModuleType.LAST_WORKED_AT_POI, MemoryModuleType.GOLEM_DETECTED_RECENTLY});
    private static final ImmutableList<SensorType<? extends Sensor<? super Villager>>> SENSOR_TYPES = ImmutableList.of(SensorType.NEAREST_LIVING_ENTITIES, SensorType.NEAREST_PLAYERS, SensorType.NEAREST_ITEMS, SensorType.NEAREST_BED, SensorType.HURT_BY, SensorType.VILLAGER_HOSTILES, SensorType.VILLAGER_BABIES, SensorType.SECONDARY_POIS, SensorType.GOLEM_DETECTED);
-   public static final Map<MemoryModuleType<GlobalPos>, BiPredicate<Villager, PoiType>> POI_MEMORIES = ImmutableMap.of(MemoryModuleType.HOME, (BiPredicate)(villager, poiType) -> poiType == PoiType.HOME, MemoryModuleType.JOB_SITE, (BiPredicate)(villager, poiType) -> villager.getVillagerData().getProfession().getJobPoiType() == poiType, MemoryModuleType.POTENTIAL_JOB_SITE, (BiPredicate)(villager, poiType) -> PoiType.ALL_JOBS.test(poiType), MemoryModuleType.MEETING_POINT, (BiPredicate)(villager, poiType) -> poiType == PoiType.MEETING);
+   public static final Map<MemoryModuleType<GlobalPos>, BiPredicate<Villager, PoiType>> POI_MEMORIES = ImmutableMap.of(MemoryModuleType.HOME, (villager, poiType) -> poiType == PoiType.HOME, MemoryModuleType.JOB_SITE, (villager, poiType) -> villager.getVillagerData().getProfession().getJobPoiType() == poiType, MemoryModuleType.POTENTIAL_JOB_SITE, (villager, poiType) -> PoiType.ALL_JOBS.test(poiType), MemoryModuleType.MEETING_POINT, (villager, poiType) -> poiType == PoiType.MEETING); // MagmaCube - decompile error
 
    public Villager(EntityType<? extends Villager> entityType, Level level) {
       this(entityType, level, VillagerType.PLAINS);
@@ -118,7 +118,7 @@ public class Villager extends AbstractVillager implements ReputationEventHandler
    }
 
    public Brain<Villager> getBrain() {
-      return super.getBrain();
+      return (Brain<Villager>) super.getBrain(); // MagmaCube - decompile error
    }
 
    protected Brain.Provider<Villager> brainProvider() {
diff --git a/src/main/java/net/minecraft/world/entity/npc/VillagerTrades.java b/src/main/java/net/minecraft/world/entity/npc/VillagerTrades.java
index bd40d74e5a3e128d9214c8f892f2596c826c966a..a0318fc1a9fd766cd680cfef6b00da652148dc57 100644
--- a/src/main/java/net/minecraft/world/entity/npc/VillagerTrades.java
+++ b/src/main/java/net/minecraft/world/entity/npc/VillagerTrades.java
@@ -47,10 +47,12 @@ import net.minecraft.world.level.saveddata.maps.MapItemSavedData;
 public class VillagerTrades {
    public static final Map<VillagerProfession, Int2ObjectMap<VillagerTrades.ItemListing[]>> TRADES = Util.make(Maps.newHashMap(), (hashMap) -> {
       hashMap.put(VillagerProfession.FARMER, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.WHEAT, 20, 16, 2), new VillagerTrades.EmeraldForItems(Items.POTATO, 26, 16, 2), new VillagerTrades.EmeraldForItems(Items.CARROT, 22, 16, 2), new VillagerTrades.EmeraldForItems(Items.BEETROOT, 15, 16, 2), new VillagerTrades.ItemsForEmeralds(Items.BREAD, 1, 6, 16, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Blocks.PUMPKIN, 6, 12, 10), new VillagerTrades.ItemsForEmeralds(Items.PUMPKIN_PIE, 1, 4, 5), new VillagerTrades.ItemsForEmeralds(Items.APPLE, 1, 4, 16, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.COOKIE, 3, 18, 10), new VillagerTrades.EmeraldForItems(Blocks.MELON, 4, 12, 20)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Blocks.CAKE, 1, 1, 12, 15), new VillagerTrades.SuspisciousStewForEmerald(MobEffects.NIGHT_VISION, 100, 15), new VillagerTrades.SuspisciousStewForEmerald(MobEffects.JUMP, 160, 15), new VillagerTrades.SuspisciousStewForEmerald(MobEffects.WEAKNESS, 140, 15), new VillagerTrades.SuspisciousStewForEmerald(MobEffects.BLINDNESS, 120, 15), new VillagerTrades.SuspisciousStewForEmerald(MobEffects.POISON, 280, 15), new VillagerTrades.SuspisciousStewForEmerald(MobEffects.SATURATION, 7, 15)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.GOLDEN_CARROT, 3, 3, 30), new VillagerTrades.ItemsForEmeralds(Items.GLISTERING_MELON_SLICE, 4, 3, 30)})));
-      hashMap.put(VillagerProfession.FISHERMAN, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.STRING, 20, 16, 2), new VillagerTrades.EmeraldForItems(Items.COAL, 10, 16, 2), new VillagerTrades.ItemsAndEmeraldsToItems(Items.COD, 6, Items.COOKED_COD, 6, 16, 1), new VillagerTrades.ItemsForEmeralds(Items.COD_BUCKET, 3, 1, 16, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.COD, 15, 16, 10), new VillagerTrades.ItemsAndEmeraldsToItems(Items.SALMON, 6, Items.COOKED_SALMON, 6, 16, 5), new VillagerTrades.ItemsForEmeralds(Items.CAMPFIRE, 2, 1, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.SALMON, 13, 16, 20), new VillagerTrades.EnchantedItemForEmeralds(Items.FISHING_ROD, 3, 3, 10, 0.2F)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.TROPICAL_FISH, 6, 12, 30)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.PUFFERFISH, 4, 12, 30), new VillagerTrades.EmeraldsForVillagerTypeItem(1, 12, 30, ImmutableMap.builder().put(VillagerType.PLAINS, Items.OAK_BOAT).put(VillagerType.TAIGA, Items.SPRUCE_BOAT).put(VillagerType.SNOW, Items.SPRUCE_BOAT).put(VillagerType.DESERT, Items.JUNGLE_BOAT).put(VillagerType.JUNGLE, Items.JUNGLE_BOAT).put(VillagerType.SAVANNA, Items.ACACIA_BOAT).put(VillagerType.SWAMP, Items.DARK_OAK_BOAT).build())})));
+      // MagmaCube - decompile error
+      hashMap.put(VillagerProfession.FISHERMAN, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.STRING, 20, 16, 2), new VillagerTrades.EmeraldForItems(Items.COAL, 10, 16, 2), new VillagerTrades.ItemsAndEmeraldsToItems(Items.COD, 6, Items.COOKED_COD, 6, 16, 1), new VillagerTrades.ItemsForEmeralds(Items.COD_BUCKET, 3, 1, 16, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.COD, 15, 16, 10), new VillagerTrades.ItemsAndEmeraldsToItems(Items.SALMON, 6, Items.COOKED_SALMON, 6, 16, 5), new VillagerTrades.ItemsForEmeralds(Items.CAMPFIRE, 2, 1, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.SALMON, 13, 16, 20), new VillagerTrades.EnchantedItemForEmeralds(Items.FISHING_ROD, 3, 3, 10, 0.2F)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.TROPICAL_FISH, 6, 12, 30)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.PUFFERFISH, 4, 12, 30), new VillagerTrades.EmeraldsForVillagerTypeItem(1, 12, 30, (Map) ImmutableMap.builder().put(VillagerType.PLAINS, Items.OAK_BOAT).put(VillagerType.TAIGA, Items.SPRUCE_BOAT).put(VillagerType.SNOW, Items.SPRUCE_BOAT).put(VillagerType.DESERT, Items.JUNGLE_BOAT).put(VillagerType.JUNGLE, Items.JUNGLE_BOAT).put(VillagerType.SAVANNA, Items.ACACIA_BOAT).put(VillagerType.SWAMP, Items.DARK_OAK_BOAT).build())})));
       hashMap.put(VillagerProfession.SHEPHERD, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Blocks.WHITE_WOOL, 18, 16, 2), new VillagerTrades.EmeraldForItems(Blocks.BROWN_WOOL, 18, 16, 2), new VillagerTrades.EmeraldForItems(Blocks.BLACK_WOOL, 18, 16, 2), new VillagerTrades.EmeraldForItems(Blocks.GRAY_WOOL, 18, 16, 2), new VillagerTrades.ItemsForEmeralds(Items.SHEARS, 2, 1, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.WHITE_DYE, 12, 16, 10), new VillagerTrades.EmeraldForItems(Items.GRAY_DYE, 12, 16, 10), new VillagerTrades.EmeraldForItems(Items.BLACK_DYE, 12, 16, 10), new VillagerTrades.EmeraldForItems(Items.LIGHT_BLUE_DYE, 12, 16, 10), new VillagerTrades.EmeraldForItems(Items.LIME_DYE, 12, 16, 10), new VillagerTrades.ItemsForEmeralds(Blocks.WHITE_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.ORANGE_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.MAGENTA_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.LIGHT_BLUE_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.YELLOW_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.LIME_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.PINK_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.GRAY_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.LIGHT_GRAY_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.CYAN_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.PURPLE_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.BLUE_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.BROWN_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.GREEN_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.RED_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.BLACK_WOOL, 1, 1, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.WHITE_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.ORANGE_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.MAGENTA_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.LIGHT_BLUE_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.YELLOW_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.LIME_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.PINK_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.GRAY_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.LIGHT_GRAY_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.CYAN_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.PURPLE_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.BLUE_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.BROWN_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.GREEN_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.RED_CARPET, 1, 4, 16, 5), new VillagerTrades.ItemsForEmeralds(Blocks.BLACK_CARPET, 1, 4, 16, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.YELLOW_DYE, 12, 16, 20), new VillagerTrades.EmeraldForItems(Items.LIGHT_GRAY_DYE, 12, 16, 20), new VillagerTrades.EmeraldForItems(Items.ORANGE_DYE, 12, 16, 20), new VillagerTrades.EmeraldForItems(Items.RED_DYE, 12, 16, 20), new VillagerTrades.EmeraldForItems(Items.PINK_DYE, 12, 16, 20), new VillagerTrades.ItemsForEmeralds(Blocks.WHITE_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.YELLOW_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.RED_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.BLACK_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.BLUE_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.BROWN_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.CYAN_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.GRAY_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.GREEN_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.LIGHT_BLUE_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.LIGHT_GRAY_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.LIME_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.MAGENTA_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.ORANGE_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.PINK_BED, 3, 1, 12, 10), new VillagerTrades.ItemsForEmeralds(Blocks.PURPLE_BED, 3, 1, 12, 10)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.BROWN_DYE, 12, 16, 30), new VillagerTrades.EmeraldForItems(Items.PURPLE_DYE, 12, 16, 30), new VillagerTrades.EmeraldForItems(Items.BLUE_DYE, 12, 16, 30), new VillagerTrades.EmeraldForItems(Items.GREEN_DYE, 12, 16, 30), new VillagerTrades.EmeraldForItems(Items.MAGENTA_DYE, 12, 16, 30), new VillagerTrades.EmeraldForItems(Items.CYAN_DYE, 12, 16, 30), new VillagerTrades.ItemsForEmeralds(Items.WHITE_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.BLUE_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.LIGHT_BLUE_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.RED_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.PINK_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.GREEN_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.LIME_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.GRAY_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.BLACK_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.PURPLE_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.MAGENTA_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.CYAN_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.BROWN_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.YELLOW_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.ORANGE_BANNER, 3, 1, 12, 15), new VillagerTrades.ItemsForEmeralds(Items.LIGHT_GRAY_BANNER, 3, 1, 12, 15)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.PAINTING, 2, 3, 30)})));
       hashMap.put(VillagerProfession.FLETCHER, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.STICK, 32, 16, 2), new VillagerTrades.ItemsForEmeralds(Items.ARROW, 1, 16, 1), new VillagerTrades.ItemsAndEmeraldsToItems(Blocks.GRAVEL, 10, Items.FLINT, 10, 12, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.FLINT, 26, 12, 10), new VillagerTrades.ItemsForEmeralds(Items.BOW, 2, 1, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.STRING, 14, 16, 20), new VillagerTrades.ItemsForEmeralds(Items.CROSSBOW, 3, 1, 10)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.FEATHER, 24, 16, 30), new VillagerTrades.EnchantedItemForEmeralds(Items.BOW, 2, 3, 15)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.TRIPWIRE_HOOK, 8, 12, 30), new VillagerTrades.EnchantedItemForEmeralds(Items.CROSSBOW, 3, 3, 15), new VillagerTrades.TippedArrowForItemsAndEmeralds(Items.ARROW, 5, Items.TIPPED_ARROW, 5, 2, 12, 30)})));
-      hashMap.put(VillagerProfession.LIBRARIAN, toIntMap(ImmutableMap.builder().put(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.PAPER, 24, 16, 2), new VillagerTrades.EnchantBookForEmeralds(1), new VillagerTrades.ItemsForEmeralds(Blocks.BOOKSHELF, 9, 1, 12, 1)}).put(2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.BOOK, 4, 12, 10), new VillagerTrades.EnchantBookForEmeralds(5), new VillagerTrades.ItemsForEmeralds(Items.LANTERN, 1, 1, 5)}).put(3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.INK_SAC, 5, 12, 20), new VillagerTrades.EnchantBookForEmeralds(10), new VillagerTrades.ItemsForEmeralds(Items.GLASS, 1, 4, 10)}).put(4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.WRITABLE_BOOK, 2, 12, 30), new VillagerTrades.EnchantBookForEmeralds(15), new VillagerTrades.ItemsForEmeralds(Items.CLOCK, 5, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.COMPASS, 4, 1, 15)}).put(5, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.NAME_TAG, 20, 1, 30)}).build()));
+      // MagmaCube - decompile error
+      hashMap.put(VillagerProfession.LIBRARIAN, toIntMap((ImmutableMap) ImmutableMap.builder().put(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.PAPER, 24, 16, 2), new VillagerTrades.EnchantBookForEmeralds(1), new VillagerTrades.ItemsForEmeralds(Blocks.BOOKSHELF, 9, 1, 12, 1)}).put(2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.BOOK, 4, 12, 10), new VillagerTrades.EnchantBookForEmeralds(5), new VillagerTrades.ItemsForEmeralds(Items.LANTERN, 1, 1, 5)}).put(3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.INK_SAC, 5, 12, 20), new VillagerTrades.EnchantBookForEmeralds(10), new VillagerTrades.ItemsForEmeralds(Items.GLASS, 1, 4, 10)}).put(4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.WRITABLE_BOOK, 2, 12, 30), new VillagerTrades.EnchantBookForEmeralds(15), new VillagerTrades.ItemsForEmeralds(Items.CLOCK, 5, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.COMPASS, 4, 1, 15)}).put(5, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.NAME_TAG, 20, 1, 30)}).build()));
       hashMap.put(VillagerProfession.CARTOGRAPHER, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.PAPER, 24, 16, 2), new VillagerTrades.ItemsForEmeralds(Items.MAP, 7, 1, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.GLASS_PANE, 11, 16, 10), new VillagerTrades.TreasureMapForEmeralds(13, StructureFeature.OCEAN_MONUMENT, MapDecoration.Type.MONUMENT, 12, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.COMPASS, 1, 12, 20), new VillagerTrades.TreasureMapForEmeralds(14, StructureFeature.WOODLAND_MANSION, MapDecoration.Type.MANSION, 12, 10)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.ITEM_FRAME, 7, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.WHITE_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.BLUE_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.LIGHT_BLUE_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.RED_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.PINK_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.GREEN_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.LIME_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.GRAY_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.BLACK_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.PURPLE_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.MAGENTA_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.CYAN_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.BROWN_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.YELLOW_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.ORANGE_BANNER, 3, 1, 15), new VillagerTrades.ItemsForEmeralds(Items.LIGHT_GRAY_BANNER, 3, 1, 15)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.ItemsForEmeralds(Items.GLOBE_BANNER_PATTER, 8, 1, 30)})));
       hashMap.put(VillagerProfession.CLERIC, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.ROTTEN_FLESH, 32, 16, 2), new VillagerTrades.ItemsForEmeralds(Items.REDSTONE, 1, 2, 1)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.GOLD_INGOT, 3, 12, 10), new VillagerTrades.ItemsForEmeralds(Items.LAPIS_LAZULI, 1, 1, 5)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.RABBIT_FOOT, 2, 12, 20), new VillagerTrades.ItemsForEmeralds(Blocks.GLOWSTONE, 4, 1, 12, 10)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.SCUTE, 4, 12, 30), new VillagerTrades.EmeraldForItems(Items.GLASS_BOTTLE, 9, 12, 30), new VillagerTrades.ItemsForEmeralds(Items.ENDER_PEARL, 5, 1, 15)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.NETHER_WART, 22, 12, 30), new VillagerTrades.ItemsForEmeralds(Items.EXPERIENCE_BOTTLE, 3, 1, 30)})));
       hashMap.put(VillagerProfession.ARMORER, toIntMap(ImmutableMap.of(1, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.COAL, 15, 16, 2), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.IRON_LEGGINGS), 7, 1, 12, 1, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.IRON_BOOTS), 4, 1, 12, 1, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.IRON_HELMET), 5, 1, 12, 1, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.IRON_CHESTPLATE), 9, 1, 12, 1, 0.2F)}, 2, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.IRON_INGOT, 4, 12, 10), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.BELL), 36, 1, 12, 5, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.CHAINMAIL_BOOTS), 1, 1, 12, 5, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.CHAINMAIL_LEGGINGS), 3, 1, 12, 5, 0.2F)}, 3, new VillagerTrades.ItemListing[]{new VillagerTrades.EmeraldForItems(Items.LAVA_BUCKET, 1, 12, 20), new VillagerTrades.EmeraldForItems(Items.DIAMOND, 1, 12, 20), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.CHAINMAIL_HELMET), 1, 1, 12, 10, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.CHAINMAIL_CHESTPLATE), 4, 1, 12, 10, 0.2F), new VillagerTrades.ItemsForEmeralds(new ItemStack(Items.SHIELD), 5, 1, 12, 10, 0.2F)}, 4, new VillagerTrades.ItemListing[]{new VillagerTrades.EnchantedItemForEmeralds(Items.DIAMOND_LEGGINGS, 14, 3, 15, 0.2F), new VillagerTrades.EnchantedItemForEmeralds(Items.DIAMOND_BOOTS, 8, 3, 15, 0.2F)}, 5, new VillagerTrades.ItemListing[]{new VillagerTrades.EnchantedItemForEmeralds(Items.DIAMOND_HELMET, 8, 3, 30, 0.2F), new VillagerTrades.EnchantedItemForEmeralds(Items.DIAMOND_CHESTPLATE, 16, 3, 30, 0.2F)})));
diff --git a/src/main/java/net/minecraft/world/entity/player/Player.java b/src/main/java/net/minecraft/world/entity/player/Player.java
index 2c825b0cf60d3c26d84b0fa7fe007fed4f7369fe..561be2f60cd70f26272009f48549e9110d213e0f 100644
--- a/src/main/java/net/minecraft/world/entity/player/Player.java
+++ b/src/main/java/net/minecraft/world/entity/player/Player.java
@@ -110,7 +110,8 @@ import net.minecraft.world.scores.Team;
 
 public abstract class Player extends LivingEntity {
    public static final EntityDimensions STANDING_DIMENSIONS = EntityDimensions.scalable(0.6F, 1.8F);
-   private static final Map<Pose, EntityDimensions> POSES = ImmutableMap.builder().put(Pose.STANDING, STANDING_DIMENSIONS).put(Pose.SLEEPING, SLEEPING_DIMENSIONS).put(Pose.FALL_FLYING, EntityDimensions.scalable(0.6F, 0.6F)).put(Pose.SWIMMING, EntityDimensions.scalable(0.6F, 0.6F)).put(Pose.SPIN_ATTACK, EntityDimensions.scalable(0.6F, 0.6F)).put(Pose.CROUCHING, EntityDimensions.scalable(0.6F, 1.5F)).put(Pose.DYING, EntityDimensions.fixed(0.2F, 0.2F)).build();
+   // MagmaCube - decompile error
+   private static final Map<Pose, EntityDimensions> POSES = (Map) ImmutableMap.builder().put(Pose.STANDING, STANDING_DIMENSIONS).put(Pose.SLEEPING, SLEEPING_DIMENSIONS).put(Pose.FALL_FLYING, EntityDimensions.scalable(0.6F, 0.6F)).put(Pose.SWIMMING, EntityDimensions.scalable(0.6F, 0.6F)).put(Pose.SPIN_ATTACK, EntityDimensions.scalable(0.6F, 0.6F)).put(Pose.CROUCHING, EntityDimensions.scalable(0.6F, 1.5F)).put(Pose.DYING, EntityDimensions.fixed(0.2F, 0.2F)).build();
    private static final EntityDataAccessor<Float> DATA_PLAYER_ABSORPTION_ID = SynchedEntityData.defineId(Player.class, EntityDataSerializers.FLOAT);
    private static final EntityDataAccessor<Integer> DATA_SCORE_ID = SynchedEntityData.defineId(Player.class, EntityDataSerializers.INT);
    protected static final EntityDataAccessor<Byte> DATA_PLAYER_MODE_CUSTOMISATION = SynchedEntityData.defineId(Player.class, EntityDataSerializers.BYTE);
diff --git a/src/main/java/net/minecraft/world/entity/schedule/ScheduleBuilder.java b/src/main/java/net/minecraft/world/entity/schedule/ScheduleBuilder.java
index 8ef2825c57e01b5d82fb1833ddc72aa8d7b5f128..57e9a9eb815dbdb6a462e357f3af7315b3384de0 100644
--- a/src/main/java/net/minecraft/world/entity/schedule/ScheduleBuilder.java
+++ b/src/main/java/net/minecraft/world/entity/schedule/ScheduleBuilder.java
@@ -19,7 +19,8 @@ public class ScheduleBuilder {
    }
 
    public Schedule build() {
-      ((Set)this.transitions.stream().map(ScheduleBuilder.ActivityTransition::getActivity).collect(Collectors.toSet())).forEach(this.schedule::ensureTimelineExistsFor);
+      // MagmaCube - decompile error
+      (this.transitions.stream().map(ScheduleBuilder.ActivityTransition::getActivity).collect(Collectors.toSet())).forEach(this.schedule::ensureTimelineExistsFor);
       this.transitions.forEach((activityTransition) -> {
          Activity activity = activityTransition.getActivity();
          this.schedule.getAllTimelinesExceptFor(activity).forEach((timeline) -> timeline.addKeyframe(activityTransition.getTime(), 0.0F));
diff --git a/src/main/java/net/minecraft/world/entity/vehicle/AbstractMinecart.java b/src/main/java/net/minecraft/world/entity/vehicle/AbstractMinecart.java
index 77846aa276c20ae1b1cd72fa65e3b79e732cdb01..c632c7f7c087b2390caf9b579bb68960d2680cb4 100644
--- a/src/main/java/net/minecraft/world/entity/vehicle/AbstractMinecart.java
+++ b/src/main/java/net/minecraft/world/entity/vehicle/AbstractMinecart.java
@@ -161,7 +161,7 @@ public abstract class AbstractMinecart extends Entity {
             UnmodifiableIterator d3 = ((ImmutableList)POSE_DISMOUNT_HEIGHTS.get(pose)).iterator();
 
             while(d3.hasNext()) {
-               int i2 = d3.next();
+               int i2 = (int) d3.next(); // MagmaCube - decompile error
 
                for(int[] ints : i) {
                   mutableBlockPos.set(blockPos.getX() + ints[0], blockPos.getY() + i2, blockPos.getZ() + ints[1]);
@@ -178,16 +178,16 @@ public abstract class AbstractMinecart extends Entity {
             }
          }
 
-         double d2 = this.getBoundingBox().maxY;
-         mutableBlockPos.set((double)blockPos.getX(), d2, (double)blockPos.getZ());
+         double d2x = this.getBoundingBox().maxY; // MagmaCube - decompile error
+         mutableBlockPos.set((double)blockPos.getX(), d2x, (double)blockPos.getZ()); // MagmaCube - decompile error
          UnmodifiableIterator var22 = immutableList.iterator();
 
          while(var22.hasNext()) {
             Pose pose2 = (Pose)var22.next();
             double d3 = (double)livingEntity.getDimensions(pose2).height;
-            int i3 = Mth.ceil(d2 - (double)mutableBlockPos.getY() + d3);
+            int i3 = Mth.ceil(d2x - (double)mutableBlockPos.getY() + d3); // MagmaCube - decompile error
             double d4 = DismountHelper.findCeilingFrom(mutableBlockPos, i3, (blockPosx) -> this.level.getBlockState(blockPosx).getCollisionShape(this.level, blockPosx));
-            if (d2 + d3 <= d4) {
+            if (d2x + d3 <= d4) { // MagmaCube - decompile error
                livingEntity.setPose(pose2);
                break;
             }
diff --git a/src/main/java/net/minecraft/world/inventory/AbstractFurnaceMenu.java b/src/main/java/net/minecraft/world/inventory/AbstractFurnaceMenu.java
index bc90196a2fc242cb718103935308fda2dce3a1ec..757912b195e88fd2ada292fba460a960fe75ee57 100644
--- a/src/main/java/net/minecraft/world/inventory/AbstractFurnaceMenu.java
+++ b/src/main/java/net/minecraft/world/inventory/AbstractFurnaceMenu.java
@@ -63,7 +63,7 @@ public abstract class AbstractFurnaceMenu extends RecipeBookMenu<Container> {
    }
 
    public void handlePlacement(boolean flag, Recipe<?> recipe, ServerPlayer serverPlayer) {
-      (new ServerPlaceSmeltingRecipe<>(this)).recipeClicked(serverPlayer, recipe, flag);
+      (new ServerPlaceSmeltingRecipe<>(this)).recipeClicked(serverPlayer, (Recipe) recipe, flag); // MagmaCube - decompile error
    }
 
    public boolean recipeMatches(Recipe<? super Container> recipe) {
diff --git a/src/main/java/net/minecraft/world/inventory/RecipeBookMenu.java b/src/main/java/net/minecraft/world/inventory/RecipeBookMenu.java
index 8589a9311e6ae2612e4788603949622dbbceb609..72e6efdfefe49b00cee02fa29a62a7660b6cd762 100644
--- a/src/main/java/net/minecraft/world/inventory/RecipeBookMenu.java
+++ b/src/main/java/net/minecraft/world/inventory/RecipeBookMenu.java
@@ -12,7 +12,7 @@ public abstract class RecipeBookMenu<C extends Container> extends AbstractContai
    }
 
    public void handlePlacement(boolean flag, Recipe<?> recipe, ServerPlayer serverPlayer) {
-      (new ServerPlaceRecipe<>(this)).recipeClicked(serverPlayer, recipe, flag);
+      (new ServerPlaceRecipe<>(this)).recipeClicked(serverPlayer, (Recipe) recipe, flag); // MagmaCube - decompile error
    }
 
    public abstract void fillCraftSlotsStackedContents(StackedContents var1);
diff --git a/src/main/java/net/minecraft/world/item/crafting/RecipeManager.java b/src/main/java/net/minecraft/world/item/crafting/RecipeManager.java
index 063fff5d96e670b0b9845392ca99c03508e8df75..fd8c4d1db390f21a48f02a6b313be919c2036151 100644
--- a/src/main/java/net/minecraft/world/item/crafting/RecipeManager.java
+++ b/src/main/java/net/minecraft/world/item/crafting/RecipeManager.java
@@ -94,7 +94,7 @@ public class RecipeManager extends SimpleJsonResourceReloadListener {
    }
 
    public Optional<? extends Recipe<?>> byKey(ResourceLocation resourceLocation) {
-      return this.recipes.values().stream().map((map) -> (Recipe)map.get(resourceLocation)).filter(Objects::nonNull).findFirst();
+      return this.recipes.values().stream().map((map) -> map.get(resourceLocation)).filter(Objects::nonNull).findFirst(); // MagmaCube - decompile error
    }
 
    public Collection<Recipe<?>> getRecipes() {
diff --git a/src/main/java/net/minecraft/world/item/crafting/RecipeSerializer.java b/src/main/java/net/minecraft/world/item/crafting/RecipeSerializer.java
index 76653cdd329591cd44def092a9d3ff7419cb1bbf..0ab2e7a35d693fb1873755f9be3ec585fa1490a7 100644
--- a/src/main/java/net/minecraft/world/item/crafting/RecipeSerializer.java
+++ b/src/main/java/net/minecraft/world/item/crafting/RecipeSerializer.java
@@ -33,6 +33,7 @@ public interface RecipeSerializer<T extends Recipe<?>> {
    T fromNetwork(ResourceLocation var1, FriendlyByteBuf var2);
 
    void toNetwork(FriendlyByteBuf var1, T var2);
+   default void toNetwork(FriendlyByteBuf var1, Object var2) { toNetwork(var1, (T) var2); } // MagmaCube - workaround
 
    static <S extends RecipeSerializer<T>, T extends Recipe<?>> S register(String s, S recipeSerializer) {
       return Registry.register(Registry.RECIPE_SERIALIZER, s, recipeSerializer);
diff --git a/src/main/java/net/minecraft/world/item/crafting/RecipeType.java b/src/main/java/net/minecraft/world/item/crafting/RecipeType.java
index d7353426afc438c2b03f51722afdeae656674e80..ac6fe829980f49b25f1752c3b85f2bcd8eed798c 100644
--- a/src/main/java/net/minecraft/world/item/crafting/RecipeType.java
+++ b/src/main/java/net/minecraft/world/item/crafting/RecipeType.java
@@ -24,6 +24,6 @@ public interface RecipeType<T extends Recipe<?>> {
    }
 
    default <C extends Container> Optional<T> tryMatch(Recipe<C> recipe, Level level, C container) {
-      return recipe.matches(container, level) ? Optional.of(recipe) : Optional.empty();
+      return recipe.matches(container, level) ? Optional.of((T) recipe) : Optional.empty(); // MagmaCube - decompile error
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/world/item/crafting/RepairItemRecipe.java b/src/main/java/net/minecraft/world/item/crafting/RepairItemRecipe.java
index b31237b4c32e0579d1289b80e9df05a22ee218d5..ef667db0b742c12b752c93ebbce622a93d5f4708 100644
--- a/src/main/java/net/minecraft/world/item/crafting/RepairItemRecipe.java
+++ b/src/main/java/net/minecraft/world/item/crafting/RepairItemRecipe.java
@@ -72,7 +72,12 @@ public class RepairItemRecipe extends CustomRecipe {
             Map<Enchantment, Integer> map2 = EnchantmentHelper.getEnchantments(itemStack3);
             Map<Enchantment, Integer> map3 = EnchantmentHelper.getEnchantments(itemStack4);
             Registry.ENCHANTMENT.stream().filter(Enchantment::isCurse).forEach((enchantment) -> {
-               // $FF: Couldn't be decompiled
+               // MagmaCube start - decompile error
+               int j1 = Math.max(map2.getOrDefault(enchantment, 0), map3.getOrDefault(enchantment, 0));
+               if (j1 > 0) {
+                  map.put(enchantment, j1);
+               }
+               // MagmaCube end - decompile error
             });
             if (!map.isEmpty()) {
                EnchantmentHelper.setEnchantments(map, itemStack5);
diff --git a/src/main/java/net/minecraft/world/level/EmptyTickList.java b/src/main/java/net/minecraft/world/level/EmptyTickList.java
index 8215c8f4c2c0191e44eb65dce7d263a9601817f8..091ff192658f3f5b64afc1fe25b04579a1fee8c1 100644
--- a/src/main/java/net/minecraft/world/level/EmptyTickList.java
+++ b/src/main/java/net/minecraft/world/level/EmptyTickList.java
@@ -6,7 +6,7 @@ public class EmptyTickList<T> implements TickList<T> {
    private static final EmptyTickList<Object> INSTANCE = new EmptyTickList<>();
 
    public static <T> EmptyTickList<T> empty() {
-      return INSTANCE;
+      return (EmptyTickList<T>) INSTANCE; // MagmaCube - decompile error
    }
 
    public boolean hasScheduledTick(BlockPos blockPos, T object) {
diff --git a/src/main/java/net/minecraft/world/level/GameRules.java b/src/main/java/net/minecraft/world/level/GameRules.java
index bd88818394f199ae9adcb175e2212f0acf645743..f07b9b4bfb7eec17f1f1f17341934b0eea972f2f 100644
--- a/src/main/java/net/minecraft/world/level/GameRules.java
+++ b/src/main/java/net/minecraft/world/level/GameRules.java
@@ -121,8 +121,8 @@ public class GameRules {
    }
 
    private static <T extends GameRules.Value<T>> void callVisitorCap(GameRules.GameRuleTypeVisitor gameRuleTypeVisitor, GameRules.Key<?> key, GameRules.Type<?> type) {
-      gameRuleTypeVisitor.visit(key, type);
-      type.callVisitor(gameRuleTypeVisitor, key);
+      gameRuleTypeVisitor.visit((Key) key, type); // MagmaCube - decompile error
+      type.callVisitor(gameRuleTypeVisitor, (Key) key); // MagmaCube - decompile error
    }
 
    public void assignFrom(GameRules gameRules, @Nullable MinecraftServer minecraftServer) {
diff --git a/src/main/java/net/minecraft/world/level/NaturalSpawner.java b/src/main/java/net/minecraft/world/level/NaturalSpawner.java
index 86a1f0c601abd35108606d7c150a1717a59929b1..91148c1d7115776a9b57344451a68b38381cc93f 100644
--- a/src/main/java/net/minecraft/world/level/NaturalSpawner.java
+++ b/src/main/java/net/minecraft/world/level/NaturalSpawner.java
@@ -73,10 +73,11 @@ public final class NaturalSpawner {
          if (mobCategory != MobCategory.MISC) {
             BlockPos blockPos = entity.blockPosition();
             long l = ChunkPos.asLong(blockPos.getX() >> 4, blockPos.getZ() >> 4);
+            Entity finalEntity = entity; // MagmaCube - decompile error
             chunkGetter.query(l, (levelChunk) -> {
-               MobSpawnSettings.MobSpawnCost mobSpawnCost = getRoughBiome(blockPos, levelChunk).getMobSettings().getMobSpawnCost(entity.getType());
+               MobSpawnSettings.MobSpawnCost mobSpawnCost = getRoughBiome(blockPos, levelChunk).getMobSettings().getMobSpawnCost(finalEntity.getType()); // MagmaCube - decompile error
                if (mobSpawnCost != null) {
-                  potentialCalculator.addCharge(entity.blockPosition(), mobSpawnCost.getCharge());
+                  potentialCalculator.addCharge(finalEntity.blockPosition(), mobSpawnCost.getCharge()); // MagmaCube - decompile error
                }
 
                object2IntOpenHashMap.addTo(mobCategory, 1);
diff --git a/src/main/java/net/minecraft/world/level/TickNextTickData.java b/src/main/java/net/minecraft/world/level/TickNextTickData.java
index 57b18a1ed61d9764059ff7c0d6c0cca4f46cae6d..b7d91584c75fbdcdd11dd3d3a021d59826484c69 100644
--- a/src/main/java/net/minecraft/world/level/TickNextTickData.java
+++ b/src/main/java/net/minecraft/world/level/TickNextTickData.java
@@ -37,7 +37,8 @@ public class TickNextTickData<T> {
    }
 
    public static <T> Comparator<TickNextTickData<T>> createTimeComparator() {
-      return Comparator.comparingLong((tickNextTickData) -> tickNextTickData.triggerTick).thenComparing((tickNextTickData) -> tickNextTickData.priority).thenComparingLong((tickNextTickData) -> tickNextTickData.c);
+      // MagmaCube - decompile error
+      return Comparator.<TickNextTickData<T>>comparingLong((tickNextTickData) -> tickNextTickData.triggerTick).thenComparing((tickNextTickData) -> tickNextTickData.priority).thenComparingLong((tickNextTickData) -> tickNextTickData.c);
    }
 
    public String toString() {
diff --git a/src/main/java/net/minecraft/world/level/biome/Biome.java b/src/main/java/net/minecraft/world/level/biome/Biome.java
index e1a811c7396081ea1039ac7526a34439192a29be..5921e4feb50350f224cf0afc4567e6507028284d 100644
--- a/src/main/java/net/minecraft/world/level/biome/Biome.java
+++ b/src/main/java/net/minecraft/world/level/biome/Biome.java
@@ -54,7 +54,8 @@ import org.apache.logging.log4j.Logger;
 
 public final class Biome {
    public static final Logger LOGGER = LogManager.getLogger();
-   public static final Codec<Biome> DIRECT_CODEC;
+   // MagmaCube - moved to here from static block
+   public static final Codec<Biome> DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(Biome.ClimateSettings.CODEC.forGetter((biome) -> biome.climateSettings), Biome.BiomeCategory.CODEC.fieldOf("category").forGetter((biome) -> biome.biomeCategory), Codec.FLOAT.fieldOf("depth").forGetter((biome) -> biome.depth), Codec.FLOAT.fieldOf("scale").forGetter((biome) -> biome.scale), BiomeSpecialEffects.CODEC.fieldOf("effects").forGetter((biome) -> biome.specialEffects), BiomeGenerationSettings.CODEC.forGetter((biome) -> biome.generationSettings), MobSpawnSettings.CODEC.forGetter((biome) -> biome.mobSettings)).apply(instance, Biome::new));
    public static final Codec<Biome> NETWORK_CODEC;
    public static final Codec<Supplier<Biome>> CODEC = RegistryFileCodec.create(Registry.BIOME_REGISTRY, DIRECT_CODEC);
    public static final Codec<List<Supplier<Biome>>> LIST_CODEC = RegistryFileCodec.homogeneousList(Registry.BIOME_REGISTRY, DIRECT_CODEC);
@@ -184,7 +185,7 @@ public final class Biome {
       for(int i2 = 0; i2 < i; ++i2) {
          int i3 = 0;
          if (structureFeatureManager.shouldGenerateFeatures()) {
-            for(StructureFeature<?> structureFeature : (List)this.structuresByStep.getOrDefault(i2, Collections.emptyList())) {
+            for(StructureFeature<?> structureFeature : this.structuresByStep.getOrDefault(i2, Collections.emptyList())) { // MagmaCube - decompile error
                worldgenRandom.setFeatureSeed(l, i3, i2);
                int i4 = blockPos.getX() >> 4;
                int i5 = blockPos.getZ() >> 4;
@@ -204,7 +205,7 @@ public final class Biome {
          }
 
          if (list.size() > i2) {
-            for(Supplier<ConfiguredFeature<?, ?>> supplier : (List)list.get(i2)) {
+            for(Supplier<ConfiguredFeature<?, ?>> supplier : list.get(i2)) { // MagmaCube - decompile error
                ConfiguredFeature<?, ?> configuredFeature = (ConfiguredFeature)supplier.get();
                worldgenRandom.setFeatureSeed(l, i3, i2);
 
@@ -312,7 +313,6 @@ public final class Biome {
    }
 
    static {
-      DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(Biome.ClimateSettings.CODEC.forGetter((biome) -> biome.climateSettings), Biome.BiomeCategory.CODEC.fieldOf("category").forGetter((biome) -> biome.biomeCategory), Codec.FLOAT.fieldOf("depth").forGetter((biome) -> biome.depth), Codec.FLOAT.fieldOf("scale").forGetter((biome) -> biome.scale), BiomeSpecialEffects.CODEC.fieldOf("effects").forGetter((biome) -> biome.specialEffects), BiomeGenerationSettings.CODEC.forGetter((biome) -> biome.generationSettings), MobSpawnSettings.CODEC.forGetter((biome) -> biome.mobSettings)).apply(instance, Biome::new));
       NETWORK_CODEC = RecordCodecBuilder.create((instance) -> instance.group(Biome.ClimateSettings.CODEC.forGetter((biome) -> biome.climateSettings), Biome.BiomeCategory.CODEC.fieldOf("category").forGetter((biome) -> biome.biomeCategory), Codec.FLOAT.fieldOf("depth").forGetter((biome) -> biome.depth), Codec.FLOAT.fieldOf("scale").forGetter((biome) -> biome.scale), BiomeSpecialEffects.CODEC.fieldOf("effects").forGetter((biome) -> biome.specialEffects)).apply(instance, (climateSettings, biomeCategory, f, f2, biomeSpecialEffects) -> new Biome(climateSettings, biomeCategory, f, f2, biomeSpecialEffects, BiomeGenerationSettings.EMPTY, MobSpawnSettings.EMPTY)));
    }
 
diff --git a/src/main/java/net/minecraft/world/level/biome/MultiNoiseBiomeSource.java b/src/main/java/net/minecraft/world/level/biome/MultiNoiseBiomeSource.java
index 5a97059ce97f1e22f8d135299b7513a9a83e7f73..e3818995c41441cea0a3a33d8427d37742b3ae6f 100644
--- a/src/main/java/net/minecraft/world/level/biome/MultiNoiseBiomeSource.java
+++ b/src/main/java/net/minecraft/world/level/biome/MultiNoiseBiomeSource.java
@@ -26,7 +26,8 @@ import net.minecraft.world.level.levelgen.synth.NormalNoise;
 
 public class MultiNoiseBiomeSource extends BiomeSource {
    private static final MultiNoiseBiomeSource.NoiseParameters DEFAULT_NOISE_PARAMETERS = new MultiNoiseBiomeSource.NoiseParameters(-7, ImmutableList.of(1.0D, 1.0D));
-   public static final MapCodec<MultiNoiseBiomeSource> DIRECT_CODEC;
+   // MagmaCube - decompile error
+   public static final MapCodec<MultiNoiseBiomeSource> DIRECT_CODEC = RecordCodecBuilder.mapCodec((instance) -> instance.group(Codec.LONG.fieldOf("seed").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.seed), RecordCodecBuilder.<Pair<Biome.ClimateParameters, Supplier<Biome>>>create((instancex) -> instancex.group(Biome.ClimateParameters.CODEC.fieldOf("parameters").forGetter(Pair::getFirst), Biome.CODEC.fieldOf("biome").forGetter(Pair::getSecond)).apply(instancex, Pair::of)).listOf().fieldOf("biomes").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.parameters), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("temperature_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.temperatureParams), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("humidity_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.humidityParams), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("altitude_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.altitudeParams), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("weirdness_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.weirdnessParams)).apply(instance, MultiNoiseBiomeSource::new));
    public static final Codec<MultiNoiseBiomeSource> CODEC = Codec.mapEither(MultiNoiseBiomeSource.PresetInstance.CODEC, DIRECT_CODEC).xmap((either) -> (MultiNoiseBiomeSource)either.map(MultiNoiseBiomeSource.PresetInstance::biomeSource, Function.identity()), (multiNoiseBiomeSource) -> (Either)multiNoiseBiomeSource.preset().map(Either::left).orElseGet(() -> Either.right(multiNoiseBiomeSource))).codec();
    private final MultiNoiseBiomeSource.NoiseParameters temperatureParams;
    private final MultiNoiseBiomeSource.NoiseParameters humidityParams;
@@ -88,7 +89,6 @@ public class MultiNoiseBiomeSource extends BiomeSource {
    }
 
    static {
-      DIRECT_CODEC = RecordCodecBuilder.mapCodec((instance) -> instance.group(Codec.LONG.fieldOf("seed").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.seed), RecordCodecBuilder.create((instancex) -> instancex.group(Biome.ClimateParameters.CODEC.fieldOf("parameters").forGetter(Pair::getFirst), Biome.CODEC.fieldOf("biome").forGetter(Pair::getSecond)).apply(instancex, Pair::of)).listOf().fieldOf("biomes").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.parameters), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("temperature_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.temperatureParams), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("humidity_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.humidityParams), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("altitude_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.altitudeParams), MultiNoiseBiomeSource.NoiseParameters.CODEC.fieldOf("weirdness_noise").forGetter((multiNoiseBiomeSource) -> multiNoiseBiomeSource.weirdnessParams)).apply(instance, MultiNoiseBiomeSource::new));
    }
 
    static class NoiseParameters {
@@ -128,7 +128,8 @@ public class MultiNoiseBiomeSource extends BiomeSource {
    }
 
    static final class PresetInstance {
-      public static final MapCodec<MultiNoiseBiomeSource.PresetInstance> CODEC = RecordCodecBuilder.mapCodec((instance) -> instance.group(ResourceLocation.CODEC.flatXmap((resourceLocation) -> (DataResult)Optional.ofNullable(MultiNoiseBiomeSource.Preset.BY_NAME.get(resourceLocation)).map(DataResult::success).orElseGet(() -> DataResult.error("Unknown preset: " + resourceLocation)), (preset) -> DataResult.success(preset.name)).fieldOf("preset").stable().forGetter(MultiNoiseBiomeSource.PresetInstance::preset), RegistryLookupCodec.create(Registry.BIOME_REGISTRY).forGetter(MultiNoiseBiomeSource.PresetInstance::biomes), Codec.LONG.fieldOf("seed").stable().forGetter(MultiNoiseBiomeSource.PresetInstance::seed)).apply(instance, instance.stable(MultiNoiseBiomeSource.PresetInstance::new)));
+      // MagmaCube - decompile error
+      public static final MapCodec<MultiNoiseBiomeSource.PresetInstance> CODEC = RecordCodecBuilder.mapCodec((instance) -> instance.group(ResourceLocation.CODEC.flatXmap((resourceLocation) -> Optional.ofNullable(MultiNoiseBiomeSource.Preset.BY_NAME.get(resourceLocation)).map(DataResult::success).orElseGet(() -> DataResult.error("Unknown preset: " + resourceLocation)), (preset) -> DataResult.success(preset.name)).fieldOf("preset").stable().forGetter(MultiNoiseBiomeSource.PresetInstance::preset), RegistryLookupCodec.create(Registry.BIOME_REGISTRY).forGetter(MultiNoiseBiomeSource.PresetInstance::biomes), Codec.LONG.fieldOf("seed").stable().forGetter(MultiNoiseBiomeSource.PresetInstance::seed)).apply(instance, instance.stable(MultiNoiseBiomeSource.PresetInstance::new)));
       private final MultiNoiseBiomeSource.Preset preset;
       private final Registry<Biome> biomes;
       private final long seed;
diff --git a/src/main/java/net/minecraft/world/level/block/IronBarsBlock.java b/src/main/java/net/minecraft/world/level/block/IronBarsBlock.java
index f2b61aca9f882fb7e8b4e521d0b52a574eb9f210..ac9e3bfd94232968994a82396e2a9ad5bb92ef7a 100644
--- a/src/main/java/net/minecraft/world/level/block/IronBarsBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/IronBarsBlock.java
@@ -55,7 +55,7 @@ public class IronBarsBlock extends CrossCollisionBlock {
             return true;
          }
 
-         if (blockState.getValue((Property)PROPERTY_BY_DIRECTION.get(direction)) && blockState2.getValue((Property)PROPERTY_BY_DIRECTION.get(direction.getOpposite()))) {
+         if (blockState.getValue(PROPERTY_BY_DIRECTION.get(direction)) && blockState2.getValue(PROPERTY_BY_DIRECTION.get(direction.getOpposite()))) { // MagmaCube - decompile error
             return true;
          }
       }
diff --git a/src/main/java/net/minecraft/world/level/block/PipeBlock.java b/src/main/java/net/minecraft/world/level/block/PipeBlock.java
index 45fc9cfda80739e8c201f6458a9fbacc48de0532..e4a3f22c866cb2c35859b0091fbd91eda3408f01 100644
--- a/src/main/java/net/minecraft/world/level/block/PipeBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/PipeBlock.java
@@ -78,7 +78,7 @@ public class PipeBlock extends Block {
       int i = 0;
 
       for(int i2 = 0; i2 < DIRECTIONS.length; ++i2) {
-         if (blockState.getValue((Property)PROPERTY_BY_DIRECTION.get(DIRECTIONS[i2]))) {
+         if (blockState.getValue(PROPERTY_BY_DIRECTION.get(DIRECTIONS[i2]))) { // MagmaCube - decompile error
             i |= 1 << i2;
          }
       }
diff --git a/src/main/java/net/minecraft/world/level/block/RedStoneWireBlock.java b/src/main/java/net/minecraft/world/level/block/RedStoneWireBlock.java
index 1eb27fcecb6d1d333a2c350d1cd110afe3d6d57b..94513996777c924c70eabc98f7ad6197718e09df 100644
--- a/src/main/java/net/minecraft/world/level/block/RedStoneWireBlock.java
+++ b/src/main/java/net/minecraft/world/level/block/RedStoneWireBlock.java
@@ -68,7 +68,7 @@ public class RedStoneWireBlock extends Block {
       VoxelShape voxelShape = SHAPE_DOT;
 
       for(Direction direction : Direction.Plane.HORIZONTAL) {
-         RedstoneSide redstoneSide = blockState.getValue((Property)PROPERTY_BY_DIRECTION.get(direction));
+         RedstoneSide redstoneSide = blockState.getValue(PROPERTY_BY_DIRECTION.get(direction)); // MagmaCube - decompile error
          if (redstoneSide == RedstoneSide.SIDE) {
             voxelShape = Shapes.or(voxelShape, (VoxelShape)SHAPES_FLOOR.get(direction));
          } else if (redstoneSide == RedstoneSide.UP) {
@@ -155,7 +155,7 @@ public class RedStoneWireBlock extends Block {
       BlockPos.MutableBlockPos mutableBlockPos = new BlockPos.MutableBlockPos();
 
       for(Direction direction : Direction.Plane.HORIZONTAL) {
-         RedstoneSide redstoneSide = blockState.getValue((Property)PROPERTY_BY_DIRECTION.get(direction));
+         RedstoneSide redstoneSide = blockState.getValue(PROPERTY_BY_DIRECTION.get(direction)); // MagmaCube - decompile error
          if (redstoneSide != RedstoneSide.NONE && !levelAccessor.getBlockState(mutableBlockPos.setWithOffset(blockPos, direction)).is(this)) {
             mutableBlockPos.move(Direction.DOWN);
             BlockState blockState2 = levelAccessor.getBlockState(mutableBlockPos);
@@ -379,7 +379,7 @@ public class RedStoneWireBlock extends Block {
       int i = blockState.getValue(POWER);
       if (i != 0) {
          for(Direction direction : Direction.Plane.HORIZONTAL) {
-            RedstoneSide redstoneSide = blockState.getValue((Property)PROPERTY_BY_DIRECTION.get(direction));
+            RedstoneSide redstoneSide = blockState.getValue(PROPERTY_BY_DIRECTION.get(direction)); // MagmaCube - decompile error
             switch(redstoneSide) {
             case UP:
                this.spawnParticlesAlongLine(level, random, blockPos, COLORS[i], direction, Direction.UP, -0.5F, 0.5F);
diff --git a/src/main/java/net/minecraft/world/level/block/state/StateDefinition.java b/src/main/java/net/minecraft/world/level/block/state/StateDefinition.java
index c65af8b8b0a6cd4187cfec79898672a4ce380fb4..e0e99ea2d9511c82bfb950f5fc19650e8dd32e4f 100644
--- a/src/main/java/net/minecraft/world/level/block/state/StateDefinition.java
+++ b/src/main/java/net/minecraft/world/level/block/state/StateDefinition.java
@@ -34,7 +34,7 @@ public class StateDefinition<O, S extends StateHolder<O, S>> {
    protected StateDefinition(Function<O, S> function, O object, StateDefinition.Factory<O, S> factory, Map<String, Property<?>> map) {
       this.owner = object;
       this.propertiesByName = ImmutableSortedMap.copyOf(map);
-      Supplier<S> supplier = () -> (StateHolder)function.apply(object);
+      Supplier<S> supplier = () -> function.apply(object); // MagmaCube - decompile error
       MapCodec<S> mapCodec = MapCodec.of(Encoder.empty(), Decoder.unit(supplier));
 
       Entry<String, Property<?>> entry;
@@ -47,13 +47,16 @@ public class StateDefinition<O, S extends StateHolder<O, S>> {
       List<S> list = Lists.newArrayList();
       Stream<List<Pair<Property<?>, Comparable<?>>>> stream = Stream.of(Collections.emptyList());
 
-      Property<?> property;
-      for(UnmodifiableIterator var11 = this.propertiesByName.values().iterator(); var11.hasNext(); stream = stream.flatMap((listx) -> property.getPossibleValues().stream().map((comparable) -> {
-            List<Pair<Property<?>, Comparable<?>>> list2 = Lists.newArrayList(listx);
-            list2.add(Pair.of(property, comparable));
-            return list2;
-         }))) {
-         property = (Property)var11.next();
+      // MagmaCube start - decompile error
+      for(Property<?> property : this.propertiesByName.values()) {
+         stream = stream.flatMap((p_200999_1_) -> {
+            return property.getPossibleValues().stream().map((p_200998_2_) -> {
+               List<Pair<Property<?>, Comparable<?>>> list1 = Lists.newArrayList(p_200999_1_);
+               list1.add(Pair.of(property, p_200998_2_));
+               return list1;
+            });
+         });
+         // MagmaCube end - decompile error
       }
 
       stream.forEach((list2) -> {
@@ -71,7 +74,7 @@ public class StateDefinition<O, S extends StateHolder<O, S>> {
    }
 
    private static <S extends StateHolder<?, S>, T extends Comparable<T>> MapCodec<S> appendPropertyCodec(MapCodec<S> mapCodec, Supplier<S> supplier, String s, Property<T> property) {
-      return Codec.mapPair(mapCodec, property.valueCodec().fieldOf(s).setPartial(() -> property.value((StateHolder)supplier.get()))).xmap((pair) -> (StateHolder)((StateHolder)pair.getFirst()).setValue(property, ((Property.Value)pair.getSecond()).value()), (stateHolder) -> Pair.of(stateHolder, property.value(stateHolder)));
+      return Codec.mapPair(mapCodec, property.valueCodec().fieldOf(s).setPartial(() -> property.value((StateHolder)supplier.get()))).xmap((pair) -> (pair.getFirst()).setValue(property, (pair.getSecond()).value()), (stateHolder) -> Pair.of(stateHolder, property.value(stateHolder))); // MagmaCube - decompile error
    }
 
    public ImmutableList<S> getPossibleStates() {
diff --git a/src/main/java/net/minecraft/world/level/block/state/properties/Property.java b/src/main/java/net/minecraft/world/level/block/state/properties/Property.java
index 088375b91cebee6592485c046c46487a0e28de40..0d85b75ab4d2d2bb42c8363c2515850c2d624140 100644
--- a/src/main/java/net/minecraft/world/level/block/state/properties/Property.java
+++ b/src/main/java/net/minecraft/world/level/block/state/properties/Property.java
@@ -12,7 +12,8 @@ public abstract class Property<T extends Comparable<T>> {
    private final Class<T> clazz;
    private final String name;
    private Integer hashCode;
-   private final Codec<T> codec = Codec.STRING.comapFlatMap((sx) -> (DataResult)this.getValue(sx).map(DataResult::success).orElseGet(() -> DataResult.error("Unable to read property: " + this + " with value: " + sx)), this::getName);
+   // MagmaCube - decompile error
+   private final Codec<T> codec = Codec.STRING.comapFlatMap((sx) -> this.getValue(sx).map(DataResult::success).orElseGet(() -> DataResult.error("Unable to read property: " + this + " with value: " + sx)), this::getName);
    private final Codec<Property.Value<T>> valueCodec = this.codec.xmap(this::value, Property.Value::value);
 
    protected Property(String s, Class<T> clazz) {
diff --git a/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java b/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java
index 7f12351bcb1f10d0001da6e8a995d476ae7eb133..d13a235bad9cd5d418ab2dea7050168d3c9a0a9e 100644
--- a/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java
+++ b/src/main/java/net/minecraft/world/level/chunk/LevelChunk.java
@@ -485,8 +485,8 @@ public class LevelChunk implements ChunkAccess {
 
       for(int i3 = i; i3 <= i2; ++i3) {
          for(Entity entity : this.entitySections[i3].find(Entity.class)) {
-            if ((entityType == null || entity.getType() == entityType) && entity.getBoundingBox().intersects(aabb) && predicate.test(entity)) {
-               list.add(entity);
+            if ((entityType == null || entity.getType() == entityType) && entity.getBoundingBox().intersects(aabb) && predicate.test((T) entity)) { // MagmaCube - decompile error
+               list.add((T) entity); // MagmaCube - decompile error
             }
          }
       }
@@ -719,30 +719,30 @@ public class LevelChunk implements ChunkAccess {
 
    public void unpackTicks() {
       if (this.blockTicks instanceof ProtoTickList) {
-         ((ProtoTickList)this.blockTicks).copyOut(this.level.getBlockTicks(), (blockPos) -> this.getBlockState(blockPos).getBlock());
+         ((ProtoTickList<Block>)this.blockTicks).copyOut(this.level.getBlockTicks(), (blockPos) -> this.getBlockState(blockPos).getBlock()); // MagmaCube - decompile error
          this.blockTicks = EmptyTickList.empty();
       } else if (this.blockTicks instanceof ChunkTickList) {
-         ((ChunkTickList)this.blockTicks).copyOut(this.level.getBlockTicks());
+         ((ChunkTickList<Block>)this.blockTicks).copyOut(this.level.getBlockTicks()); // MagmaCube - decompile error
          this.blockTicks = EmptyTickList.empty();
       }
 
       if (this.liquidTicks instanceof ProtoTickList) {
-         ((ProtoTickList)this.liquidTicks).copyOut(this.level.getLiquidTicks(), (blockPos) -> this.getFluidState(blockPos).getType());
+         ((ProtoTickList<Fluid>)this.liquidTicks).copyOut(this.level.getLiquidTicks(), (blockPos) -> this.getFluidState(blockPos).getType()); // MagmaCube - decompile error
          this.liquidTicks = EmptyTickList.empty();
       } else if (this.liquidTicks instanceof ChunkTickList) {
-         ((ChunkTickList)this.liquidTicks).copyOut(this.level.getLiquidTicks());
+         ((ChunkTickList<Fluid>)this.liquidTicks).copyOut(this.level.getLiquidTicks()); // MagmaCube - decompile error
          this.liquidTicks = EmptyTickList.empty();
       }
 
    }
 
    public void packTicks(ServerLevel serverLevel) {
-      if (this.blockTicks == EmptyTickList.empty()) {
+      if (this.blockTicks.equals(EmptyTickList.empty())) { // MagmaCube - decompile error
          this.blockTicks = new ChunkTickList<>(Registry.BLOCK::getKey, serverLevel.getBlockTicks().fetchTicksInChunk(this.chunkPos, true, false), serverLevel.getGameTime());
          this.setUnsaved(true);
       }
 
-      if (this.liquidTicks == EmptyTickList.empty()) {
+      if (this.liquidTicks.equals(EmptyTickList.empty())) { // MagmaCube - decompile error
          this.liquidTicks = new ChunkTickList<>(Registry.FLUID::getKey, serverLevel.getLiquidTicks().fetchTicksInChunk(this.chunkPos, true, false), serverLevel.getGameTime());
          this.setUnsaved(true);
       }
diff --git a/src/main/java/net/minecraft/world/level/chunk/storage/ChunkSerializer.java b/src/main/java/net/minecraft/world/level/chunk/storage/ChunkSerializer.java
index cfbc35dffaccf357ef9e9040c7664ae17c94238b..3cdd70e3b7f4babfdaee04995feeea8b84570076 100644
--- a/src/main/java/net/minecraft/world/level/chunk/storage/ChunkSerializer.java
+++ b/src/main/java/net/minecraft/world/level/chunk/storage/ChunkSerializer.java
@@ -238,7 +238,7 @@ public class ChunkSerializer {
 
       for(int i = -1; i < 17; ++i) {
          int i2 = i;
-         LevelChunkSection levelChunkSection = (LevelChunkSection)Arrays.stream(levelChunkSections).filter((levelChunkSection) -> levelChunkSection != null && levelChunkSection.bottomBlockY() >> 4 == i2).findFirst().orElse(LevelChunk.EMPTY_SECTION);
+         LevelChunkSection levelChunkSection = (LevelChunkSection)Arrays.stream(levelChunkSections).filter((levelChunkSectionx) -> levelChunkSectionx != null && levelChunkSectionx.bottomBlockY() >> 4 == i2).findFirst().orElse(LevelChunk.EMPTY_SECTION); // MagmaCube - decompile error
          DataLayer dataLayer = levelLightEngine.getLayerListener(LightLayer.BLOCK).getDataLayerData(SectionPos.of(chunkPos, i2));
          DataLayer dataLayer2 = levelLightEngine.getLayerListener(LightLayer.SKY).getDataLayerData(SectionPos.of(chunkPos, i2));
          if (levelChunkSection != LevelChunk.EMPTY_SECTION || dataLayer != null || dataLayer2 != null) {
diff --git a/src/main/java/net/minecraft/world/level/dimension/DimensionType.java b/src/main/java/net/minecraft/world/level/dimension/DimensionType.java
index 1aae890d73b9361eec61b771c4d856387edc4950..77a887582145da4ae6a983f803041a22348dec39 100644
--- a/src/main/java/net/minecraft/world/level/dimension/DimensionType.java
+++ b/src/main/java/net/minecraft/world/level/dimension/DimensionType.java
@@ -35,7 +35,8 @@ public class DimensionType {
    public static final ResourceLocation OVERWORLD_EFFECTS = new ResourceLocation("overworld");
    public static final ResourceLocation NETHER_EFFECTS = new ResourceLocation("the_nether");
    public static final ResourceLocation END_EFFECTS = new ResourceLocation("the_end");
-   public static final Codec<DimensionType> DIRECT_CODEC;
+   // MagmaCube - decompile error
+   public static final Codec<DimensionType> DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(Codec.LONG.optionalFieldOf("fixed_time").xmap((optional) -> (OptionalLong)optional.map(OptionalLong::of).orElseGet(OptionalLong::empty), (optionalLong) -> optionalLong.isPresent() ? Optional.of(optionalLong.getAsLong()) : Optional.empty()).forGetter((dimensionType) -> dimensionType.fixedTime), Codec.BOOL.fieldOf("has_skylight").forGetter(DimensionType::hasSkyLight), Codec.BOOL.fieldOf("has_ceiling").forGetter(DimensionType::hasCeiling), Codec.BOOL.fieldOf("ultrawarm").forGetter(DimensionType::ultraWarm), Codec.BOOL.fieldOf("natural").forGetter(DimensionType::natural), Codec.doubleRange((double)1.0E-5F, 3.0E7D).fieldOf("coordinate_scale").forGetter(DimensionType::coordinateScale), Codec.BOOL.fieldOf("piglin_safe").forGetter(DimensionType::piglinSafe), Codec.BOOL.fieldOf("bed_works").forGetter(DimensionType::bedWorks), Codec.BOOL.fieldOf("respawn_anchor_works").forGetter(DimensionType::respawnAnchorWorks), Codec.BOOL.fieldOf("has_raids").forGetter(DimensionType::hasRaids), Codec.intRange(0, 256).fieldOf("logical_height").forGetter(DimensionType::logicalHeight), ResourceLocation.CODEC.fieldOf("infiniburn").forGetter((dimensionType) -> dimensionType.infiniburn), ResourceLocation.CODEC.fieldOf("effects").orElse(OVERWORLD_EFFECTS).forGetter((dimensionType) -> dimensionType.effectsLocation), Codec.FLOAT.fieldOf("ambient_light").forGetter((dimensionType) -> dimensionType.ambientLight)).apply(instance, DimensionType::new));
    public static final float[] MOON_BRIGHTNESS_PER_PHASE = new float[]{1.0F, 0.75F, 0.5F, 0.25F, 0.0F, 0.25F, 0.5F, 0.75F};
    public static final ResourceKey<DimensionType> OVERWORLD_LOCATION = ResourceKey.create(Registry.DIMENSION_TYPE_REGISTRY, new ResourceLocation("overworld"));
    public static final ResourceKey<DimensionType> NETHER_LOCATION = ResourceKey.create(Registry.DIMENSION_TYPE_REGISTRY, new ResourceLocation("the_nether"));
@@ -250,6 +251,5 @@ public class DimensionType {
    }
 
    static {
-      DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(Codec.LONG.optionalFieldOf("fixed_time").xmap((optional) -> (OptionalLong)optional.map(OptionalLong::of).orElseGet(OptionalLong::empty), (optionalLong) -> optionalLong.isPresent() ? Optional.of(optionalLong.getAsLong()) : Optional.empty()).forGetter((dimensionType) -> dimensionType.fixedTime), Codec.BOOL.fieldOf("has_skylight").forGetter(DimensionType::hasSkyLight), Codec.BOOL.fieldOf("has_ceiling").forGetter(DimensionType::hasCeiling), Codec.BOOL.fieldOf("ultrawarm").forGetter(DimensionType::ultraWarm), Codec.BOOL.fieldOf("natural").forGetter(DimensionType::natural), Codec.doubleRange((double)1.0E-5F, 3.0E7D).fieldOf("coordinate_scale").forGetter(DimensionType::coordinateScale), Codec.BOOL.fieldOf("piglin_safe").forGetter(DimensionType::piglinSafe), Codec.BOOL.fieldOf("bed_works").forGetter(DimensionType::bedWorks), Codec.BOOL.fieldOf("respawn_anchor_works").forGetter(DimensionType::respawnAnchorWorks), Codec.BOOL.fieldOf("has_raids").forGetter(DimensionType::hasRaids), Codec.intRange(0, 256).fieldOf("logical_height").forGetter(DimensionType::logicalHeight), ResourceLocation.CODEC.fieldOf("infiniburn").forGetter((dimensionType) -> dimensionType.infiniburn), ResourceLocation.CODEC.fieldOf("effects").orElse(OVERWORLD_EFFECTS).forGetter((dimensionType) -> dimensionType.effectsLocation), Codec.FLOAT.fieldOf("ambient_light").forGetter((dimensionType) -> dimensionType.ambientLight)).apply(instance, DimensionType::new));
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/world/level/levelgen/NoiseBasedChunkGenerator.java b/src/main/java/net/minecraft/world/level/levelgen/NoiseBasedChunkGenerator.java
index 17327efae8da10a2854ffd5a9d60bbaeae00cc26..8fe335b50bb7883f4ca7ac9b667ae850afc77f03 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/NoiseBasedChunkGenerator.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/NoiseBasedChunkGenerator.java
@@ -416,11 +416,13 @@ public final class NoiseBasedChunkGenerator extends ChunkGenerator {
                      }
 
                      for(JigsawJunction jigsawJunction : poolElementStructurePiece.getJunctions()) {
-                        int i3 = jigsawJunction.getSourceX();
-                        int i4 = jigsawJunction.getSourceZ();
-                        if (i3 > i3 - 12 && i4 > i4 - 12 && i3 < i3 + 15 + 12 && i4 < i4 + 15 + 12) {
+                        // MagmaCube start - decompile error
+                        int i3x = jigsawJunction.getSourceX();
+                        int i4x = jigsawJunction.getSourceZ();
+                        if (i3x > i3x - 12 && i4x > i4x - 12 && i3x < i3x + 15 + 12 && i4x < i4x + 15 + 12) {
                            objectList2.add(jigsawJunction);
                         }
+                        // MagmaCube end - decompile error
                      }
                   } else {
                      objectList.add(structurePiece);
diff --git a/src/main/java/net/minecraft/world/level/levelgen/NoiseGeneratorSettings.java b/src/main/java/net/minecraft/world/level/levelgen/NoiseGeneratorSettings.java
index ac314ab0ea5eb68918e3fedbc23d038d67093ee7..27001ca2f411e2c8eb83a69b6c9dabb8b8410287 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/NoiseGeneratorSettings.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/NoiseGeneratorSettings.java
@@ -18,7 +18,8 @@ import net.minecraft.world.level.levelgen.feature.StructureFeature;
 import net.minecraft.world.level.levelgen.feature.configurations.StructureFeatureConfiguration;
 
 public final class NoiseGeneratorSettings {
-   public static final Codec<NoiseGeneratorSettings> DIRECT_CODEC;
+   // MagmaCube - decompile error
+   public static final Codec<NoiseGeneratorSettings> DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(StructureSettings.CODEC.fieldOf("structures").forGetter(NoiseGeneratorSettings::structureSettings), NoiseSettings.CODEC.fieldOf("noise").forGetter(NoiseGeneratorSettings::noiseSettings), BlockState.CODEC.fieldOf("default_block").forGetter(NoiseGeneratorSettings::getDefaultBlock), BlockState.CODEC.fieldOf("default_fluid").forGetter(NoiseGeneratorSettings::getDefaultFluid), Codec.intRange(-20, 276).fieldOf("bedrock_roof_position").forGetter(NoiseGeneratorSettings::getBedrockRoofPosition), Codec.intRange(-20, 276).fieldOf("bedrock_floor_position").forGetter(NoiseGeneratorSettings::getBedrockFloorPosition), Codec.intRange(0, 255).fieldOf("sea_level").forGetter(NoiseGeneratorSettings::seaLevel), Codec.BOOL.fieldOf("disable_mob_generation").forGetter(NoiseGeneratorSettings::disableMobGeneration)).apply(instance, NoiseGeneratorSettings::new));
    public static final Codec<Supplier<NoiseGeneratorSettings>> CODEC = RegistryFileCodec.create(Registry.NOISE_GENERATOR_SETTINGS_REGISTRY, DIRECT_CODEC);
    private final StructureSettings structureSettings;
    private final NoiseSettings noiseSettings;
@@ -109,7 +110,6 @@ public final class NoiseGeneratorSettings {
    }
 
    static {
-      DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(StructureSettings.CODEC.fieldOf("structures").forGetter(NoiseGeneratorSettings::structureSettings), NoiseSettings.CODEC.fieldOf("noise").forGetter(NoiseGeneratorSettings::noiseSettings), BlockState.CODEC.fieldOf("default_block").forGetter(NoiseGeneratorSettings::getDefaultBlock), BlockState.CODEC.fieldOf("default_fluid").forGetter(NoiseGeneratorSettings::getDefaultFluid), Codec.intRange(-20, 276).fieldOf("bedrock_roof_position").forGetter(NoiseGeneratorSettings::getBedrockRoofPosition), Codec.intRange(-20, 276).fieldOf("bedrock_floor_position").forGetter(NoiseGeneratorSettings::getBedrockFloorPosition), Codec.intRange(0, 255).fieldOf("sea_level").forGetter(NoiseGeneratorSettings::seaLevel), Codec.BOOL.fieldOf("disable_mob_generation").forGetter(NoiseGeneratorSettings::disableMobGeneration)).apply(instance, NoiseGeneratorSettings::new));
       register(AMPLIFIED, overworld(new StructureSettings(true), true, AMPLIFIED.location()));
       register(NETHER, nether(new StructureSettings(false), Blocks.NETHERRACK.defaultBlockState(), Blocks.LAVA.defaultBlockState(), NETHER.location()));
       register(END, end(new StructureSettings(false), Blocks.END_STONE.defaultBlockState(), Blocks.AIR.defaultBlockState(), END.location(), true, true));
diff --git a/src/main/java/net/minecraft/world/level/levelgen/StructureSettings.java b/src/main/java/net/minecraft/world/level/levelgen/StructureSettings.java
index b8f7261d7a00f2f9c0e4bddd4b13410214836d67..829140075a0518d2c90b88ebdaf8afbd0ab1accc 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/StructureSettings.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/StructureSettings.java
@@ -14,7 +14,8 @@ import net.minecraft.world.level.levelgen.feature.configurations.StructureFeatur
 
 public class StructureSettings {
    public static final Codec<StructureSettings> CODEC = RecordCodecBuilder.create((instance) -> instance.group(StrongholdConfiguration.CODEC.optionalFieldOf("stronghold").forGetter((structureSettings) -> Optional.ofNullable(structureSettings.stronghold)), Codec.simpleMap(Registry.STRUCTURE_FEATURE, StructureFeatureConfiguration.CODEC, Registry.STRUCTURE_FEATURE).fieldOf("structures").forGetter((structureSettings) -> structureSettings.structureConfig)).apply(instance, StructureSettings::new));
-   public static final ImmutableMap<StructureFeature<?>, StructureFeatureConfiguration> DEFAULTS = ImmutableMap.builder().put(StructureFeature.VILLAGE, new StructureFeatureConfiguration(32, 8, 10387312)).put(StructureFeature.DESERT_PYRAMID, new StructureFeatureConfiguration(32, 8, 14357617)).put(StructureFeature.IGLOO, new StructureFeatureConfiguration(32, 8, 14357618)).put(StructureFeature.JUNGLE_TEMPLE, new StructureFeatureConfiguration(32, 8, 14357619)).put(StructureFeature.SWAMP_HUT, new StructureFeatureConfiguration(32, 8, 14357620)).put(StructureFeature.PILLAGER_OUTPOST, new StructureFeatureConfiguration(32, 8, 165745296)).put(StructureFeature.STRONGHOLD, new StructureFeatureConfiguration(1, 0, 0)).put(StructureFeature.OCEAN_MONUMENT, new StructureFeatureConfiguration(32, 5, 10387313)).put(StructureFeature.END_CITY, new StructureFeatureConfiguration(20, 11, 10387313)).put(StructureFeature.WOODLAND_MANSION, new StructureFeatureConfiguration(80, 20, 10387319)).put(StructureFeature.BURIED_TREASURE, new StructureFeatureConfiguration(1, 0, 0)).put(StructureFeature.MINESHAFT, new StructureFeatureConfiguration(1, 0, 0)).put(StructureFeature.RUINED_PORTAL, new StructureFeatureConfiguration(40, 15, 34222645)).put(StructureFeature.SHIPWRECK, new StructureFeatureConfiguration(24, 4, 165745295)).put(StructureFeature.OCEAN_RUIN, new StructureFeatureConfiguration(20, 8, 14357621)).put(StructureFeature.BASTION_REMNANT, new StructureFeatureConfiguration(27, 4, 30084232)).put(StructureFeature.NETHER_BRIDGE, new StructureFeatureConfiguration(27, 4, 30084232)).put(StructureFeature.NETHER_FOSSIL, new StructureFeatureConfiguration(2, 1, 14357921)).build();
+   // MagmaCube - decompile error
+   public static final ImmutableMap<StructureFeature<?>, StructureFeatureConfiguration> DEFAULTS = (ImmutableMap) ImmutableMap.builder().put(StructureFeature.VILLAGE, new StructureFeatureConfiguration(32, 8, 10387312)).put(StructureFeature.DESERT_PYRAMID, new StructureFeatureConfiguration(32, 8, 14357617)).put(StructureFeature.IGLOO, new StructureFeatureConfiguration(32, 8, 14357618)).put(StructureFeature.JUNGLE_TEMPLE, new StructureFeatureConfiguration(32, 8, 14357619)).put(StructureFeature.SWAMP_HUT, new StructureFeatureConfiguration(32, 8, 14357620)).put(StructureFeature.PILLAGER_OUTPOST, new StructureFeatureConfiguration(32, 8, 165745296)).put(StructureFeature.STRONGHOLD, new StructureFeatureConfiguration(1, 0, 0)).put(StructureFeature.OCEAN_MONUMENT, new StructureFeatureConfiguration(32, 5, 10387313)).put(StructureFeature.END_CITY, new StructureFeatureConfiguration(20, 11, 10387313)).put(StructureFeature.WOODLAND_MANSION, new StructureFeatureConfiguration(80, 20, 10387319)).put(StructureFeature.BURIED_TREASURE, new StructureFeatureConfiguration(1, 0, 0)).put(StructureFeature.MINESHAFT, new StructureFeatureConfiguration(1, 0, 0)).put(StructureFeature.RUINED_PORTAL, new StructureFeatureConfiguration(40, 15, 34222645)).put(StructureFeature.SHIPWRECK, new StructureFeatureConfiguration(24, 4, 165745295)).put(StructureFeature.OCEAN_RUIN, new StructureFeatureConfiguration(20, 8, 14357621)).put(StructureFeature.BASTION_REMNANT, new StructureFeatureConfiguration(27, 4, 30084232)).put(StructureFeature.NETHER_BRIDGE, new StructureFeatureConfiguration(27, 4, 30084232)).put(StructureFeature.NETHER_FOSSIL, new StructureFeatureConfiguration(2, 1, 14357921)).build();
    public static final StrongholdConfiguration DEFAULT_STRONGHOLD;
    private final Map<StructureFeature<?>, StructureFeatureConfiguration> structureConfig;
    @Nullable
diff --git a/src/main/java/net/minecraft/world/level/levelgen/WorldGenSettings.java b/src/main/java/net/minecraft/world/level/levelgen/WorldGenSettings.java
index 6ac73abd2407082d9fdcb23a2d0544830bd89c7c..d82888bf743d8fcc11eea6e4d807478783d99a5b 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/WorldGenSettings.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/WorldGenSettings.java
@@ -35,7 +35,8 @@ import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
 public class WorldGenSettings {
-   public static final Codec<WorldGenSettings> CODEC = RecordCodecBuilder.create((instance) -> instance.group(Codec.LONG.fieldOf("seed").stable().forGetter(WorldGenSettings::seed), Codec.BOOL.fieldOf("generate_features").orElse(true).stable().forGetter(WorldGenSettings::generateFeatures), Codec.BOOL.fieldOf("bonus_chest").orElse(false).stable().forGetter(WorldGenSettings::generateBonusChest), MappedRegistry.dataPackCodec(Registry.LEVEL_STEM_REGISTRY, Lifecycle.stable(), LevelStem.CODEC).xmap(LevelStem::sortMap, Function.identity()).fieldOf("dimensions").forGetter(WorldGenSettings::dimensions), Codec.STRING.optionalFieldOf("legacy_custom_options").stable().forGetter((worldGenSettings) -> worldGenSettings.legacyCustomOptions)).apply(instance, instance.stable(WorldGenSettings::new))).comapFlatMap(WorldGenSettings::guardExperimental, Function.identity());
+   // MagmaCube - decompile error
+   public static final Codec<WorldGenSettings> CODEC = RecordCodecBuilder.<WorldGenSettings>create((instance) -> instance.group(Codec.LONG.fieldOf("seed").stable().forGetter(WorldGenSettings::seed), Codec.BOOL.fieldOf("generate_features").orElse(true).stable().forGetter(WorldGenSettings::generateFeatures), Codec.BOOL.fieldOf("bonus_chest").orElse(false).stable().forGetter(WorldGenSettings::generateBonusChest), MappedRegistry.dataPackCodec(Registry.LEVEL_STEM_REGISTRY, Lifecycle.stable(), LevelStem.CODEC).xmap(LevelStem::sortMap, Function.identity()).fieldOf("dimensions").forGetter(WorldGenSettings::dimensions), Codec.STRING.optionalFieldOf("legacy_custom_options").stable().forGetter((worldGenSettings) -> worldGenSettings.legacyCustomOptions)).apply(instance, instance.stable(WorldGenSettings::new))).comapFlatMap(WorldGenSettings::guardExperimental, Function.identity());
    private static final Logger LOGGER = LogManager.getLogger();
    private final long seed;
    private final boolean generateFeatures;
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/SpikeFeature.java b/src/main/java/net/minecraft/world/level/levelgen/feature/SpikeFeature.java
index 9f3c98e81b13c8510fca107c722e36da34f45693..5b7ddd3a13627af2472a0e59f75844c54a21aca1 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/SpikeFeature.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/SpikeFeature.java
@@ -3,6 +3,7 @@ package net.minecraft.world.level.levelgen.feature;
 import com.google.common.cache.CacheBuilder;
 import com.google.common.cache.CacheLoader;
 import com.google.common.cache.LoadingCache;
+import com.google.common.collect.Lists;
 import com.mojang.serialization.Codec;
 import com.mojang.serialization.codecs.RecordCodecBuilder;
 import java.util.Collections;
@@ -146,7 +147,21 @@ public class SpikeFeature extends Feature<SpikeConfiguration> {
       }
 
       public List<SpikeFeature.EndSpike> load(Long l) {
-         // $FF: Couldn't be decompiled
+         // MagmaCube start - decompile error
+         List<Integer> list = IntStream.range(0, 10).boxed().collect(Collectors.toList());
+         Collections.shuffle(list, new Random(l));
+         List<SpikeFeature.EndSpike> list1 = Lists.newArrayList();
+         for (int i = 0; i < 10; ++i) {
+            int j = Mth.floor(42.0D * Math.cos(2.0D * (-Math.PI + (Math.PI / 10D) * (double)i)));
+            int k = Mth.floor(42.0D * Math.sin(2.0D * (-Math.PI + (Math.PI / 10D) * (double)i)));
+            int l1 = list.get(i);
+            int i1 = 2 + l1 / 3;
+            int j1 = 76 + l1 * 3;
+            boolean flag = l1 == 1 || l1 == 2;
+            list1.add(new SpikeFeature.EndSpike(j, k, i1, j1, flag));
+         }
+         return list1;
+         // MagmaCube end - decompile error
       }
    }
 }
\ No newline at end of file
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/StructureFeature.java b/src/main/java/net/minecraft/world/level/levelgen/feature/StructureFeature.java
index fa88c71062230ea7c580e6db568133c77a8f06d3..f5dac1e1da3b644080c8d8cf867aaf9130f947b3 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/StructureFeature.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/StructureFeature.java
@@ -70,7 +70,8 @@ public abstract class StructureFeature<C extends FeatureConfiguration> {
    public static final StructureFeature<JigsawConfiguration> BASTION_REMNANT = register("Bastion_Remnant", new BastionFeature(JigsawConfiguration.CODEC), GenerationStep.Decoration.SURFACE_STRUCTURES);
    public static final List<StructureFeature<?>> NOISE_AFFECTING_FEATURES = ImmutableList.of(PILLAGER_OUTPOST, VILLAGE, NETHER_FOSSIL);
    private static final ResourceLocation JIGSAW_RENAME = new ResourceLocation("jigsaw");
-   private static final Map<ResourceLocation, ResourceLocation> RENAMES = ImmutableMap.builder().put(new ResourceLocation("nvi"), JIGSAW_RENAME).put(new ResourceLocation("pcp"), JIGSAW_RENAME).put(new ResourceLocation("bastionremnant"), JIGSAW_RENAME).put(new ResourceLocation("runtime"), JIGSAW_RENAME).build();
+   // MagmaCube - decompile error
+   private static final Map<ResourceLocation, ResourceLocation> RENAMES = (Map) ImmutableMap.builder().put(new ResourceLocation("nvi"), JIGSAW_RENAME).put(new ResourceLocation("pcp"), JIGSAW_RENAME).put(new ResourceLocation("bastionremnant"), JIGSAW_RENAME).put(new ResourceLocation("runtime"), JIGSAW_RENAME).build();
    private final Codec<ConfiguredStructureFeature<C, StructureFeature<C>>> configuredStructureCodec;
 
    private static <F extends StructureFeature<?>> F register(String s, F structureFeature, GenerationStep.Decoration decoration) {
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/SpringConfiguration.java b/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/SpringConfiguration.java
index eea8527b4b67131844f4a547468da3a7b34b4355..3a54720b94c797ef4140752de92c849eab2f5daf 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/SpringConfiguration.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/SpringConfiguration.java
@@ -10,7 +10,8 @@ import net.minecraft.world.level.block.Block;
 import net.minecraft.world.level.material.FluidState;
 
 public class SpringConfiguration implements FeatureConfiguration {
-   public static final Codec<SpringConfiguration> CODEC = RecordCodecBuilder.create((instance) -> instance.group(FluidState.CODEC.fieldOf("state").forGetter((springConfiguration) -> springConfiguration.state), Codec.BOOL.fieldOf("requires_block_below").orElse(true).forGetter((springConfiguration) -> springConfiguration.requiresBlockBelow), Codec.INT.fieldOf("rock_count").orElse(4).forGetter((springConfiguration) -> springConfiguration.rockCount), Codec.INT.fieldOf("hole_count").orElse(1).forGetter((springConfiguration) -> springConfiguration.holeCount), Registry.BLOCK.listOf().fieldOf("valid_blocks").xmap(ImmutableSet::copyOf, ImmutableList::copyOf).forGetter((springConfiguration) -> springConfiguration.validBlocks)).apply(instance, SpringConfiguration::new));
+   // MagmaCube - decompile error
+   public static final Codec<SpringConfiguration> CODEC = RecordCodecBuilder.create((instance) -> instance.group(FluidState.CODEC.fieldOf("state").forGetter((springConfiguration) -> springConfiguration.state), Codec.BOOL.fieldOf("requires_block_below").orElse(true).forGetter((springConfiguration) -> springConfiguration.requiresBlockBelow), Codec.INT.fieldOf("rock_count").orElse(4).forGetter((springConfiguration) -> springConfiguration.rockCount), Codec.INT.fieldOf("hole_count").orElse(1).forGetter((springConfiguration) -> springConfiguration.holeCount), Registry.BLOCK.listOf().fieldOf("valid_blocks").xmap(ImmutableSet::copyOf, ImmutableList::copyOf).forGetter((springConfiguration) -> (ImmutableSet<Block>) springConfiguration.validBlocks)).apply(instance, SpringConfiguration::new));
    public final FluidState state;
    public final boolean requiresBlockBelow;
    public final int rockCount;
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/StructureFeatureConfiguration.java b/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/StructureFeatureConfiguration.java
index 131dafca69f2abdd3e61cc1b523278a6cfd532c9..6ba39ffa04da2410d10ebdde51d5ebf6ce19af15 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/StructureFeatureConfiguration.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/configurations/StructureFeatureConfiguration.java
@@ -6,7 +6,8 @@ import com.mojang.serialization.codecs.RecordCodecBuilder;
 import java.util.function.Function;
 
 public class StructureFeatureConfiguration {
-   public static final Codec<StructureFeatureConfiguration> CODEC = RecordCodecBuilder.create((instance) -> instance.group(Codec.intRange(0, 4096).fieldOf("spacing").forGetter((structureFeatureConfiguration) -> structureFeatureConfiguration.spacing), Codec.intRange(0, 4096).fieldOf("separation").forGetter((structureFeatureConfiguration) -> structureFeatureConfiguration.separation), Codec.intRange(0, Integer.MAX_VALUE).fieldOf("salt").forGetter((structureFeatureConfiguration) -> structureFeatureConfiguration.salt)).apply(instance, StructureFeatureConfiguration::new)).comapFlatMap((structureFeatureConfiguration) -> structureFeatureConfiguration.spacing <= structureFeatureConfiguration.separation ? DataResult.error("Spacing has to be smaller than separation") : DataResult.success(structureFeatureConfiguration), Function.identity());
+   // MagmaCube - decompile error
+   public static final Codec<StructureFeatureConfiguration> CODEC = RecordCodecBuilder.<StructureFeatureConfiguration>create((instance) -> instance.group(Codec.intRange(0, 4096).fieldOf("spacing").forGetter((structureFeatureConfiguration) -> structureFeatureConfiguration.spacing), Codec.intRange(0, 4096).fieldOf("separation").forGetter((structureFeatureConfiguration) -> structureFeatureConfiguration.separation), Codec.intRange(0, Integer.MAX_VALUE).fieldOf("salt").forGetter((structureFeatureConfiguration) -> structureFeatureConfiguration.salt)).apply(instance, StructureFeatureConfiguration::new)).comapFlatMap((structureFeatureConfiguration) -> structureFeatureConfiguration.spacing <= structureFeatureConfiguration.separation ? DataResult.error("Spacing has to be smaller than separation") : DataResult.success(structureFeatureConfiguration), Function.identity());
    private final int spacing;
    private final int separation;
    private final int salt;
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/structures/JigsawPlacement.java b/src/main/java/net/minecraft/world/level/levelgen/feature/structures/JigsawPlacement.java
index b2de86f6485947f4372e75559c07c5b46893f5cc..653793379fcf20c5893f79a76fe61c9fae258151 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/structures/JigsawPlacement.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/structures/JigsawPlacement.java
@@ -177,12 +177,14 @@ public class JigsawPlacement {
                               if (!boundingBox2.isInside(structureBlockInfox.pos.relative(JigsawBlock.getFrontFacing(structureBlockInfox.state)))) {
                                  return 0;
                               } else {
-                                 ResourceLocation resourceLocation = new ResourceLocation(structureBlockInfox.nbt.getString("pool"));
-                                 Optional<StructureTemplatePool> optional = this.pools.getOptional(resourceLocation);
-                                 Optional<StructureTemplatePool> optional2 = optional.flatMap((structureTemplatePool) -> this.pools.getOptional(structureTemplatePool.getFallback()));
-                                 int i = optional.map((structureTemplatePool) -> structureTemplatePool.getMaxSize(this.structureManager)).orElse(0);
-                                 int i2 = optional2.map((structureTemplatePool) -> structureTemplatePool.getMaxSize(this.structureManager)).orElse(0);
-                                 return Math.max(i, i2);
+                                 // MagmaCube start - decompile error
+                                 ResourceLocation resourceLocationx = new ResourceLocation(structureBlockInfox.nbt.getString("pool"));
+                                 Optional<StructureTemplatePool> optx = this.pools.getOptional(resourceLocationx);
+                                 Optional<StructureTemplatePool> optional2x = optx.flatMap((structureTemplatePool) -> this.pools.getOptional(structureTemplatePool.getFallback()));
+                                 int ix = optx.map((structureTemplatePool) -> structureTemplatePool.getMaxSize(this.structureManager)).orElse(0);
+                                 int i2x = optional2x.map((structureTemplatePool) -> structureTemplatePool.getMaxSize(this.structureManager)).orElse(0);
+                                 return Math.max(ix, i2x);
+                                 // MagmaCube end - decompile error
                               }
                            }).max().orElse(0);
                         } else {
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/structures/StructureTemplatePool.java b/src/main/java/net/minecraft/world/level/levelgen/feature/structures/StructureTemplatePool.java
index 2f763682d3b1c54d971bf6d4fc0f883a473c55ee..5479f7dbcc14de8d15788dab000c3dc038fb3344 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/structures/StructureTemplatePool.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/structures/StructureTemplatePool.java
@@ -29,7 +29,8 @@ import org.apache.logging.log4j.Logger;
 
 public class StructureTemplatePool {
    private static final Logger LOGGER = LogManager.getLogger();
-   public static final Codec<StructureTemplatePool> DIRECT_CODEC;
+   // MagmaCube - decompile error
+   public static final Codec<StructureTemplatePool> DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(ResourceLocation.CODEC.fieldOf("name").forGetter(StructureTemplatePool::getName), ResourceLocation.CODEC.fieldOf("fallback").forGetter(StructureTemplatePool::getFallback), Codec.mapPair(StructurePoolElement.CODEC.fieldOf("element"), Codec.INT.fieldOf("weight")).codec().listOf().promotePartial(Util.prefix("Pool element: ", LOGGER::error)).fieldOf("elements").forGetter((structureTemplatePool) -> structureTemplatePool.rawTemplates)).apply(instance, StructureTemplatePool::new));
    public static final Codec<Supplier<StructureTemplatePool>> CODEC = RegistryFileCodec.create(Registry.TEMPLATE_POOL_REGISTRY, DIRECT_CODEC);
    private final ResourceLocation name;
    private final List<Pair<StructurePoolElement, Integer>> rawTemplates;
@@ -99,7 +100,6 @@ public class StructureTemplatePool {
    }
 
    static {
-      DIRECT_CODEC = RecordCodecBuilder.create((instance) -> instance.group(ResourceLocation.CODEC.fieldOf("name").forGetter(StructureTemplatePool::getName), ResourceLocation.CODEC.fieldOf("fallback").forGetter(StructureTemplatePool::getFallback), Codec.mapPair(StructurePoolElement.CODEC.fieldOf("element"), Codec.INT.fieldOf("weight")).codec().listOf().promotePartial(Util.prefix("Pool element: ", LOGGER::error)).fieldOf("elements").forGetter((structureTemplatePool) -> structureTemplatePool.rawTemplates)).apply(instance, StructureTemplatePool::new));
    }
 
    public static enum Projection implements StringRepresentable {
diff --git a/src/main/java/net/minecraft/world/level/levelgen/feature/treedecorators/AlterGroundDecorator.java b/src/main/java/net/minecraft/world/level/levelgen/feature/treedecorators/AlterGroundDecorator.java
index 4bca8fff0fac933dad33929b725ed83e0f716711..a9393a97b6a8f60fa0de796380b3b00afb4af429 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/feature/treedecorators/AlterGroundDecorator.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/feature/treedecorators/AlterGroundDecorator.java
@@ -31,7 +31,7 @@ public class AlterGroundDecorator extends TreeDecorator {
          this.placeCircle(worldGenLevel, random, blockPos.west().south(2));
          this.placeCircle(worldGenLevel, random, blockPos.east(2).south(2));
 
-         for(int i = 0; i < 5; ++i) {
+         for(int il = 0; il < 5; ++il) { // MagmaCube - decompile error
             int i2 = random.nextInt(64);
             int i3 = i2 % 8;
             int i4 = i2 / 8;
diff --git a/src/main/java/net/minecraft/world/level/levelgen/flat/FlatLevelGeneratorSettings.java b/src/main/java/net/minecraft/world/level/levelgen/flat/FlatLevelGeneratorSettings.java
index 5691159522cff2dd89edd55baaab72ca67d90c6d..0dce0210fb98901cb6933394b4eaf972e684fe42 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/flat/FlatLevelGeneratorSettings.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/flat/FlatLevelGeneratorSettings.java
@@ -35,7 +35,8 @@ import org.apache.logging.log4j.Logger;
 
 public class FlatLevelGeneratorSettings {
    private static final Logger LOGGER = LogManager.getLogger();
-   public static final Codec<FlatLevelGeneratorSettings> CODEC = RecordCodecBuilder.create((instance) -> instance.group(RegistryLookupCodec.create(Registry.BIOME_REGISTRY).forGetter((flatLevelGeneratorSettings) -> flatLevelGeneratorSettings.biomes), StructureSettings.CODEC.fieldOf("structures").forGetter(FlatLevelGeneratorSettings::structureSettings), FlatLayerInfo.CODEC.listOf().fieldOf("layers").forGetter(FlatLevelGeneratorSettings::getLayersInfo), Codec.BOOL.fieldOf("lakes").orElse(false).forGetter((flatLevelGeneratorSettings) -> flatLevelGeneratorSettings.addLakes), Codec.BOOL.fieldOf("features").orElse(false).forGetter((flatLevelGeneratorSettings) -> flatLevelGeneratorSettings.decoration), Biome.CODEC.optionalFieldOf("biome").orElseGet(Optional::empty).forGetter((flatLevelGeneratorSettings) -> Optional.of(flatLevelGeneratorSettings.biome))).apply(instance, FlatLevelGeneratorSettings::new)).stable();
+   // MagmaCube - decompile error
+   public static final Codec<FlatLevelGeneratorSettings> CODEC = RecordCodecBuilder.<FlatLevelGeneratorSettings>create((instance) -> instance.group(RegistryLookupCodec.create(Registry.BIOME_REGISTRY).forGetter((flatLevelGeneratorSettings) -> flatLevelGeneratorSettings.biomes), StructureSettings.CODEC.fieldOf("structures").forGetter(FlatLevelGeneratorSettings::structureSettings), FlatLayerInfo.CODEC.listOf().fieldOf("layers").forGetter(FlatLevelGeneratorSettings::getLayersInfo), Codec.BOOL.fieldOf("lakes").orElse(false).forGetter((flatLevelGeneratorSettings) -> flatLevelGeneratorSettings.addLakes), Codec.BOOL.fieldOf("features").orElse(false).forGetter((flatLevelGeneratorSettings) -> flatLevelGeneratorSettings.decoration), Biome.CODEC.optionalFieldOf("biome").orElseGet(Optional::empty).forGetter((flatLevelGeneratorSettings) -> Optional.of(flatLevelGeneratorSettings.biome))).apply(instance, FlatLevelGeneratorSettings::new)).stable();
    private static final Map<StructureFeature<?>, ConfiguredStructureFeature<?, ?>> STRUCTURE_FEATURES = Util.make(Maps.newHashMap(), (hashMap) -> {
       hashMap.put(StructureFeature.MINESHAFT, StructureFeatures.MINESHAFT);
       hashMap.put(StructureFeature.VILLAGE, StructureFeatures.VILLAGE_PLAINS);
@@ -141,7 +142,7 @@ public class FlatLevelGeneratorSettings {
 
          for(int i = 0; i < list.size(); ++i) {
             if (i != GenerationStep.Decoration.UNDERGROUND_STRUCTURES.ordinal() && i != GenerationStep.Decoration.SURFACE_STRUCTURES.ordinal()) {
-               for(Supplier<ConfiguredFeature<?, ?>> supplier : (List)list.get(i)) {
+               for(Supplier<ConfiguredFeature<?, ?>> supplier : list.get(i)) { // MagmaCube - decompile error
                   builder.addFeature(i, supplier);
                }
             }
diff --git a/src/main/java/net/minecraft/world/level/levelgen/structure/OceanMonumentPieces.java b/src/main/java/net/minecraft/world/level/levelgen/structure/OceanMonumentPieces.java
index 65b33d61cc48069893c292d0524346fb60462724..cc733429bba413ba8e0310524f03a99ddd5932a1 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/structure/OceanMonumentPieces.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/structure/OceanMonumentPieces.java
@@ -1344,7 +1344,7 @@ public class OceanMonumentPieces {
       protected static final BlockState DOT_DECO_DATA = BASE_LIGHT;
       protected static final BlockState LAMP_BLOCK = Blocks.SEA_LANTERN.defaultBlockState();
       protected static final BlockState FILL_BLOCK = Blocks.WATER.defaultBlockState();
-      protected static final Set<Block> FILL_KEEP = ImmutableSet.builder().add(Blocks.ICE).add(Blocks.PACKED_ICE).add(Blocks.BLUE_ICE).add(FILL_BLOCK.getBlock()).build();
+      protected static final Set<Block> FILL_KEEP = (Set) ImmutableSet.builder().add(Blocks.ICE).add(Blocks.PACKED_ICE).add(Blocks.BLUE_ICE).add(FILL_BLOCK.getBlock()).build(); // MagmaCube - decompile error
       protected static final int GRIDROOM_SOURCE_INDEX = getRoomIndex(2, 0, 0);
       protected static final int GRIDROOM_TOP_CONNECT_INDEX = getRoomIndex(2, 2, 0);
       protected static final int GRIDROOM_LEFTWING_CONNECT_INDEX = getRoomIndex(0, 1, 0);
diff --git a/src/main/java/net/minecraft/world/level/levelgen/structure/StructurePiece.java b/src/main/java/net/minecraft/world/level/levelgen/structure/StructurePiece.java
index 9a605206a0b34abd1ca142167892279d021721b4..03d32e1ecf61f236e603ca30751c5a6ad58f2775 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/structure/StructurePiece.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/structure/StructurePiece.java
@@ -40,7 +40,8 @@ public abstract class StructurePiece {
    private Rotation rotation;
    protected int genDepth;
    private final StructurePieceType type;
-   private static final Set<Block> SHAPE_CHECK_BLOCKS = ImmutableSet.builder().add(Blocks.NETHER_BRICK_FENCE).add(Blocks.TORCH).add(Blocks.WALL_TORCH).add(Blocks.OAK_FENCE).add(Blocks.SPRUCE_FENCE).add(Blocks.DARK_OAK_FENCE).add(Blocks.ACACIA_FENCE).add(Blocks.BIRCH_FENCE).add(Blocks.JUNGLE_FENCE).add(Blocks.LADDER).add(Blocks.IRON_BARS).build();
+   // MagmaCube - decompile error
+   private static final Set<Block> SHAPE_CHECK_BLOCKS = (Set) ImmutableSet.builder().add(Blocks.NETHER_BRICK_FENCE).add(Blocks.TORCH).add(Blocks.WALL_TORCH).add(Blocks.OAK_FENCE).add(Blocks.SPRUCE_FENCE).add(Blocks.DARK_OAK_FENCE).add(Blocks.ACACIA_FENCE).add(Blocks.BIRCH_FENCE).add(Blocks.JUNGLE_FENCE).add(Blocks.LADDER).add(Blocks.IRON_BARS).build();
 
    protected StructurePiece(StructurePieceType structurePieceType, int i) {
       this.type = structurePieceType;
diff --git a/src/main/java/net/minecraft/world/level/levelgen/structure/templatesystem/StructureTemplate.java b/src/main/java/net/minecraft/world/level/levelgen/structure/templatesystem/StructureTemplate.java
index b1f105d6d23419480d54b8d437b0e2fb061aba79..2fd7e358f38822fe5f34a5edcc4b35e21ceea133 100644
--- a/src/main/java/net/minecraft/world/level/levelgen/structure/templatesystem/StructureTemplate.java
+++ b/src/main/java/net/minecraft/world/level/levelgen/structure/templatesystem/StructureTemplate.java
@@ -120,7 +120,7 @@ public class StructureTemplate {
    }
 
    private static List<StructureTemplate.StructureBlockInfo> buildInfoList(List<StructureTemplate.StructureBlockInfo> list, List<StructureTemplate.StructureBlockInfo> list2, List<StructureTemplate.StructureBlockInfo> list3) {
-      Comparator<StructureTemplate.StructureBlockInfo> comparator = Comparator.comparingInt((structureBlockInfo) -> structureBlockInfo.pos.getY()).thenComparingInt((structureBlockInfo) -> structureBlockInfo.pos.getX()).thenComparingInt((structureBlockInfo) -> structureBlockInfo.pos.getZ());
+      Comparator<StructureTemplate.StructureBlockInfo> comparator = Comparator.<StructureBlockInfo>comparingInt((structureBlockInfo) -> structureBlockInfo.pos.getY()).thenComparingInt((structureBlockInfo) -> structureBlockInfo.pos.getX()).thenComparingInt((structureBlockInfo) -> structureBlockInfo.pos.getZ()); // MagmaCube - decompile error
       list.sort(comparator);
       list3.sort(comparator);
       list2.sort(comparator);
diff --git a/src/main/java/net/minecraft/world/level/lighting/BlockLightEngine.java b/src/main/java/net/minecraft/world/level/lighting/BlockLightEngine.java
index 45cf6f63598fd87b889f23299809f315be8c7ca9..b65b67cdc5a5142a81892109648f6c35f4099471 100644
--- a/src/main/java/net/minecraft/world/level/lighting/BlockLightEngine.java
+++ b/src/main/java/net/minecraft/world/level/lighting/BlockLightEngine.java
@@ -28,9 +28,36 @@ public final class BlockLightEngine extends LayerLightEngine<BlockLightSectionSt
       return blockGetter != null ? blockGetter.getLightEmission(this.pos.set(i, i2, i3)) : 0;
    }
 
-   protected int computeLevelFromNeighbor(long l, long l2, int i) {
-      // $FF: Couldn't be decompiled
+   // MagmaCube start - decompile error
+   protected int computeLevelFromNeighbor(long startPos, long endPos, int startLevel) {
+      if (endPos == Long.MAX_VALUE) {
+         return 15;
+      } else if (startPos == Long.MAX_VALUE) {
+         return startLevel + 15 - this.getLightEmission(endPos);
+      } else if (startLevel >= 15) {
+         return startLevel;
+      } else {
+         int i = Integer.signum(BlockPos.getX(endPos) - BlockPos.getX(startPos));
+         int j = Integer.signum(BlockPos.getY(endPos) - BlockPos.getY(startPos));
+         int k = Integer.signum(BlockPos.getZ(endPos) - BlockPos.getZ(startPos));
+         Direction direction = Direction.fromNormal(i, j, k);
+         if (direction == null) {
+            return 15;
+         } else {
+            MutableInt mutableint = new MutableInt();
+            BlockState blockstate = this.getStateAndOpacity(endPos, mutableint);
+            if (mutableint.getValue() >= 15) {
+               return 15;
+            } else {
+               BlockState blockstate1 = this.getStateAndOpacity(startPos, (MutableInt)null);
+               VoxelShape voxelshape = this.getShape(blockstate1, startPos, direction);
+               VoxelShape voxelshape1 = this.getShape(blockstate, endPos, direction.getOpposite());
+               return Shapes.faceShapeOccludes(voxelshape, voxelshape1) ? 15 : startLevel + Math.max(1, mutableint.getValue());
+            }
+         }
+      }
    }
+   // MagmaCube end - decompile error
 
    protected void checkNeighborsAfterUpdate(long l, int i, boolean flag) {
       long l2 = SectionPos.blockToSection(l);
diff --git a/src/main/java/net/minecraft/world/level/lighting/DynamicGraphMinFixedPoint.java b/src/main/java/net/minecraft/world/level/lighting/DynamicGraphMinFixedPoint.java
index bf31b720fa7dbfc598e4fca0200e87f76e658ec3..a5e50011dcdca503c653a0d4f66e579b01b66367 100644
--- a/src/main/java/net/minecraft/world/level/lighting/DynamicGraphMinFixedPoint.java
+++ b/src/main/java/net/minecraft/world/level/lighting/DynamicGraphMinFixedPoint.java
@@ -5,6 +5,8 @@ import it.unimi.dsi.fastutil.longs.Long2ByteOpenHashMap;
 import it.unimi.dsi.fastutil.longs.LongArrayList;
 import it.unimi.dsi.fastutil.longs.LongLinkedOpenHashSet;
 import it.unimi.dsi.fastutil.longs.LongList;
+
+import java.util.function.LongConsumer;
 import java.util.function.LongPredicate;
 import net.minecraft.util.Mth;
 
@@ -84,13 +86,13 @@ public abstract class DynamicGraphMinFixedPoint {
 
    public void removeIf(LongPredicate longPredicate) {
       LongList longList = new LongArrayList();
-      this.computedLevels.keySet().forEach((l) -> {
+      this.computedLevels.keySet().forEach((LongConsumer) (l) -> { // MagmaCube - decompile error
          if (longPredicate.test(l)) {
             longList.add(l);
          }
 
       });
-      longList.forEach(this::removeFromQueue);
+      longList.forEach((LongConsumer) this::removeFromQueue); // MagmaCube - decompile error
    }
 
    private void dequeue(long l, int i, int i2, boolean flag) {
diff --git a/src/main/java/net/minecraft/world/level/lighting/LayerLightSectionStorage.java b/src/main/java/net/minecraft/world/level/lighting/LayerLightSectionStorage.java
index 34817884f502a51761ce2abcc059985941d7a713..35117bf82eebfdaadc9b9104a91227b8d56b7f79 100644
--- a/src/main/java/net/minecraft/world/level/lighting/LayerLightSectionStorage.java
+++ b/src/main/java/net/minecraft/world/level/lighting/LayerLightSectionStorage.java
@@ -203,10 +203,11 @@ public abstract class LayerLightSectionStorage<M extends DataLayerStorageMap<M>>
 
          this.toRemove.clear();
          this.hasToRemove = false;
-         ObjectIterator<Entry<DataLayer>> objectIterator = this.queuedSections.long2ObjectEntrySet().iterator();
-
-         while(objectIterator.hasNext()) {
-            Entry<DataLayer> entry = (Entry)objectIterator.next();
+         // MagmaCube start - decompile error
+         ObjectIterator<Entry<DataLayer>> objectIteratorx = this.queuedSections.long2ObjectEntrySet().iterator();
+         while(objectIteratorx.hasNext()) {
+            Entry<DataLayer> entry = (Entry)objectIteratorx.next();
+            // MagmaCube end - decompile error
             long l3 = entry.getLongKey();
             if (this.storingLightForSection(l3)) {
                DataLayer dataLayer3 = (DataLayer)entry.getValue();
@@ -236,13 +237,13 @@ public abstract class LayerLightSectionStorage<M extends DataLayerStorageMap<M>>
          }
 
          this.untrustedSections.clear();
-         objectIterator = this.queuedSections.long2ObjectEntrySet().iterator();
+         objectIteratorx = this.queuedSections.long2ObjectEntrySet().iterator();
 
-         while(objectIterator.hasNext()) {
-            Entry<DataLayer> entry2 = (Entry)objectIterator.next();
+         while(objectIteratorx.hasNext()) {
+            Entry<DataLayer> entry2 = (Entry)objectIteratorx.next();
             long l6 = entry2.getLongKey();
             if (this.storingLightForSection(l6)) {
-               objectIterator.remove();
+               objectIteratorx.remove();
             }
          }
 
diff --git a/src/main/java/net/minecraft/world/level/lighting/SkyLightEngine.java b/src/main/java/net/minecraft/world/level/lighting/SkyLightEngine.java
index 3c47a124ad81f2952fdb3f329fdd6d4b991df067..754e53d1d520f0813f9af05e96414ab5d75dd44e 100644
--- a/src/main/java/net/minecraft/world/level/lighting/SkyLightEngine.java
+++ b/src/main/java/net/minecraft/world/level/lighting/SkyLightEngine.java
@@ -19,9 +19,76 @@ public final class SkyLightEngine extends LayerLightEngine<SkyLightSectionStorag
       super(lightChunkGetter, LightLayer.SKY, new SkyLightSectionStorage(lightChunkGetter));
    }
 
-   protected int computeLevelFromNeighbor(long l, long l2, int i) {
-      // $FF: Couldn't be decompiled
+   // MagmaCube start - decompile error
+   protected int computeLevelFromNeighbor(long startPos, long endPos, int startLevel) {
+      if (endPos == Long.MAX_VALUE) {
+         return 15;
+      } else {
+         if (startPos == Long.MAX_VALUE) {
+            if (!this.storage.hasLightSource(endPos)) {
+               return 15;
+            }
+
+            startLevel = 0;
+         }
+
+         if (startLevel >= 15) {
+            return startLevel;
+         } else {
+            MutableInt mutableint = new MutableInt();
+            BlockState blockstate = this.getStateAndOpacity(endPos, mutableint);
+            if (mutableint.getValue() >= 15) {
+               return 15;
+            } else {
+               int i = BlockPos.getX(startPos);
+               int j = BlockPos.getY(startPos);
+               int k = BlockPos.getZ(startPos);
+               int l = BlockPos.getX(endPos);
+               int i1 = BlockPos.getY(endPos);
+               int j1 = BlockPos.getZ(endPos);
+               boolean flag = i == l && k == j1;
+               int k1 = Integer.signum(l - i);
+               int l1 = Integer.signum(i1 - j);
+               int i2 = Integer.signum(j1 - k);
+               Direction direction;
+               if (startPos == Long.MAX_VALUE) {
+                  direction = Direction.DOWN;
+               } else {
+                  direction = Direction.fromNormal(k1, l1, i2);
+               }
+
+               BlockState blockstate1 = this.getStateAndOpacity(startPos, (MutableInt)null);
+               if (direction != null) {
+                  VoxelShape voxelshape = this.getShape(blockstate1, startPos, direction);
+                  VoxelShape voxelshape1 = this.getShape(blockstate, endPos, direction.getOpposite());
+                  if (Shapes.faceShapeOccludes(voxelshape, voxelshape1)) {
+                     return 15;
+                  }
+               } else {
+                  VoxelShape voxelshape3 = this.getShape(blockstate1, startPos, Direction.DOWN);
+                  if (Shapes.faceShapeOccludes(voxelshape3, Shapes.empty())) {
+                     return 15;
+                  }
+
+                  int j2 = flag ? -1 : 0;
+                  Direction direction1 = Direction.fromNormal(k1, j2, i2);
+                  if (direction1 == null) {
+                     return 15;
+                  }
+
+                  VoxelShape voxelshape2 = this.getShape(blockstate, endPos, direction1.getOpposite());
+                  if (Shapes.faceShapeOccludes(Shapes.empty(), voxelshape2)) {
+                     return 15;
+                  }
+               }
+
+               boolean flag1 = startPos == Long.MAX_VALUE || flag && j > i1;
+               return flag1 && startLevel == 0 && mutableint.getValue() == 0 ? 0 : startLevel + Math.max(1, mutableint.getValue());
+            }
+         }
+      }
    }
+   // MagmaCube end - decompile error
 
    protected void checkNeighborsAfterUpdate(long l, int i, boolean flag) {
       long l2 = SectionPos.blockToSection(l);
diff --git a/src/main/java/net/minecraft/world/level/material/FlowingFluid.java b/src/main/java/net/minecraft/world/level/material/FlowingFluid.java
index a08f8aafb1dd170795924cab66c54aacd4b52575..5a9c66528612abe4de4c4defe1d49051bbc9cb2c 100644
--- a/src/main/java/net/minecraft/world/level/material/FlowingFluid.java
+++ b/src/main/java/net/minecraft/world/level/material/FlowingFluid.java
@@ -261,16 +261,18 @@ public abstract class FlowingFluid extends Fluid {
             BlockPos blockPos3 = blockPos.relative(direction2);
             short s = getCacheKey(blockPos2, blockPos3);
             Pair<BlockState, FluidState> pair = (Pair)short2ObjectMap.computeIfAbsent(s, (ix) -> {
-               BlockState blockState = levelReader.getBlockState(blockPos3);
-               return Pair.of(blockState, blockState.getFluidState());
+               BlockState blockStatex = levelReader.getBlockState(blockPos3); // MagmaCube - decompile error
+               return Pair.of(blockStatex, blockStatex.getFluidState()); // MagmaCube - decompile error
             });
             BlockState blockState2 = (BlockState)pair.getFirst();
             FluidState fluidState = (FluidState)pair.getSecond();
             if (this.canPassThrough(levelReader, this.getFlowing(), blockPos, blockState, direction2, blockPos3, blockState2, fluidState)) {
                boolean flag = short2BooleanMap.computeIfAbsent(s, (ix) -> {
-                  BlockPos blockPos2 = blockPos3.below();
-                  BlockState blockState2 = levelReader.getBlockState(blockPos2);
-                  return this.isWaterHole(levelReader, this.getFlowing(), blockPos3, blockState2, blockPos2, blockState2);
+                  // MagmaCube start - decompile error
+                  BlockPos blockPos2x = blockPos3.below();
+                  BlockState blockState2x = levelReader.getBlockState(blockPos2x);
+                  return this.isWaterHole(levelReader, this.getFlowing(), blockPos3, blockState2x, blockPos2x, blockState2x);
+                  // MagmaCube end - decompile error
                });
                if (flag) {
                   return i;
@@ -331,8 +333,8 @@ public abstract class FlowingFluid extends Fluid {
          BlockPos blockPos2 = blockPos.relative(direction);
          short s = getCacheKey(blockPos, blockPos2);
          Pair<BlockState, FluidState> pair = (Pair)short2ObjectMap.computeIfAbsent(s, (ix) -> {
-            BlockState blockState = levelReader.getBlockState(blockPos2);
-            return Pair.of(blockState, blockState.getFluidState());
+            BlockState blockStatex = levelReader.getBlockState(blockPos2); // MagmaCube - decompile error
+            return Pair.of(blockStatex, blockStatex.getFluidState()); // MagmaCube - decompile error
          });
          BlockState blockState2 = (BlockState)pair.getFirst();
          FluidState fluidState = (FluidState)pair.getSecond();
@@ -340,8 +342,10 @@ public abstract class FlowingFluid extends Fluid {
          if (this.canPassThrough(levelReader, fluidState2.getType(), blockPos, blockState, direction, blockPos2, blockState2, fluidState)) {
             BlockPos blockPos3 = blockPos2.below();
             boolean flag = short2BooleanMap.computeIfAbsent(s, (ix) -> {
-               BlockState blockState2 = levelReader.getBlockState(blockPos3);
-               return this.isWaterHole(levelReader, this.getFlowing(), blockPos2, blockState2, blockPos3, blockState2);
+               // MagmaCube start - decompile error
+               BlockState blockState2x = levelReader.getBlockState(blockPos3);
+               return this.isWaterHole(levelReader, this.getFlowing(), blockPos2, blockState2x, blockPos3, blockState2x);
+               // MagmaCube end - decompile error
             });
             int i2;
             if (flag) {
diff --git a/src/main/java/net/minecraft/world/level/pathfinder/Node.java b/src/main/java/net/minecraft/world/level/pathfinder/Node.java
index f8345f8609886fa6cc7dbc7ab971a31fd033f1dd..66db02dd6865029b1fd9d9b7c6a7bb1e81071338 100644
--- a/src/main/java/net/minecraft/world/level/pathfinder/Node.java
+++ b/src/main/java/net/minecraft/world/level/pathfinder/Node.java
@@ -41,7 +41,7 @@ public class Node {
    }
 
    public static int createHash(int i, int i2, int i3) {
-      return i2 & 255 | (i & 32767) << 8 | (i3 & 32767) << 24 | (i < 0 ? Integer.MIN_VALUE : 0) | (i3 < 0 ? '閠�' : 0);
+      return i2 & 255 | (i & 32767) << 8 | (i3 & 32767) << 24 | (i < 0 ? Integer.MIN_VALUE : 0) | (i3 < 0 ? '\u8000' : 0); // MagmaCube - decompile error
    }
 
    public float distanceTo(Node node) {
diff --git a/src/main/java/net/minecraft/world/level/portal/PortalForcer.java b/src/main/java/net/minecraft/world/level/portal/PortalForcer.java
index 6dac5e1408757c412eaa8aced3ed263ca398c50e..01801454b5213a789b4b96c183683cf587d60c20 100644
--- a/src/main/java/net/minecraft/world/level/portal/PortalForcer.java
+++ b/src/main/java/net/minecraft/world/level/portal/PortalForcer.java
@@ -30,12 +30,14 @@ public class PortalForcer {
       PoiManager poiManager = this.level.getPoiManager();
       int i = flag ? 16 : 128;
       poiManager.ensureLoadedAndValid(this.level, blockPos, i);
-      Optional<PoiRecord> optional = poiManager.getInSquare((poiType) -> poiType == PoiType.NETHER_PORTAL, blockPos, i, PoiManager.Occupancy.ANY).sorted(Comparator.comparingDouble((poiRecord) -> poiRecord.getPos().distSqr(blockPos)).thenComparingInt((poiRecord) -> poiRecord.getPos().getY())).filter((poiRecord) -> this.level.getBlockState(poiRecord.getPos()).hasProperty(BlockStateProperties.HORIZONTAL_AXIS)).findFirst();
+      Optional<PoiRecord> optional = poiManager.getInSquare((poiType) -> poiType == PoiType.NETHER_PORTAL, blockPos, i, PoiManager.Occupancy.ANY).sorted(Comparator.<PoiRecord>comparingDouble((poiRecord) -> poiRecord.getPos().distSqr(blockPos)).thenComparingInt((poiRecord) -> poiRecord.getPos().getY())).filter((poiRecord) -> this.level.getBlockState(poiRecord.getPos()).hasProperty(BlockStateProperties.HORIZONTAL_AXIS)).findFirst(); // MagmaCube - decompile error
       return optional.map((poiRecord) -> {
-         BlockPos blockPos = poiRecord.getPos();
-         this.level.getChunkSource().addRegionTicket(TicketType.PORTAL, new ChunkPos(blockPos), 3, blockPos);
-         BlockState blockState = this.level.getBlockState(blockPos);
-         return BlockUtil.getLargestRectangleAround(blockPos, blockState.getValue(BlockStateProperties.HORIZONTAL_AXIS), 21, Direction.Axis.Y, 21, (blockPosx) -> this.level.getBlockState(blockPosx) == blockState);
+         // MagmaCube start - decompile error
+         BlockPos blockPosx = poiRecord.getPos();
+         this.level.getChunkSource().addRegionTicket(TicketType.PORTAL, new ChunkPos(blockPosx), 3, blockPosx);
+         BlockState blockState = this.level.getBlockState(blockPosx);
+         return BlockUtil.getLargestRectangleAround(blockPosx, blockState.getValue(BlockStateProperties.HORIZONTAL_AXIS), 21, Direction.Axis.Y, 21, (blockPosxx) -> this.level.getBlockState(blockPosxx) == blockState);
+         // MagmaCube end - decompile error
       });
    }
 
diff --git a/src/main/java/net/minecraft/world/level/storage/LevelStorageSource.java b/src/main/java/net/minecraft/world/level/storage/LevelStorageSource.java
index da370dbb067365ed349e519937d2bfc4761727ce..5a3b9e159e8d9c138679ff3265854a8e1883eaca 100644
--- a/src/main/java/net/minecraft/world/level/storage/LevelStorageSource.java
+++ b/src/main/java/net/minecraft/world/level/storage/LevelStorageSource.java
@@ -96,12 +96,14 @@ public class LevelStorageSource {
          }
       }
 
-      Dynamic<T> dynamic3 = dataFixer.update(References.WORLD_GEN_SETTINGS, dynamic2, i, SharedConstants.getCurrentVersion().getWorldVersion());
-      DataResult<WorldGenSettings> dataResult = WorldGenSettings.CODEC.parse(dynamic3);
+      // MagmaCube start - decompile error
+      Dynamic<T> dynamic31 = dataFixer.update(References.WORLD_GEN_SETTINGS, dynamic2, i, SharedConstants.getCurrentVersion().getWorldVersion());
+      DataResult<WorldGenSettings> dataResult = WorldGenSettings.CODEC.parse(dynamic31);
       return Pair.of(dataResult.resultOrPartial(Util.prefix("WorldGenSettings: ", LOGGER::error)).orElseGet(() -> {
-         Registry<DimensionType> registry = (Registry)RegistryLookupCodec.create(Registry.DIMENSION_TYPE_REGISTRY).codec().parse(dynamic3).resultOrPartial(Util.prefix("Dimension type registry: ", LOGGER::error)).orElseThrow(() -> new IllegalStateException("Failed to get dimension registry"));
-         Registry<Biome> registry2 = (Registry)RegistryLookupCodec.create(Registry.BIOME_REGISTRY).codec().parse(dynamic3).resultOrPartial(Util.prefix("Biome registry: ", LOGGER::error)).orElseThrow(() -> new IllegalStateException("Failed to get biome registry"));
-         Registry<NoiseGeneratorSettings> registry3 = (Registry)RegistryLookupCodec.create(Registry.NOISE_GENERATOR_SETTINGS_REGISTRY).codec().parse(dynamic3).resultOrPartial(Util.prefix("Noise settings registry: ", LOGGER::error)).orElseThrow(() -> new IllegalStateException("Failed to get noise settings registry"));
+         Registry<DimensionType> registry = (Registry)RegistryLookupCodec.create(Registry.DIMENSION_TYPE_REGISTRY).codec().parse(dynamic31).resultOrPartial(Util.prefix("Dimension type registry: ", LOGGER::error)).orElseThrow(() -> new IllegalStateException("Failed to get dimension registry"));
+         Registry<Biome> registry2 = (Registry)RegistryLookupCodec.create(Registry.BIOME_REGISTRY).codec().parse(dynamic31).resultOrPartial(Util.prefix("Biome registry: ", LOGGER::error)).orElseThrow(() -> new IllegalStateException("Failed to get biome registry"));
+         Registry<NoiseGeneratorSettings> registry3 = (Registry)RegistryLookupCodec.create(Registry.NOISE_GENERATOR_SETTINGS_REGISTRY).codec().parse(dynamic31).resultOrPartial(Util.prefix("Noise settings registry: ", LOGGER::error)).orElseThrow(() -> new IllegalStateException("Failed to get noise settings registry"));
+         // MagmaCube end - decompile error
          return WorldGenSettings.makeDefault(registry, registry2, registry3);
       }), dataResult.lifecycle());
    }
diff --git a/src/main/java/net/minecraft/world/level/storage/loot/GsonAdapterFactory.java b/src/main/java/net/minecraft/world/level/storage/loot/GsonAdapterFactory.java
index 3e5405e015e7b6aa10a2d310630691dcfcb49eed..df2c7d9e4ce22d63e70b4ea583f4a18f5baeb2f2 100644
--- a/src/main/java/net/minecraft/world/level/storage/loot/GsonAdapterFactory.java
+++ b/src/main/java/net/minecraft/world/level/storage/loot/GsonAdapterFactory.java
@@ -89,7 +89,7 @@ public class GsonAdapterFactory {
          } else {
             JsonObject jsonObject = new JsonObject();
             jsonObject.addProperty(this.typeKey, this.registry.getKey(serializerType).toString());
-            serializerType.getSerializer().serialize(jsonObject, object, jsonSerializationContext);
+            ((Serializer) serializerType.getSerializer()).serialize(jsonObject, object, jsonSerializationContext); // MagmaCube - decompile error
             return jsonObject;
          }
       }
diff --git a/src/main/java/net/minecraft/world/level/storage/loot/ValidationContext.java b/src/main/java/net/minecraft/world/level/storage/loot/ValidationContext.java
index 6ef90331265031adaa56530c50cdeb87e93933b9..61c4da69de29e10fa0355919cad96373d140a09b 100644
--- a/src/main/java/net/minecraft/world/level/storage/loot/ValidationContext.java
+++ b/src/main/java/net/minecraft/world/level/storage/loot/ValidationContext.java
@@ -53,12 +53,12 @@ public class ValidationContext {
    }
 
    public ValidationContext enterTable(String s, ResourceLocation resourceLocation) {
-      ImmutableSet<ResourceLocation> immutableSet = ImmutableSet.builder().addAll(this.visitedTables).add(resourceLocation).build();
+      ImmutableSet<ResourceLocation> immutableSet = (ImmutableSet) ImmutableSet.builder().addAll(this.visitedTables).add(resourceLocation).build(); // MagmaCube - decompile error
       return new ValidationContext(this.problems, () -> this.getContext() + s, this.params, this.conditionResolver, this.visitedConditions, this.tableResolver, immutableSet);
    }
 
    public ValidationContext enterCondition(String s, ResourceLocation resourceLocation) {
-      ImmutableSet<ResourceLocation> immutableSet = ImmutableSet.builder().addAll(this.visitedConditions).add(resourceLocation).build();
+      ImmutableSet<ResourceLocation> immutableSet = (ImmutableSet) ImmutableSet.builder().addAll(this.visitedConditions).add(resourceLocation).build(); // MagmaCube - decompile error
       return new ValidationContext(this.problems, () -> this.getContext() + s, this.params, this.conditionResolver, immutableSet, this.tableResolver, this.visitedTables);
    }
 
diff --git a/src/main/java/net/minecraft/world/level/storage/loot/entries/EntryGroup.java b/src/main/java/net/minecraft/world/level/storage/loot/entries/EntryGroup.java
index 132d81dc9eb7fc57fc4e33c837e7724188afdc5e..35816bd7c020b25f07cc52e7ababce5a3e2af40f 100644
--- a/src/main/java/net/minecraft/world/level/storage/loot/entries/EntryGroup.java
+++ b/src/main/java/net/minecraft/world/level/storage/loot/entries/EntryGroup.java
@@ -27,9 +27,11 @@ public class EntryGroup extends CompositeEntryBase {
          };
       default:
          return (lootContext, consumer) -> {
-            for(ComposableEntryContainer composableEntryContainer : composableEntryContainers) {
-               composableEntryContainer.expand(lootContext, consumer);
+            // MagmaCube start - decompile error
+            for(ComposableEntryContainer composableEntryContainerz : composableEntryContainers) {
+               composableEntryContainerz.expand(lootContext, consumer);
             }
+            // MagmaCube end - decompile error
 
             return true;
          };
diff --git a/src/main/java/net/minecraft/world/level/storage/loot/functions/EnchantRandomlyFunction.java b/src/main/java/net/minecraft/world/level/storage/loot/functions/EnchantRandomlyFunction.java
index 23821a69a57f98d03fdc584754bb6b70543d9833..57e46bff4ffd08d37067d4b9251a86013384acf3 100644
--- a/src/main/java/net/minecraft/world/level/storage/loot/functions/EnchantRandomlyFunction.java
+++ b/src/main/java/net/minecraft/world/level/storage/loot/functions/EnchantRandomlyFunction.java
@@ -47,7 +47,7 @@ public class EnchantRandomlyFunction extends LootItemConditionalFunction {
       Enchantment enchantment;
       if (this.enchantments.isEmpty()) {
          boolean flag = itemStack.getItem() == Items.BOOK;
-         List<Enchantment> list = (List)Registry.ENCHANTMENT.stream().filter(Enchantment::isDiscoverable).filter((enchantment) -> flag || enchantment.canEnchant(itemStack)).collect(Collectors.toList());
+         List<Enchantment> list = Registry.ENCHANTMENT.stream().filter(Enchantment::isDiscoverable).filter((enchantmentx) -> flag || enchantmentx.canEnchant(itemStack)).collect(Collectors.toList()); // MagmaCube - decompile error
          if (list.isEmpty()) {
             LOGGER.warn("Couldn't find a compatible enchantment for {}", itemStack);
             return itemStack;
diff --git a/src/main/java/net/minecraft/world/level/storage/loot/functions/LootItemFunctions.java b/src/main/java/net/minecraft/world/level/storage/loot/functions/LootItemFunctions.java
index a7b8530acf7e398d926dda6cc36e428e3b386548..0231298c3842a5e89d9dd90c794ad2b9895b8114 100644
--- a/src/main/java/net/minecraft/world/level/storage/loot/functions/LootItemFunctions.java
+++ b/src/main/java/net/minecraft/world/level/storage/loot/functions/LootItemFunctions.java
@@ -52,9 +52,11 @@ public class LootItemFunctions {
          return (itemStack, lootContext) -> (ItemStack)biFunction2.apply(biFunction.apply(itemStack, lootContext), lootContext);
       default:
          return (itemStack, lootContext) -> {
-            for(BiFunction<ItemStack, LootContext, ItemStack> biFunction : biFunctions) {
-               itemStack = (ItemStack)biFunction.apply(itemStack, lootContext);
+            // MagmaCube start - decompile error
+            for(BiFunction<ItemStack, LootContext, ItemStack> biFunctionx : biFunctions) {
+               itemStack = (ItemStack)biFunctionx.apply(itemStack, lootContext);
             }
+            // MagmaCube end - decompile error
 
             return itemStack;
          };
diff --git a/src/main/java/net/minecraft/world/level/timers/TimerQueue.java b/src/main/java/net/minecraft/world/level/timers/TimerQueue.java
index 439df229bffb4d741efa91afb0c94dc36695c58c..0085cb0ef730fe5892ab6f11b0b4bdff05fd9ddd 100644
--- a/src/main/java/net/minecraft/world/level/timers/TimerQueue.java
+++ b/src/main/java/net/minecraft/world/level/timers/TimerQueue.java
@@ -25,7 +25,7 @@ public class TimerQueue<T> {
    private final Table<String, Long, TimerQueue.Event<T>> events = HashBasedTable.create();
 
    private static <T> Comparator<TimerQueue.Event<T>> createComparator() {
-      return Comparator.comparingLong((event) -> event.triggerTime).thenComparing((event) -> event.sequentialId);
+      return Comparator.<Event<T>>comparingLong((event) -> event.triggerTime).thenComparing((event) -> event.sequentialId); // MagmaCube - decompile error
    }
 
    public TimerQueue(TimerCallbacks<T> timerCallbacks, Stream<Dynamic<Tag>> stream) {
diff --git a/src/main/java/net/minecraft/world/phys/shapes/BitSetDiscreteVoxelShape.java b/src/main/java/net/minecraft/world/phys/shapes/BitSetDiscreteVoxelShape.java
index f5d9ef91a87e5d0bbb84306dc4479fe72d9a29fe..91dd7c4240a97684505afb62fdb6e26b19211981 100644
--- a/src/main/java/net/minecraft/world/phys/shapes/BitSetDiscreteVoxelShape.java
+++ b/src/main/java/net/minecraft/world/phys/shapes/BitSetDiscreteVoxelShape.java
@@ -109,9 +109,11 @@ public final class BitSetDiscreteVoxelShape extends DiscreteVoxelShape {
          boolean[] booleans = new boolean[]{false};
          boolean flag = indexMerger2.forMergedIndexes((i4, i5, i6) -> {
             boolean[] booleans2 = new boolean[]{false};
-            boolean flag = indexMerger3.forMergedIndexes((i7, i8, i9) -> {
-               boolean flag = booleanOp.apply(discreteVoxelShape.isFullWide(i, i4, i7), discreteVoxelShape2.isFullWide(i2, i5, i8));
-               if (flag) {
+            // MagmaCube start - decompile error
+            boolean flagx = indexMerger3.forMergedIndexes((i7, i8, i9) -> {
+               boolean flagxx = booleanOp.apply(discreteVoxelShape.isFullWide(i, i4, i7), discreteVoxelShape2.isFullWide(i2, i5, i8));
+               if (flagxx) {
+                  // MagmaCube end - decompile error
                   bitSetDiscreteVoxelShape.storage.set(bitSetDiscreteVoxelShape.getIndex(i3, i6, i9));
                   ints[2] = Math.min(ints[2], i9);
                   ints[5] = Math.max(ints[5], i9);
@@ -126,7 +128,7 @@ public final class BitSetDiscreteVoxelShape extends DiscreteVoxelShape {
                booleans[0] = true;
             }
 
-            return flag;
+            return flagx; // MagmaCube - decompile error
          });
          if (booleans[0]) {
             ints[0] = Math.min(ints[0], i3);
diff --git a/src/main/java/net/minecraft/world/scores/Scoreboard.java b/src/main/java/net/minecraft/world/scores/Scoreboard.java
index f7f966c406e9b4fac41291c0d0fac674bf9618ad..64c0fc8f4ea6822f25933c5381f32fab4ffbd446 100644
--- a/src/main/java/net/minecraft/world/scores/Scoreboard.java
+++ b/src/main/java/net/minecraft/world/scores/Scoreboard.java
@@ -53,7 +53,7 @@ public class Scoreboard {
    }
 
    public final void forAllObjectives(ObjectiveCriteria objectiveCriteria, String s, Consumer<Score> consumer) {
-      ((List)this.objectivesByCriteria.getOrDefault(objectiveCriteria, Collections.emptyList())).forEach((objective) -> consumer.accept(this.getOrCreatePlayerScore(s, objective)));
+      ((List)this.objectivesByCriteria.getOrDefault(objectiveCriteria, Collections.emptyList())).forEach((objective) -> consumer.accept(this.getOrCreatePlayerScore(s, (Objective) objective))); // MagmaCube - decompile error
    }
 
    public boolean hasPlayerScore(String s, Objective objective) {
